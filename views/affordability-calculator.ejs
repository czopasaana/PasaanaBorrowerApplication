<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pasaana - Affordability Calculator</title>
  <meta name="description" content="Determine how much house you can afford based on your income and expenses with Pasaana's Affordability Calculator.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Link to CSS -->
  <link rel="stylesheet" href="/styles.css">
  <!-- Include Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
   <!-- Include jQuery for AJAX requests -->
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-gray-100">
  <!-- Navigation Bar -->
  <%- include('partials/navbar.ejs') %>

  <!-- Title Section -->
  <section class="bg-white py-8">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-5xl font-bold text-blue-900 mb-4">Affordability Calculator</h1>
      <p class="text-xl text-gray-700">Find out how much home you can afford with Pasaana.</p>
    </div>
  </section>

  <!-- Affordability Calculator Content -->
  <main class="container mx-auto py-12 px-4">
    <section class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-lg">
      <form id="affordability-form" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="annual-income" class="block text-gray-700 font-semibold">Annual Income ($):</label>
            <input type="number" id="annual-income" name="annualIncome" step="0.01" required class="w-full mt-2 border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="monthly-debts" class="block text-gray-700 font-semibold">Monthly Debts ($):</label>
            <input type="number" id="monthly-debts" name="monthlyDebts" step="0.01" required class="w-full mt-2 border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="down-payment" class="block text-gray-700 font-semibold">Available Down Payment ($):</label>
            <input type="number" id="down-payment" name="downPayment" step="0.01" required class="w-full mt-2 border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="interest-rate" class="block text-gray-700 font-semibold">ExpectedInterest Rate (%):</label>
            <input type="number" id="interest-rate" name="interestRate" step="0.01" required class="w-full mt-2 border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="loan-term" class="block text-gray-700 font-semibold">Loan Term (Years):</label>
            <input type="number" id="loan-term" name="loanTerm" value="30" required class="w-full mt-2 border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <!-- Additional Inputs for Future Projections -->
          <div>
            <label for="salary-growth" class="block text-gray-700 font-semibold">Expected Annual Salary Growth Rate (%):</label>
            <input type="number" id="salary-growth" name="salaryGrowth" step="0.01" value="3" required class="w-full mt-2 border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="expense-growth" class="block text-gray-700 font-semibold">Expected Annual Expense Growth Rate (%):</label>
            <input type="number" id="expense-growth" name="expenseGrowth" step="0.01" value="2" required class="w-full mt-2 border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
        </div>
        <button type="submit" class="w-full bg-blue-900 text-white px-6 py-4 rounded-md text-lg font-semibold hover:bg-blue-800 transition duration-300">Calculate Affordability</button>
      </form>

      <!-- Results Section -->
      <div id="results" class="mt-12 hidden">
        <div class="bg-blue-50 p-6 rounded-lg shadow">
          <h2 class="text-2xl font-bold text-blue-900 mb-4">Affordability Results</h2>
          <p class="text-gray-700 mb-2"><strong>Maximum Affordable Home Price:</strong> <span id="affordable-home-price"></span></p>
          <p class="text-gray-700"><strong>Estimated Monthly Mortgage Payment:</strong> <span id="monthly-payment"></span></p>
        </div>
        <!-- See More Details Button -->
        <div class="text-center mt-6">
          <button id="details-btn" class="bg-gray-800 text-white px-6 py-3 rounded-md text-lg font-semibold hover:bg-gray-700 transition duration-300">See More Details</button>
        </div>
        <!-- Detailed Breakdown -->
        <div id="details-section" class="mt-6 hidden">
          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-xl font-bold mb-4">Detailed Breakdown</h3>
            <p class="text-gray-700">Annual Income: <span id="detail-annual-income"></span></p>
            <p class="text-gray-700">Monthly Debts: <span id="detail-monthly-debts"></span></p>
            <p class="text-gray-700">Down Payment: <span id="detail-down-payment"></span></p>
            <p class="text-gray-700">Interest Rate: <span id="detail-interest-rate"></span>%</p>
            <p class="text-gray-700">Loan Term: <span id="detail-loan-term"></span> years</p>
            <p class="text-gray-700">Debt-to-Income Ratio: <span id="detail-dti"></span>%</p>
          </div>
        </div>
        <!-- Projection Chart -->
        <div class="mt-12">
          <h2 class="text-2xl font-bold text-blue-900 mb-4">Future Financial Projections</h2>
          <canvas id="projection-chart"></canvas>
        </div>
      </div>
    </section>
  </main>

  <!-- Chatbot -->
  <%- include('partials/chatbot.ejs') %>

  <!-- JavaScript -->
  <!-- Include Chart.js CDN before your JavaScript file -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/affordability-calculator.js"></script>

  <!-- What-If Scenarios Section -->
  <section class="mt-12">
    <h2 class="text-2xl font-bold text-blue-900 mb-4">What-If Scenarios</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label for="whatif-interest-rate" class="block text-gray-700 font-semibold">Adjust Interest Rate (%):</label>
        <input type="range" id="whatif-interest-rate" name="whatIfInterestRate" min="1" max="10" step="0.1" value="3.5" class="w-full">
        <p class="mt-2 text-gray-700">Selected Rate: <span id="whatif-interest-rate-value">3.5%</span></p>
      </div>
      <!-- Add more adjustable inputs as needed -->
    </div>
  </section>
</body>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white text-center py-4 mt-12">
    <p>Â© 2024 Pasaana. All rights reserved.</p>
  </footer>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pre-Approval - Review and Confirmation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Include jQuery for AJAX requests -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-gradient-to-r from-blue-50 to-indigo-50 min-h-screen flex flex-col">
  <!-- Navigation Bar -->
  <%- include('../partials/navbar.ejs') %>
  
  <!-- Progress Bar -->
  <%- include('../partials/progress-bar.ejs', { currentStep: 7 }) %>

  <!-- Main Content -->
  <main class="flex-grow container mx-auto py-0 px-4">
    <div class="max-w-3xl mx-auto bg-white p-10 rounded-xl shadow-2xl">
      <h2 class="text-3xl font-bold text-blue-900 mb-8">Step 7: Review Your Information</h2>
      <!-- Display the user's data -->
      <div class="mb-6">
        <% if (data) { %>
          <!-- Property Details -->
          <h3 class="text-2xl font-semibold text-blue-800 mb-4">Property Details</h3>
          <ul class="list-disc list-inside mb-6 text-gray-700">
            <% const step1 = data['step1'] || {}; %>
            <% const step1Labels = {
              homeStatus: 'Home Status',
              propertyAddress: 'Property Address',
              priceRange: 'Price Range',
              preferredLocation: 'Preferred Location'
            }; %>
            <% for (let key in step1) { %>
              <li><strong><%= step1Labels[key] || key %>:</strong> <%= step1[key] %></li>
            <% } %>
          </ul>
          <!-- Personal Information -->
          <h3 class="text-2xl font-semibold text-blue-800 mb-4">Personal Information</h3>
          <ul class="list-disc list-inside mb-6 text-gray-700">
            <% const step3 = data['step3'] || {}; %>
            <% const step3Labels = {
              firstName: 'First Name',
              lastName: 'Last Name',
              dob: 'Date of Birth',
              email: 'Email',
              phone: 'Phone Number',
              streetAddress: 'Street Address',
              city: 'City',
              state: 'State',
              zipCode: 'Zip Code',
              residencyStatus: 'Residency Status'
            }; %>
            <% for (let key in step3) { %>
              <li><strong><%= step3Labels[key] || key %>:</strong> <%= step3[key] %></li>
            <% } %>
          </ul>
          <!-- Employment and Income -->
          <h3 class="text-2xl font-semibold text-blue-800 mb-4">Employment and Income</h3>
          <ul class="list-disc list-inside mb-6 text-gray-700">
            <% const step4 = data['step4'] || {}; %>
            <% const step4Labels = {
              employmentStatus: 'Employment Status',
              employerName: 'Employer Name',
              jobTitle: 'Job Title',
              employmentLength: 'Employment Length',
              annualIncome: 'Annual Income',
              businessName: 'Business Name',
              industry: 'Industry',
              selfEmploymentLength: 'Self-Employment Length',
              selfAnnualIncome: 'Self Annual Income',
              incomeSource: 'Income Source',
              otherAnnualIncome: 'Other Annual Income',
              additionalIncome: 'Additional Income',
              additionalIncomeType: 'Additional Income Type',
              additionalIncomeAmount: 'Additional Income Amount'
            }; %>
            <% for (let key in step4) { %>
              <li><strong><%= step4Labels[key] || key %>:</strong> <%= step4[key] %></li>
            <% } %>
          </ul>
          <!-- Financial Information -->
          <h3 class="text-2xl font-semibold text-blue-800 mb-4">Financial Information</h3>
          <ul class="list-disc list-inside mb-6 text-gray-700">
            <% const step5 = data['step5'] || {}; %>
            <% const step5Labels = {
              checkingBalance: 'Checking Account Balance',
              savingsBalance: 'Savings Account Balance',
              hasInvestments: 'Has Investments?',
              investmentValue: 'Investment Value',
              hasRetirement: 'Has Retirement Funds?',
              retirementValue: 'Retirement Fund Value',
              creditCardPayments: 'Monthly Credit Card Payments',
              autoLoanPayments: 'Monthly Auto Loan Payments',
              studentLoanPayments: 'Monthly Student Loan Payments',
              hasOtherDebts: 'Has Other Debts?',
              otherDebtType: 'Other Debt Type',
              otherDebtPayment: 'Other Debt Monthly Payment',
              hasAlimony: 'Pays Alimony?',
              alimonyPayment: 'Alimony Monthly Payment'
            }; %>
            <% for (let key in step5) { %>
              <li><strong><%= step5Labels[key] || key %>:</strong> <%= step5[key] %></li>
            <% } %>
          </ul>
        <% } else { %>
          <p class="text-gray-700">No data to display.</p>
        <% } %>
      </div>
      <form action="/preapproval/submit" method="post">
        <div class="mb-6">
          <label class="inline-flex items-center">
            <input type="checkbox" name="confirmAccuracy" required class="form-checkbox h-5 w-5 text-blue-600">
            <span class="ml-2 text-gray-700">I confirm that the information provided is accurate and complete to the best of my knowledge.</span>
          </label>
        </div>
        <button type="submit" class="w-full bg-blue-900 text-white py-3 mt-6 rounded-full font-semibold text-lg shadow-md hover:bg-blue-800 transition duration-300">Submit Application</button>
      </form>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white text-center py-6 mt-8">
    <p>Â© 2024 Pasaana. All rights reserved.</p>
  </footer>
</body>
</html>
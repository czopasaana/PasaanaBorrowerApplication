<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pre-Approval - Step 1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Include jQuery for AJAX requests -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-gradient-to-r from-blue-50 to-indigo-50 min-h-screen flex flex-col">
  <!-- Navigation Bar -->
  <%- include('../partials/navbar.ejs') %>

  <!-- Progress Bar -->
  <%- include('../partials/progress-bar.ejs', { currentStep: 1 }) %>

  <!-- Main Content -->
  <main class="flex-grow container mx-auto py-0 px-4">
    <div class="max-w-3xl mx-auto bg-white p-10 rounded-xl shadow-2xl">
      <h2 class="text-3xl font-bold text-blue-900 mb-8">Step 1: Property Details</h2>
      <form action="/preapproval/step/1" method="post" id="step1-form">
        <!-- Home Search Status -->
        <div class="mb-6">
          <label for="homeStatus" class="block text-gray-800 font-medium mb-2">Have you found a specific property you're interested in?</label>
          <select name="homeStatus" id="homeStatus" required class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Select an option</option>
            <option value="yes">Yes, I have a property in mind</option>
            <option value="no">No, I'm still looking</option>
          </select>
        </div>

        <!-- If Yes: Property Address -->
        <div id="propertyDetails" class="mb-6 hidden">
          <label for="propertyAddress" class="block text-gray-800 font-medium mb-2">Property Address:</label>
          <input type="text" name="propertyAddress" id="propertyAddress" placeholder="Enter the property's address" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <!-- If No: Preferred Location and Price Range -->
        <div id="searchPreferences" class="mb-6 hidden">
          <label for="priceRange" class="block text-gray-800 font-medium mb-2">What's your target price range for a home?</label>
          <select name="priceRange" id="priceRange" class="w-full border border-gray-300 rounded-lg p-3 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Select a price range</option>
            <option value="under_100k">Under $100,000</option>
            <option value="100k_200k">$100,000 - $200,000</option>
            <option value="200k_300k">$200,001 - $300,000</option>
            <option value="300k_400k">$300,001 - $400,000</option>
            <option value="400k_500k">$400,001 - $500,000</option>
            <option value="500k_750k">$500,001 - $750,000</option>
            <option value="750k_1m">$750,001 - $1,000,000</option>
            <option value="over_1m">Over $1,000,000</option>
          </select>
          <label for="preferredLocation" class="block text-gray-800 font-medium mb-2">Where are you looking to buy a home?</label>
          <input type="text" name="preferredLocation" id="preferredLocation" placeholder="Enter city, state, or ZIP code" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <button type="submit" class="w-full bg-blue-900 text-white py-3 mt-6 rounded-full font-semibold text-lg shadow-md hover:bg-blue-800 transition duration-300">Continue</button>
      </form>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white text-center py-6">
    <p>Â© 2024 Pasaana. All rights reserved.</p>
  </footer>

  <!-- JavaScript to handle conditional display -->
  <script>
    document.getElementById('homeStatus').addEventListener('change', function() {
      const propertyDetails = document.getElementById('propertyDetails');
      const searchPreferences = document.getElementById('searchPreferences');
      if (this.value === 'yes') {
        propertyDetails.classList.remove('hidden');
        searchPreferences.classList.add('hidden');
        document.getElementById('propertyAddress').required = true;
      } else if (this.value === 'no') {
        propertyDetails.classList.add('hidden');
        searchPreferences.classList.remove('hidden');
        document.getElementById('propertyAddress').required = false;
      } else {
        propertyDetails.classList.add('hidden');
        searchPreferences.classList.add('hidden');
        document.getElementById('propertyAddress').required = false;
      }
    });
  </script>
</body>
</html>
<!-- views/tabs/mortgageAppTab.ejs -->

<%
// Helper function to get status display and class
function getStatusInfo(status) {
  // Normalize status
  let displayStatus = status || 'Not Started';
  if (displayStatus === 'InReview') displayStatus = 'In Review';
  
  // Get appropriate class
  let statusClass = 'bg-gray-200 text-gray-800';
  if (displayStatus === 'Completed') {
    statusClass = 'bg-green-200 text-green-800';
  } else if (displayStatus === 'In Progress') {
    statusClass = 'bg-yellow-200 text-yellow-800';
  } else if (displayStatus === 'In Review') {
    statusClass = 'bg-blue-200 text-blue-800';
  } else if (displayStatus === 'Not Started') {
    statusClass = 'bg-gray-200 text-gray-800';
  }
  
  return { display: displayStatus, class: statusClass };
}
%>

<section id="mortgageAppTab" class="tab-content hidden">

<% if (!isPreApproved) { %>
  <!-- Not Pre-Approved - Show Get Pre-Approved Message -->
  <div class="w-full">
    <div class="bg-white rounded-xl shadow-lg p-10 text-center">
      <div class="max-w-lg mx-auto">
        <div class="text-6xl mb-6">ðŸ”’</div>
        <h2 class="text-3xl font-bold text-blue-900 mb-4">Pre-Approval Required</h2>
        <p class="text-lg text-gray-600 mb-8">
          Before you can start your full mortgage application, you'll need to get pre-approved first. 
          This helps us determine how much home you can afford and gives you a pre-approval letter to shop with confidence.
        </p>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8">
          <h3 class="font-semibold text-blue-900 mb-3">Why get pre-approved?</h3>
          <ul class="text-left text-gray-700 space-y-2">
            <li class="flex items-center">
              <svg class="w-5 h-5 mr-3 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              Know exactly how much you can borrow
            </li>
            <li class="flex items-center">
              <svg class="w-5 h-5 mr-3 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              Sellers take you more seriously
            </li>
            <li class="flex items-center">
              <svg class="w-5 h-5 mr-3 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              Speed up the final mortgage process
            </li>
            <li class="flex items-center">
              <svg class="w-5 h-5 mr-3 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              Only takes 5-10 minutes
            </li>
          </ul>
        </div>
        <a href="/preapproval" 
           class="inline-block bg-orange-500 text-white px-10 py-4 rounded-full text-lg font-bold shadow-lg hover:bg-orange-600 transition transform hover:scale-105">
          Get Pre-Approved Now â†’
        </a>
      </div>
    </div>
  </div>
<% } else { %>
  <!-- Pre-Approved - Show Full Mortgage Application -->
  <div class="w-full bg-white p-8 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold text-blue-900 mb-4">Your Mortgage Application Tasks</h2>
        <p class="mb-6 text-gray-700">Complete the required tasks below to submit your mortgage application package.</p>
    
        <!-- Progress Bar -->
        <div class="w-full bg-gray-200 rounded-full h-4 mb-6">
          <div id="progressBar" class="bg-blue-600 h-4 rounded-full" style="width: 0%;"></div>
        </div>

        <!-- Document Upload Center -->
        <% if (typeof documents !== 'undefined' && documents && documents.length > 0) { %>
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-8 border border-blue-100">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold text-gray-800 flex items-center">
              <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
              </svg>
              Document Upload Center
            </h3>
            <div class="flex items-center space-x-4 text-sm">
              <span class="text-green-600 font-medium"><%= approvedDocs || 0 %> Approved</span>
              <span class="text-yellow-600 font-medium"><%= documents.filter(d => d.Status === 'Uploaded').length %> Pending Review</span>
              <span class="text-red-600 font-medium"><%= pendingDocs || 0 %> Needed</span>
            </div>
          </div>
          
          <p class="text-gray-600 mb-6">Upload your required documents here. We accept PDF, JPG, and PNG files up to 10MB each.</p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <% 
              const docsByCategory = {};
              documents.forEach(doc => {
                if (!docsByCategory[doc.DocumentCategory]) {
                  docsByCategory[doc.DocumentCategory] = [];
                }
                docsByCategory[doc.DocumentCategory].push(doc);
              });
              
              const categoryIcons = {
                'Income': '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>',
                'Assets': '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"/></svg>',
                'Identity': '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"/></svg>',
                'Property': '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>',
                'Other': '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>'
              };
            %>
            
            <% Object.keys(docsByCategory).forEach(function(category) { 
              const categoryDocs = docsByCategory[category];
              const requiredDocs = categoryDocs.filter(d => d.IsRequired);
              const completedDocs = categoryDocs.filter(d => d.Status === 'Approved' || d.Status === 'Uploaded');
            %>
              <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                <div class="flex items-center justify-between mb-3">
                  <h4 class="font-semibold text-gray-800 flex items-center">
                    <span class="text-blue-600 mr-2"><%- categoryIcons[category] || categoryIcons['Other'] %></span>
                    <%= category %>
                  </h4>
                  <span class="text-xs font-medium px-2 py-1 rounded-full <%= completedDocs.length === requiredDocs.length ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700' %>">
                    <%= completedDocs.length %>/<%= requiredDocs.length %>
                  </span>
                </div>
                
                <div class="space-y-2">
                  <% categoryDocs.forEach(function(doc) { 
                    let statusColor = 'text-gray-500';
                    let statusIcon = '';
                    if (doc.Status === 'Approved') {
                      statusColor = 'text-green-600';
                      statusIcon = '<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>';
                    } else if (doc.Status === 'Uploaded' || doc.Status === 'Under Review') {
                      statusColor = 'text-yellow-600';
                      statusIcon = '<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>';
                    } else if (doc.Status === 'Rejected') {
                      statusColor = 'text-red-600';
                      statusIcon = '<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>';
                    } else {
                      statusIcon = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/></svg>';
                    }
                  %>
                    <div class="flex items-center justify-between p-2 bg-gray-50 rounded text-sm doc-upload-item" data-doc-id="<%= doc.DocumentID %>">
                      <div class="flex items-center flex-1 min-w-0">
                        <span class="<%= statusColor %> mr-2 flex-shrink-0"><%- statusIcon %></span>
                        <span class="truncate <%= doc.IsRequired ? 'font-medium' : 'text-gray-600' %>">
                          <%= doc.DocumentType %>
                          <% if (!doc.IsRequired) { %><span class="text-xs text-gray-400">(Optional)</span><% } %>
                        </span>
                      </div>
                      <% if (doc.Status === 'Pending') { %>
                        <label class="cursor-pointer bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700 transition flex-shrink-0 ml-2">
                          Upload
                          <input type="file" class="hidden doc-file-input" data-doc-id="<%= doc.DocumentID %>" accept=".pdf,.jpg,.jpeg,.png">
                        </label>
                      <% } else if (doc.Status === 'Rejected') { %>
                        <label class="cursor-pointer bg-red-600 text-white text-xs px-3 py-1 rounded hover:bg-red-700 transition flex-shrink-0 ml-2">
                          Re-upload
                          <input type="file" class="hidden doc-file-input" data-doc-id="<%= doc.DocumentID %>" accept=".pdf,.jpg,.jpeg,.png">
                        </label>
                      <% } else { %>
                        <span class="text-xs <%= statusColor %> flex-shrink-0 ml-2"><%= doc.Status %></span>
                      <% } %>
                    </div>
                    <% if (doc.Status === 'Rejected' && doc.RejectionReason) { %>
                      <p class="text-xs text-red-600 ml-6"><%= doc.RejectionReason %></p>
                    <% } %>
                  <% }); %>
                </div>
              </div>
            <% }); %>
          </div>
          
          <!-- Upload Progress Indicator -->
          <div id="uploadProgress" class="hidden mt-4 p-4 bg-white rounded-lg border border-blue-200">
            <div class="flex items-center">
              <svg class="animate-spin h-5 w-5 text-blue-600 mr-3" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <span class="text-gray-700">Uploading document...</span>
            </div>
          </div>
        </div>
        <% } %>
    
        <!-- Task List -->
        <div class="space-y-4">
          <!-- Core Borrower Tasks -->
          <div>
            <h3 class="font-semibold text-xl text-gray-800 border-b pb-2 mb-4">Core Tasks (Required)</h3>
            <ul class="space-y-4">
    
              <!-- (All the tasks: Loan Application, Authorizations, Identification, Income Verification, Assets, etc.) -->
    
              <!-- Loan Application & Loan Details Task -->
<!-- Loan Application & Loan Details Task -->
<li class="task-item border rounded-lg transition" 
    data-task-id="loanApplication" 
    data-task-status="<%= (applicationData && applicationData.ApplicationStatus) ? applicationData.ApplicationStatus : (applicationData ? 'In Progress' : 'Not Started') %>">
  
  <!-- Task Header -->
  <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
    <div>
      <h4 class="font-bold text-gray-800 mb-1">Loan Application & Loan Details</h4>
      <p class="text-sm text-gray-600">Complete the URLA and set loan preferences.</p>
    </div>
    <div class="flex items-center space-x-2">
      <!-- Arrow Icon -->
      <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
           fill="currentColor" viewBox="0 0 20 20">
        <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
      </svg>
      <!-- Status Label -->
      <%
        let loanAppStatus = (applicationData && applicationData.ApplicationStatus) 
          ? applicationData.ApplicationStatus 
          : (applicationData ? 'In Progress' : 'Not Started');
        // Normalize "InReview" to "In Review"
        if (loanAppStatus === 'InReview') loanAppStatus = 'In Review';
        
        let loanAppStatusClass = 'bg-gray-200 text-gray-800';
        if (loanAppStatus === 'Completed') {
          loanAppStatusClass = 'bg-green-200 text-green-800';
        } else if (loanAppStatus === 'In Progress') {
          loanAppStatusClass = 'bg-yellow-200 text-yellow-800';
        } else if (loanAppStatus === 'In Review') {
          loanAppStatusClass = 'bg-blue-200 text-blue-800';
        }
      %>
      <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= loanAppStatusClass %>">
        <%= loanAppStatus %>
      </span>
    </div>
  </div>

  <!-- Loan Application Form (Hidden by Default) -->
  <div class="loan-application-form hidden p-4 border-t">

    <h5 class="text-lg font-bold text-blue-800 mb-4">Complete Your URLA &amp; Loan Preferences</h5>
    <p class="text-sm text-gray-700 mb-4">
      Please fill out all required fields. You can save your progress at any time.
    </p>

    <!-- URLA Section Tabs -->
    <div class="mb-6 flex flex-wrap gap-2">
      <button type="button" class="urla-tab px-4 py-2 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-300 transition" data-target="#urlaSection1">
        Section 1: Borrower Information
      </button>
      <button type="button" class="urla-tab px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition" data-target="#urlaSection2">
        Section 2: Assets &amp; Liabilities
      </button>
      <button type="button" class="urla-tab px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition" data-target="#urlaSection3">
        Section 3: Real Estate
      </button>
      <button type="button" class="urla-tab px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition" data-target="#urlaSection4">
        Section 4: Loan and Property
      </button>
      <button type="button" class="urla-tab px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition" data-target="#urlaSection5">
        Section 5: Declarations
      </button>
      <button type="button" class="urla-tab px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition" data-target="#urlaSection6">
        Section 6: Acknowledgments
      </button>
      <button type="button" class="urla-tab px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition" data-target="#urlaSection7">
        Section 7: Military Service
      </button>
      <button type="button" class="urla-tab px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition" data-target="#urlaSection8">
        Section 8: Demographics
      </button>
    </div>

    <!-- SECTION 1: Borrower Info (Shown by default) -->
<div id="urlaSection1" class="urla-section">
  <h6 class="font-semibold text-xl text-gray-800 mb-4">Section 1: Borrower Information</h6>

  <!-- 1a. Personal Information -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <!-- First Name -->
    <div class="flex flex-col">
      <label for="borrowerFirstName" class="block text-sm font-medium text-gray-700 mb-1">
        First Name <span class="text-red-500">*</span>
      </label>
      <input 
        type="text" 
        id="borrowerFirstName" 
        name="borrowerFirstName" 
        required
        placeholder="Enter your first name" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
        value="<%= applicationData ? applicationData.BorrowerFirstName : (preApprovalData && preApprovalData.step1 ? preApprovalData.step1.firstName : '') %>"
      >
    </div>

    <!-- Middle Name -->
    <div class="flex flex-col">
      <label for="borrowerMiddleName" class="block text-sm font-medium text-gray-700 mb-1">
        Middle Name
      </label>
      <input 
        type="text" 
        id="borrowerMiddleName" 
        name="borrowerMiddleName"
        placeholder="Enter your middle name (if any)" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
        value="<%= applicationData ? applicationData.BorrowerMiddleName : '' %>"
      >
    </div>

    <!-- Last Name -->
    <div class="flex flex-col">
      <label for="borrowerLastName" class="block text-sm font-medium text-gray-700 mb-1">
        Last Name <span class="text-red-500">*</span>
      </label>
      <input 
        type="text" 
        id="borrowerLastName" 
        name="borrowerLastName" 
        required
        placeholder="Enter your last name"
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
        value="<%= applicationData ? applicationData.BorrowerLastName : (preApprovalData && preApprovalData.step1 ? preApprovalData.step1.lastName : '') %>"
      >
    </div>

    <!-- Suffix -->
    <div class="flex flex-col">
      <label for="borrowerSuffix" class="block text-sm font-medium text-gray-700 mb-1">
        Suffix
      </label>
      <input 
        type="text" 
        id="borrowerSuffix" 
        name="borrowerSuffix"
        placeholder="Jr, Sr, III, etc." 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
        value="<%= applicationData ? applicationData.BorrowerSuffix : '' %>"
      >
    </div>

    <!-- Alternate Names -->
    <div class="flex flex-col">
      <label for="alternateNames" class="block text-sm font-medium text-gray-700 mb-1">
        Alternate Names
      </label>
      <input 
        type="text" 
        id="alternateNames" 
        name="alternateNames"
        placeholder="Other names you go by" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
        value="<%= applicationData ? applicationData.AlternateNames : '' %>"
      >
    </div>

    <!-- SSN -->
    <div class="flex flex-col">
      <label for="borrowerSSN" class="block text-sm font-medium text-gray-700 mb-1">
        Social Security Number <span class="text-red-500">*</span>
      </label>
      <input 
        type="text" 
        id="borrowerSSN" 
        name="borrowerSSN" 
        required 
        placeholder="XXX-XX-XXXX"
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
        value="<%= applicationData ? applicationData.BorrowerSSN : (preApprovalData && preApprovalData.step4 ? preApprovalData.step4.ssn : '') %>"
      >
    </div>

    <!-- DOB -->
    <div class="flex flex-col">
      <label for="borrowerDOB" class="block text-sm font-medium text-gray-700 mb-1">
        Date of Birth <span class="text-red-500">*</span>
      </label>
      <input 
        type="date" 
        id="borrowerDOB" 
        name="borrowerDOB" 
        required 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
        value="<%= applicationData && applicationData.BorrowerDOB 
                  ? applicationData.BorrowerDOB.toISOString().split('T')[0] 
                  : (preApprovalData && preApprovalData.step1 ? preApprovalData.step1.dateOfBirth : '') %>"
      >
    </div>

    <!-- Citizenship -->
    <div class="flex flex-col">
      <label for="citizenship" class="block text-sm font-medium text-gray-700 mb-1">
        Citizenship
      </label>
      <select 
        id="citizenship" 
        name="citizenship" 
        required
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800">
        <option value="">-- Select --</option>
        <option value="USCitizen" 
          <%= (applicationData && (applicationData.Citizenship === 'USCitizen' || applicationData.Citizenship === 'US Citizen')) ? 'selected' : '' %>>
          U.S. Citizen
        </option>
        <option value="PermanentResidentAlien"
          <%= (applicationData && (applicationData.Citizenship === 'PermanentResidentAlien' || applicationData.Citizenship === 'Permanent Resident Alien')) ? 'selected' : '' %>>
          Permanent Resident Alien
        </option>
        <option value="NonPermanentResidentAlien"
          <%= (applicationData && (applicationData.Citizenship === 'NonPermanentResidentAlien' || applicationData.Citizenship === 'Non-Permanent Resident Alien')) ? 'selected' : '' %>>
          Non-Permanent Resident Alien
        </option>
      </select>
    </div>

    <!-- Type of Credit -->
    <div class="flex flex-col">
      <label for="typeOfCredit" class="block text-sm font-medium text-gray-700 mb-1">
        Type of Credit
      </label>
      <select 
        id="typeOfCredit" 
        name="typeOfCredit" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800">
        <option value="">-- Select --</option>
        <option value="Individual" 
          <%= (applicationData && applicationData.TypeOfCredit === 'Individual') ? 'selected' : '' %>>
          Individual
        </option>
        <option value="Joint" 
          <%= (applicationData && applicationData.TypeOfCredit === 'Joint') ? 'selected' : '' %>>
          Joint
        </option>
      </select>
    </div>

    <!-- Number of Borrowers -->
    <div class="flex flex-col">
      <label for="numberOfBorrowers" class="block text-sm font-medium text-gray-700 mb-1">
        Total Number of Borrowers
      </label>
      <input 
        type="number" 
        id="numberOfBorrowers" 
        name="numberOfBorrowers" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800"
        value="<%= applicationData ? applicationData.NumberOfBorrowers : '' %>"
      >
    </div>

    <!-- Marital Status -->
    <div class="flex flex-col">
      <label for="maritalStatus" class="block text-sm font-medium text-gray-700 mb-1">
        Marital Status
      </label>
      <select 
        id="maritalStatus" 
        name="maritalStatus" 
        required
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800">
        <option value="">-- Select --</option>
        <option value="Married" <%= (applicationData && applicationData.MaritalStatus === 'Married') ? 'selected' : '' %>>Married</option>
        <option value="Separated" <%= (applicationData && applicationData.MaritalStatus === 'Separated') ? 'selected' : '' %>>Separated</option>
        <option value="Unmarried" <%= (applicationData && applicationData.MaritalStatus === 'Unmarried') ? 'selected' : '' %>>Unmarried</option>
        <option value="Unknown" <%= (applicationData && applicationData.MaritalStatus === 'Unknown') ? 'selected' : '' %>>Unknown</option>
      </select>
    </div>

    <!-- Dependents Number -->
    <div class="flex flex-col">
      <label for="dependentsNumber" class="block text-sm font-medium text-gray-700 mb-1">
        Number of Dependents
      </label>
      <input 
        type="number" 
        id="dependentsNumber" 
        name="dependentsNumber" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800"
        value="<%= applicationData ? applicationData.DependentsNumber : '' %>"
      >
    </div>

    <!-- Dependents Ages -->
    <div class="flex flex-col">
      <label for="dependentsAges" class="block text-sm font-medium text-gray-700 mb-1">
        Ages of Dependents
      </label>
      <input 
        type="text" 
        id="dependentsAges" 
        name="dependentsAges"
        placeholder="e.g. 5, 7, 10" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
        value="<%= applicationData ? applicationData.DependentsAges : '' %>"
      >
    </div>
  </div><!-- End 1a -->

  <!-- Contact Information -->
  <h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">Contact Information</h6>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="homePhone" class="block text-sm font-medium text-gray-700 mb-1">
        Home Phone
      </label>
      <input 
        type="text" 
        id="homePhone" 
        name="homePhone"
        placeholder="(555) 123-4567"
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400"
        value="<%= applicationData ? applicationData.HomePhone : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="cellPhone" class="block text-sm font-medium text-gray-700 mb-1">
        Cell Phone
      </label>
      <input 
        type="text" 
        id="cellPhone" 
        name="cellPhone"
        placeholder="(555) 987-6543"
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400"
        value="<%= applicationData ? applicationData.CellPhone : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="workPhone" class="block text-sm font-medium text-gray-700 mb-1">
        Work Phone
      </label>
      <input 
        type="text" 
        id="workPhone" 
        name="workPhone"
        placeholder="(555) 111-2222 Ext 123"
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400"
        value="<%= applicationData ? applicationData.WorkPhone : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="emailAddress" class="block text-sm font-medium text-gray-700 mb-1">
        Email
      </label>
      <input 
        type="email" 
        id="emailAddress"
        name="emailAddress"
        placeholder="you@example.com"
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400"
        value="<%= applicationData ? applicationData.EmailAddress : '' %>"
      >
    </div>
  </div><!-- End Contact Info -->

  <!-- Current Address -->
  <h6 class="font-semibold text-lg text-gray-800 mt-4 mb-2">Current Address</h6>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="currentAddressStreet" class="block text-sm font-medium text-gray-700 mb-1">
        Street
      </label>
      <input 
        type="text" 
        id="currentAddressStreet" 
        name="currentAddressStreet" 
        required
        class="mt-1 block w-full border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CurrentAddressStreet : (preApprovalData && preApprovalData.step3 ? preApprovalData.step3.streetAddress : '') %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="currentAddressCity" class="block text-sm font-medium text-gray-700 mb-1">
        City
      </label>
      <input 
        type="text" 
        id="currentAddressCity" 
        name="currentAddressCity"
        required
        class="mt-1 block w-full border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CurrentAddressCity : (preApprovalData && preApprovalData.step3 ? preApprovalData.step3.city : '') %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="currentAddressState" class="block text-sm font-medium text-gray-700 mb-1">
        State
      </label>
      <input 
        type="text" 
        id="currentAddressState" 
        name="currentAddressState" 
        required
        class="mt-1 block w-full border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CurrentAddressState : (preApprovalData && preApprovalData.step3 ? preApprovalData.step3.state : '') %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="currentAddressZip" class="block text-sm font-medium text-gray-700 mb-1">
        Zip Code
      </label>
      <input 
        type="text" 
        id="currentAddressZip" 
        name="currentAddressZip" 
        required
        class="mt-1 block w-full border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CurrentAddressZip : (preApprovalData && preApprovalData.step3 ? preApprovalData.step3.zipCode : '') %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="currentAddressYears" class="block text-sm font-medium text-gray-700 mb-1">
        Years at Address
      </label>
      <input 
        type="number" 
        id="currentAddressYears" 
        name="currentAddressYears" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CurrentAddressYears : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="currentAddressMonths" class="block text-sm font-medium text-gray-700 mb-1">
        Months at Address
      </label>
      <input 
        type="number" 
        id="currentAddressMonths" 
        name="currentAddressMonths" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CurrentAddressMonths : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="currentAddressHousing" class="block text-sm font-medium text-gray-700 mb-1">
        Housing
      </label>
      <select 
        id="currentAddressHousing" 
        name="currentAddressHousing"
        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800">
        <option value="">-- Select --</option>
        <option value="Own" <%= (applicationData && applicationData.CurrentAddressHousing === 'Own') ? 'selected' : '' %>>Own</option>
        <option value="Rent" <%= (applicationData && applicationData.CurrentAddressHousing === 'Rent') ? 'selected' : '' %>>Rent</option>
        <option value="NoPrimaryHousingExpense" <%= (applicationData && (applicationData.CurrentAddressHousing === 'NoPrimaryHousingExpense' || applicationData.CurrentAddressHousing === 'No primary housing expense')) ? 'selected' : '' %>>No primary housing expense</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="currentAddressRent" class="block text-sm font-medium text-gray-700 mb-1">
        Rent ($/month)
      </label>
      <input 
        type="number" 
        step="0.01" 
        id="currentAddressRent" 
        name="currentAddressRent" 
        class="mt-1 block w-full border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CurrentAddressRent : '' %>"
      >
    </div>
  </div><!-- End Current Address -->

  <!-- If at Current Address < 2 years, Former Address -->
  <h6 class="font-semibold text-lg text-gray-800 mb-2">
    If at Current Address LESS than 2 years, list Former Address
  </h6>
  
  <div class="flex items-center mb-3">
    <input 
      type="checkbox" 
      id="chkFormerAddress" 
      name="chkFormerAddress"
      class="mr-2"
      value="true"
      <%= (applicationData && applicationData.HasFormerAddress === false) ? 'checked' : '' %>
    >
    <label for="chkFormerAddress" class="text-sm text-gray-700">
      Does not apply
    </label>
  </div>
  <div 
    id="formerAddressFields" 
    class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4 
           <%= (applicationData && applicationData.HasFormerAddress === false) 
                ? 'hidden' 
                : '' 
           %>">
    <!-- Former Street -->
    <div class="flex flex-col">
      <label for="formerAddressStreet" class="block text-sm font-medium text-gray-700 mb-1">
        Former Street
      </label>
    <input 
      type="text" 
      id="formerAddressStreet" 
      name="formerAddressStreet" 
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FormerAddressStreet : '' %>"
    >
  </div>

  <!-- Former City -->
  <div class="flex flex-col">
    <label for="formerAddressCity" class="block text-sm font-medium text-gray-700 mb-1">
      Former City
    </label>
    <input 
      type="text" 
      id="formerAddressCity" 
      name="formerAddressCity"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FormerAddressCity : '' %>"
    >
  </div>

  <!-- Former State -->
  <div class="flex flex-col">
    <label for="formerAddressState" class="block text-sm font-medium text-gray-700 mb-1">
      Former State
    </label>
    <input 
      type="text" 
      id="formerAddressState" 
      name="formerAddressState"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FormerAddressState : '' %>"
    >
  </div>

  <!-- Former Zip -->
  <div class="flex flex-col">
    <label for="formerAddressZip" class="block text-sm font-medium text-gray-700 mb-1">
      Former Zip
    </label>
    <input 
      type="text" 
      id="formerAddressZip" 
      name="formerAddressZip"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FormerAddressZip : '' %>"
    >
  </div>

  <!-- Former Years -->
  <div class="flex flex-col">
    <label for="formerAddressYears" class="block text-sm font-medium text-gray-700 mb-1">
      Years at Former Address
    </label>
    <input 
      type="number" 
      id="formerAddressYears" 
      name="formerAddressYears"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FormerAddressYears : '' %>"
    >
  </div>

  <!-- Former Months -->
  <div class="flex flex-col">
    <label for="formerAddressMonths" class="block text-sm font-medium text-gray-700 mb-1">
      Months at Former Address
    </label>
    <input 
      type="number" 
      id="formerAddressMonths" 
      name="formerAddressMonths"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FormerAddressMonths : '' %>"
    >
  </div>

  <!-- Former Housing -->
  <div class="flex flex-col">
    <label for="formerAddressHousing" class="block text-sm font-medium text-gray-700 mb-1">
      Former Housing
    </label>
    <select 
      id="formerAddressHousing" 
      name="formerAddressHousing"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800"
    >
      <option value="">-- Select --</option>
      <option 
        value="Own" 
        <%= (applicationData && applicationData.FormerAddressHousing === 'Own') ? 'selected' : '' %>
      >Own</option>
      <option 
        value="Rent"
        <%= (applicationData && applicationData.FormerAddressHousing === 'Rent') ? 'selected' : '' %>
      >Rent</option>
      <option 
        value="No primary housing expense"
        <%= (applicationData && applicationData.FormerAddressHousing === 'No primary housing expense') ? 'selected' : '' %>
      >No primary housing expense</option>
    </select>
  </div>

  <!-- Former Rent -->
  <div class="flex flex-col">
    <label for="formerAddressRent" class="block text-sm font-medium text-gray-700 mb-1">
      Rent ($/month)
    </label>
    <input 
      type="number" 
      step="0.01" 
      id="formerAddressRent" 
      name="formerAddressRent" 
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FormerAddressRent : '' %>"
    >
  </div>
</div><!-- End Former Address Fields -->


  <!-- Mailing Address if different from Current -->
  <h6 class="font-semibold text-lg text-gray-800 mb-2">
    Mailing Address (if different from Current)
  </h6>
  <div class="flex items-center mb-3">
    <input 
      type="checkbox" 
      id="chkMailingAddress" 
      name="chkMailingAddress" 
      class="mr-2"
      value="true"
      <%= (applicationData && applicationData.HasMailingAddress === false) ? 'checked' : '' %>
    >
    <label for="chkMailingAddress" class="text-sm text-gray-700">
      Does not apply
    </label>
  </div>
  
  <div 
    id="mailingAddressFields"
    class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4 
           <%= (applicationData && applicationData.HasMailingAddress === false) ? 'hidden' : '' %>"
  >
    <!-- Mailing Street -->
    <div class="flex flex-col">
      <label for="mailingAddressStreet" class="block text-sm font-medium text-gray-700 mb-1">
        Mailing Street
      </label>
      <input 
        type="text" 
        id="mailingAddressStreet" 
        name="mailingAddressStreet"
        class="mt-1 block w-full border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MailingAddressStreet : '' %>"
      >
    </div>
  
  <!-- City -->
  <div class="flex flex-col">
    <label for="mailingAddressCity" class="block text-sm font-medium text-gray-700 mb-1">
      Mailing City
    </label>
    <input 
      type="text" 
      id="mailingAddressCity" 
      name="mailingAddressCity"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.MailingAddressCity : '' %>"
    >
  </div>

  <!-- State -->
  <div class="flex flex-col">
    <label for="mailingAddressState" class="block text-sm font-medium text-gray-700 mb-1">
      Mailing State
    </label>
    <input 
      type="text" 
      id="mailingAddressState" 
      name="mailingAddressState"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.MailingAddressState : '' %>"
    >
  </div>

  <!-- Zip -->
  <div class="flex flex-col">
    <label for="mailingAddressZip" class="block text-sm font-medium text-gray-700 mb-1">
      Mailing Zip
    </label>
    <input 
      type="text" 
      id="mailingAddressZip" 
      name="mailingAddressZip"
      class="mt-1 block w-full border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.MailingAddressZip : '' %>"
    >
  </div>
</div><!-- End Mailing Address Fields -->


<!-- 1b. Current Employment/Self-Employment and Income -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  1b. Current Employment/Self-Employment and Income
</h6>

<div class="flex items-center mb-3">
  <input 
    type="checkbox" 
    id="chkCurrentEmployment" 
    name="chkCurrentEmployment"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasCurrentEmployment === false) 
          ? 'checked' 
          : '' 
    %>
  >
  <label for="chkCurrentEmployment" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>
<div 
  id="currentEmploymentFields" 
  class="border border-gray-200 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasCurrentEmployment === false) 
              ? 'hidden' 
              : '' 
         %>"
>
  <!-- Employer or Business Name & Phone, etc. -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1" for="employerName">
        Employer or Business Name
      </label>
      <input
        type="text"
        id="employerName"
        name="employerName"
        class="border border-gray-300 rounded-md p-2"
        placeholder="Employer Name"
      >
    </div>
    <!-- Phone -->
    <div class="flex flex-col">
      <label for="employerPhone" class="text-sm font-medium text-gray-700 mb-1">
        Phone
      </label>
      <input
        type="text"
        id="employerPhone"
        name="employerPhone"
        class="border border-gray-300 rounded-md p-2"
        placeholder="(555) 123-4567"
      >
    </div>
  </div>

  <!-- Employer Address (Street, Unit, City, State, Zip, Country) -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="employerStreet" class="text-sm font-medium text-gray-700 mb-1">
        Street
      </label>
      <input
        type="text"
        id="employerStreet"
        name="employerStreet"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerUnit" class="text-sm font-medium text-gray-700 mb-1">
        Unit #
      </label>
      <input
        type="text"
        id="employerUnit"
        name="employerUnit"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerCity" class="text-sm font-medium text-gray-700 mb-1">
        City
      </label>
      <input
        type="text"
        id="employerCity"
        name="employerCity"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerState" class="text-sm font-medium text-gray-700 mb-1">
        State
      </label>
      <input
        type="text"
        id="employerState"
        name="employerState"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerZip" class="text-sm font-medium text-gray-700 mb-1">
        ZIP
      </label>
      <input
        type="text"
        id="employerZip"
        name="employerZip"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerCountry" class="text-sm font-medium text-gray-700 mb-1">
        Country
      </label>
      <input
        type="text"
        id="employerCountry"
        name="employerCountry"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
  </div>

  <!-- Position/Title, Start Date, Line of Work -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="positionTitle" class="text-sm font-medium text-gray-700 mb-1">
        Position or Title
      </label>
      <input
        type="text"
        id="positionTitle"
        name="positionTitle"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="startDate" class="text-sm font-medium text-gray-700 mb-1">
        Start Date (mm/dd/yyyy)
      </label>
      <input
        type="date"
        id="startDate"
        name="startDate"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="lineOfWorkYears" class="text-sm font-medium text-gray-700 mb-1">
        How long in this line of work?
      </label>
      <div class="flex space-x-2">
        <input
          type="number"
          id="lineOfWorkYears"
          name="lineOfWorkYears"
          class="border border-gray-300 rounded-md p-2 w-1/2"
          placeholder="Years"
        >
        <input
          type="number"
          id="lineOfWorkMonths"
          name="lineOfWorkMonths"
          class="border border-gray-300 rounded-md p-2 w-1/2"
          placeholder="Months"
        >
      </div>
    </div>
  </div>

  <!-- Family Employed & Ownership Share -->
  <div class="mb-4">
    <input type="checkbox" id="isFamilyEmployee" name="isFamilyEmployee" class="mr-2">
    <label for="isFamilyEmployee" class="text-sm text-gray-700">
      I am employed by a family member, property seller, real estate agent, or other party to the transaction
    </label>
  </div>
  <div class="mb-4">
    <p class="text-sm font-medium text-gray-700 mb-1">Check if you are the Business Owner or Self-Employed</p>
    <div class="flex items-center space-x-4">
      <label class="flex items-center text-sm text-gray-700">
        <input type="radio" name="ownershipShare" value="Less than 25" class="mr-1">
        I have an ownership share of less than 25%
      </label>
      <label class="flex items-center text-sm text-gray-700">
        <input type="radio" name="ownershipShare" value="25 or more" class="mr-1">
        I have an ownership share of 25% or more
      </label>
    </div>
  </div>

  <!-- Monthly Income (or Loss) if Self-Employed -->
  <div class="flex flex-col mb-4 w-full md:w-1/2">
    <label for="monthlyIncomeOrLoss" class="text-sm font-medium text-gray-700 mb-1">
      Monthly Income (or Loss)
    </label>
    <input
      type="number"
      step="0.01"
      id="monthlyIncomeOrLoss"
      name="monthlyIncomeOrLoss"
      class="border border-gray-300 rounded-md p-2"
      placeholder="If self-employed"
    >
  </div>

  <!-- Gross Monthly Income (Base, Overtime, Bonus, Commission, etc.) -->
  <h6 class="text-sm font-semibold text-gray-800 mb-2">Gross Monthly Income</h6>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Base -->
    <div class="flex flex-col">
      <label for="baseIncome" class="text-sm font-medium text-gray-700 mb-1">
        Base ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="baseIncome"
        name="baseIncome"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 5000"
      >
    </div>
    <!-- Overtime -->
    <div class="flex flex-col">
      <label for="overtimeIncome" class="text-sm font-medium text-gray-700 mb-1">
        Overtime ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="overtimeIncome"
        name="overtimeIncome"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 250"
      >
    </div>
    <!-- Bonus -->
    <div class="flex flex-col">
      <label for="bonusIncome" class="text-sm font-medium text-gray-700 mb-1">
        Bonus ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="bonusIncome"
        name="bonusIncome"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 100"
      >
    </div>
    <!-- Commission -->
    <div class="flex flex-col">
      <label for="commissionIncome" class="text-sm font-medium text-gray-700 mb-1">
        Commission ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="commissionIncome"
        name="commissionIncome"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 500"
      >
    </div>
    <!-- Military Entitlements -->
    <div class="flex flex-col">
      <label for="militaryEntitlements" class="text-sm font-medium text-gray-700 mb-1">
        Military Entitlements ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="militaryEntitlements"
        name="militaryEntitlements"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <!-- Other -->
    <div class="flex flex-col">
      <label for="otherIncome" class="text-sm font-medium text-gray-700 mb-1">
        Other ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="otherIncome"
        name="otherIncome"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
  </div>
</div><!-- #currentEmploymentFields -->

<!-- 1c. Additional Employment/Self-Employment and Income -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  1c. Additional Employment/Self-Employment and Income (IF APPLICABLE)
</h6>

<div class="flex items-center mb-3">
  <input 
    type="checkbox" 
    id="chkAdditionalEmployment" 
    name="chkAdditionalEmployment" 
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasAdditionalEmployment === false) 
          ? 'checked' 
          : '' 
    %>
  >
  <label for="chkAdditionalEmployment" class="text-sm text-gray-700">Does not apply</label>
</div>
<div 
  id="additionalEmploymentFields" 
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasAdditionalEmployment === false) 
              ? 'hidden' 
              : '' 
         %>"
>
  <!-- Additional Employer Fields -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1" for="employerNameAdditional1">
        Employer or Business Name
      </label>
      <input
        type="text"
        id="employerNameAdditional1"
        name="employerNameAdditional1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="Employer Name"
      >
    </div>
    <!-- Phone -->
    <div class="flex flex-col">
      <label for="employerPhoneAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Phone
      </label>
      <input
        type="text"
        id="employerPhoneAdditional1"
        name="employerPhoneAdditional1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="(555) 123-4567"
      >
    </div>
  </div>

  <!-- Employer Address (Street, Unit, City, State, Zip, Country) -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="employerStreetAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Street
      </label>
      <input
        type="text"
        id="employerStreetAdditional1"
        name="employerStreetAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerUnitAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Unit #
      </label>
      <input
        type="text"
        id="employerUnitAdditional1"
        name="employerUnitAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerCityAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        City
      </label>
      <input
        type="text"
        id="employerCityAdditional1"
        name="employerCityAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerStateAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        State
      </label>
      <input
        type="text"
        id="employerStateAdditional1"
        name="employerStateAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerZipAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        ZIP
      </label>
      <input
        type="text"
        id="employerZipAdditional1"
        name="employerZipAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerCountryAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Country
      </label>
      <input
        type="text"
        id="employerCountryAdditional1"
        name="employerCountryAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
  </div>

  <!-- Position/Title, Start Date, Line of Work -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="positionTitleAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Position or Title
      </label>
      <input
        type="text"
        id="positionTitleAdditional1"
        name="positionTitleAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="startDateAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Start Date (mm/dd/yyyy)
      </label>
      <input
        type="date"
        id="startDateAdditional1"
        name="startDateAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <div class="flex flex-col">
      <label for="lineOfWorkYearsAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        How long in this line of work?
      </label>
      <div class="flex space-x-2">
        <input
          type="number"
          id="lineOfWorkYearsAdditional1"
          name="lineOfWorkYearsAdditional1"
          class="border border-gray-300 rounded-md p-2 w-1/2"
          placeholder="Years"
        >
        <input
          type="number"
          id="lineOfWorkMonthsAdditional1"
          name="lineOfWorkMonthsAdditional1"
          class="border border-gray-300 rounded-md p-2 w-1/2"
          placeholder="Months"
        >
      </div>
    </div>
  </div>

  <!-- Family Employed & Ownership Share -->
  <div class="mb-4">
    <input 
      type="checkbox" 
      id="isFamilyEmployeeAdditional1" 
      name="isFamilyEmployeeAdditional1" 
      class="mr-2"
    >
    <label for="isFamilyEmployeeAdditional1" class="text-sm text-gray-700">
      I am employed by a family member, property seller, real estate agent, or other party to the transaction
    </label>
  </div>
  <div class="mb-4">
    <p class="text-sm font-medium text-gray-700 mb-1">
      Check if you are the Business Owner or Self-Employed
    </p>
    <div class="flex items-center space-x-4">
      <label class="flex items-center text-sm text-gray-700">
        <input 
          type="radio" 
          name="ownershipShareAdditional1" 
          value="Less than 25" 
          class="mr-1"
        >
        I have an ownership share of less than 25%
      </label>
      <label class="flex items-center text-sm text-gray-700">
        <input 
          type="radio" 
          name="ownershipShareAdditional1" 
          value="25 or more" 
          class="mr-1"
        >
        I have an ownership share of 25% or more
      </label>
    </div>
  </div>

  <!-- Monthly Income (or Loss) if Self-Employed -->
  <div class="flex flex-col mb-4 w-full md:w-1/2">
    <label for="monthlyIncomeOrLossAdditional1" class="text-sm font-medium text-gray-700 mb-1">
      Monthly Income (or Loss)
    </label>
    <input
      type="number"
      step="0.01"
      id="monthlyIncomeOrLossAdditional1"
      name="monthlyIncomeOrLossAdditional1"
      class="border border-gray-300 rounded-md p-2"
      placeholder="If self-employed"
    >
  </div>

  <!-- Gross Monthly Income (Base, Overtime, Bonus, Commission, etc.) -->
  <h6 class="text-sm font-semibold text-gray-800 mb-2">Gross Monthly Income</h6>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Base -->
    <div class="flex flex-col">
      <label for="baseIncomeAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Base ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="baseIncomeAdditional1"
        name="baseIncomeAdditional1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 5000"
      >
    </div>
    <!-- Overtime -->
    <div class="flex flex-col">
      <label for="overtimeIncomeAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Overtime ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="overtimeIncomeAdditional1"
        name="overtimeIncomeAdditional1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 250"
      >
    </div>
    <!-- Bonus -->
    <div class="flex flex-col">
      <label for="bonusIncomeAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Bonus ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="bonusIncomeAdditional1"
        name="bonusIncomeAdditional1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 100"
      >
    </div>
    <!-- Commission -->
    <div class="flex flex-col">
      <label for="commissionIncomeAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Commission ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="commissionIncomeAdditional1"
        name="commissionIncomeAdditional1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 500"
      >
    </div>
    <!-- Military Entitlements -->
    <div class="flex flex-col">
      <label for="militaryEntitlementsAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Military Entitlements ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="militaryEntitlementsAdditional1"
        name="militaryEntitlementsAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
    <!-- Other -->
    <div class="flex flex-col">
      <label for="otherIncomeAdditional1" class="text-sm font-medium text-gray-700 mb-1">
        Other ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="otherIncomeAdditional1"
        name="otherIncomeAdditional1"
        class="border border-gray-300 rounded-md p-2"
      >
    </div>
  </div>
</div> <!-- #additionalEmploymentFields -->

<!-- 1d. Previous Employment/Self-Employment and Income (IF APPLICABLE) -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  1d. Previous Employment/Self-Employment and Income (IF APPLICABLE)
</h6>
<p class="text-sm text-gray-600 mb-2">
  Provide at least 2 years of current and previous employment and income.
</p>

<div class="flex items-center mb-3">
  <!-- 
    Inverted Logic: 
    If HasPreviousEmploymentAdditional2 === false, we check this box, meaning "Does not apply".
  -->
  <input 
    type="checkbox" 
    id="chkPreviousEmploymentAdditional2"
    name="chkPreviousEmploymentAdditional2"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasPreviousEmploymentAdditional2 === false) ? 'checked' : '' %>
  >
  <label for="chkPreviousEmploymentAdditional2" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- 
  If HasPreviousEmploymentAdditional2 === false => hide these fields by default
  so user doesn't see them if they've indicated "does not apply."
-->
<div 
  id="previousEmploymentFieldsAdditional2" 
  class="border border-gray-300 rounded-md p-4
         <%= (applicationData && applicationData.HasPreviousEmploymentAdditional2 === false) 
              ? 'hidden' 
              : '' 
         %>"
>
  <!-- Employer or Business Name & Prev Gross Monthly Income -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="employerNameAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        Employer or Business Name
      </label>
      <input
        type="text"
        id="employerNameAdditional2"
        name="employerNameAdditional2"
        class="border border-gray-300 rounded-md p-2"
        placeholder="Employer Name"
        value="<%= applicationData ? applicationData.EmployerNameAdditional2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="prevGrossMonthlyIncomeAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        Previous Gross Monthly Income ($/month)
      </label>
      <input
        type="number"
        step="0.01"
        id="prevGrossMonthlyIncomeAdditional2"
        name="prevGrossMonthlyIncomeAdditional2"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 4500"
        value="<%= applicationData ? applicationData.PrevGrossMonthlyIncomeAdditional2 : '' %>"
      >
    </div>
  </div>

  <!-- Employer Address -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="employerStreetAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        Street
      </label>
      <input
        type="text"
        id="employerStreetAdditional2"
        name="employerStreetAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.EmployerStreetAdditional2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerUnitAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        Unit #
      </label>
      <input
        type="text"
        id="employerUnitAdditional2"
        name="employerUnitAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.EmployerUnitAdditional2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerCityAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        City
      </label>
      <input
        type="text"
        id="employerCityAdditional2"
        name="employerCityAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.EmployerCityAdditional2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerStateAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        State
      </label>
      <input
        type="text"
        id="employerStateAdditional2"
        name="employerStateAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.EmployerStateAdditional2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerZipAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        ZIP
      </label>
      <input
        type="text"
        id="employerZipAdditional2"
        name="employerZipAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.EmployerZipAdditional2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="employerCountryAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        Country
      </label>
      <input
        type="text"
        id="employerCountryAdditional2"
        name="employerCountryAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.EmployerCountryAdditional2 : '' %>"
      >
    </div>
  </div>

  <!-- Position or Title, Start Date, End Date -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="positionTitleAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        Position or Title
      </label>
      <input
        type="text"
        id="positionTitleAdditional2"
        name="positionTitleAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PositionTitleAdditional2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="startDateAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        Start Date (mm/dd/yyyy)
      </label>
      <input
        type="date"
        id="startDateAdditional2"
        name="startDateAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.StartDateAdditional2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="endDateAdditional2" class="text-sm font-medium text-gray-700 mb-1">
        End Date (mm/dd/yyyy)
      </label>
      <input
        type="date"
        id="endDateAdditional2"
        name="endDateAdditional2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.EndDateAdditional2 : '' %>"
      >
    </div>
  </div>

  <!-- Check if you were the Business Owner or Self-Employed -->
  <div class="flex items-center">
    <input 
      type="checkbox" 
      id="wasBusinessOwnerAdditional2" 
      name="wasBusinessOwnerAdditional2"
      class="mr-2"
      <%= (applicationData && applicationData.WasBusinessOwnerAdditional2) ? 'checked' : '' %>
    >
    <label for="wasBusinessOwnerAdditional2" class="text-sm text-gray-700">
      Check if you were the Business Owner or Self-Employed
    </label>
  </div>
</div><!-- #previousEmploymentFieldsAdditional2 -->

<!-- 1e. Income from Other Sources -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  1e. Income From Other Sources
</h6>
<div class="flex items-center mb-3">
  <!-- If user checks â€œDoes not apply,â€ we interpret that as HasOtherIncome = false -->
  <input 
    type="checkbox" 
    id="chkOtherIncome"
    name="chkOtherIncome"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasOtherIncome === false) ? 'checked' : '' %>
  >
  <label for="chkOtherIncome" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- 
  If HasOtherIncome === false => hide these fields by default 
  so user doesnâ€™t see them if they indicated â€œdoes not apply.â€ 
-->
<div 
  id="otherIncomeFields" 
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasOtherIncome === false) 
              ? 'hidden' 
              : '' 
         %>"
>
  <p class="text-sm text-gray-600 mb-2">
    Include income from other sources below. Choose from examples: Child Support, Alimony, Social Security, etc.
  </p>

  <!-- Weâ€™ll create up to 4 lines of â€œIncome Sourceâ€ & â€œMonthly Income.â€ -->
  <!-- Row #1 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="incomeSource1" class="text-sm font-medium text-gray-700 mb-1">
        Income Source
      </label>
      <select
        id="incomeSource1"
        name="incomeSource1"
        class="border border-gray-300 rounded-md p-2"
      >
        <option value="">-- Select --</option>
        <option value="Alimony" <%= (applicationData && applicationData.IncomeSource1 === 'Alimony') ? 'selected' : '' %>>Alimony</option>
        <option value="AutomobileAllowance" <%= (applicationData && applicationData.IncomeSource1 === 'AutomobileAllowance') ? 'selected' : '' %>>Automobile Allowance</option>
        <option value="BoarderIncome" <%= (applicationData && applicationData.IncomeSource1 === 'BoarderIncome') ? 'selected' : '' %>>Boarder Income</option>
        <option value="CapitalGains" <%= (applicationData && applicationData.IncomeSource1 === 'CapitalGains') ? 'selected' : '' %>>Capital Gains</option>
        <option value="ChildSupport" <%= (applicationData && applicationData.IncomeSource1 === 'ChildSupport') ? 'selected' : '' %>>Child Support</option>
        <option value="Disability" <%= (applicationData && applicationData.IncomeSource1 === 'Disability') ? 'selected' : '' %>>Disability</option>
        <option value="FosterCare" <%= (applicationData && applicationData.IncomeSource1 === 'FosterCare') ? 'selected' : '' %>>Foster Care</option>
        <option value="HousingOrParsonage" <%= (applicationData && applicationData.IncomeSource1 === 'HousingOrParsonage') ? 'selected' : '' %>>Housing or Parsonage</option>
        <option value="InterestDividends" <%= (applicationData && applicationData.IncomeSource1 === 'InterestDividends') ? 'selected' : '' %>>Interest/Dividends</option>
        <option value="MortgageCreditCertificate" <%= (applicationData && applicationData.IncomeSource1 === 'MortgageCreditCertificate') ? 'selected' : '' %>>Mortgage Credit Certificate</option>
        <option value="MortgageDifferentialPayments" <%= (applicationData && applicationData.IncomeSource1 === 'MortgageDifferentialPayments') ? 'selected' : '' %>>Mortgage Differential Payments</option>
        <option value="NotesReceivable" <%= (applicationData && applicationData.IncomeSource1 === 'NotesReceivable') ? 'selected' : '' %>>Notes Receivable</option>
        <option value="PublicAssistance" <%= (applicationData && applicationData.IncomeSource1 === 'PublicAssistance') ? 'selected' : '' %>>Public Assistance</option>
        <option value="Retirement" <%= (applicationData && applicationData.IncomeSource1 === 'Retirement') ? 'selected' : '' %>>Retirement/Pension</option>
        <option value="RoyaltyPayments" <%= (applicationData && applicationData.IncomeSource1 === 'RoyaltyPayments') ? 'selected' : '' %>>Royalty Payments</option>
        <option value="SeparateMaintenance" <%= (applicationData && applicationData.IncomeSource1 === 'SeparateMaintenance') ? 'selected' : '' %>>Separate Maintenance</option>
        <option value="SocialSecurity" <%= (applicationData && applicationData.IncomeSource1 === 'SocialSecurity') ? 'selected' : '' %>>Social Security</option>
        <option value="Trust" <%= (applicationData && applicationData.IncomeSource1 === 'Trust') ? 'selected' : '' %>>Trust</option>
        <option value="UnemploymentBenefits" <%= (applicationData && applicationData.IncomeSource1 === 'UnemploymentBenefits') ? 'selected' : '' %>>Unemployment Benefits</option>
        <option value="VACompensation" <%= (applicationData && applicationData.IncomeSource1 === 'VACompensation') ? 'selected' : '' %>>VA Compensation</option>
        <option value="Other" <%= (applicationData && applicationData.IncomeSource1 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyIncome1" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Income ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyIncome1"
        name="monthlyIncome1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 300"
        value="<%= applicationData ? applicationData.MonthlyIncome1 : '' %>"
      >
    </div>
  </div>

  <!-- Row #2 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="incomeSource2" class="text-sm font-medium text-gray-700 mb-1">
        Income Source
      </label>
      <select
        id="incomeSource2"
        name="incomeSource2"
        class="border border-gray-300 rounded-md p-2"
      >
        <option value="">-- Select --</option>
        <option value="Alimony" <%= (applicationData && applicationData.IncomeSource2 === 'Alimony') ? 'selected' : '' %>>Alimony</option>
        <option value="AutomobileAllowance" <%= (applicationData && applicationData.IncomeSource2 === 'AutomobileAllowance') ? 'selected' : '' %>>Automobile Allowance</option>
        <option value="BoarderIncome" <%= (applicationData && applicationData.IncomeSource2 === 'BoarderIncome') ? 'selected' : '' %>>Boarder Income</option>
        <option value="CapitalGains" <%= (applicationData && applicationData.IncomeSource2 === 'CapitalGains') ? 'selected' : '' %>>Capital Gains</option>
        <option value="ChildSupport" <%= (applicationData && applicationData.IncomeSource2 === 'ChildSupport') ? 'selected' : '' %>>Child Support</option>
        <option value="Disability" <%= (applicationData && applicationData.IncomeSource2 === 'Disability') ? 'selected' : '' %>>Disability</option>
        <option value="FosterCare" <%= (applicationData && applicationData.IncomeSource2 === 'FosterCare') ? 'selected' : '' %>>Foster Care</option>
        <option value="HousingOrParsonage" <%= (applicationData && applicationData.IncomeSource2 === 'HousingOrParsonage') ? 'selected' : '' %>>Housing or Parsonage</option>
        <option value="InterestDividends" <%= (applicationData && applicationData.IncomeSource2 === 'InterestDividends') ? 'selected' : '' %>>Interest/Dividends</option>
        <option value="MortgageCreditCertificate" <%= (applicationData && applicationData.IncomeSource2 === 'MortgageCreditCertificate') ? 'selected' : '' %>>Mortgage Credit Certificate</option>
        <option value="MortgageDifferentialPayments" <%= (applicationData && applicationData.IncomeSource2 === 'MortgageDifferentialPayments') ? 'selected' : '' %>>Mortgage Differential Payments</option>
        <option value="NotesReceivable" <%= (applicationData && applicationData.IncomeSource2 === 'NotesReceivable') ? 'selected' : '' %>>Notes Receivable</option>
        <option value="PublicAssistance" <%= (applicationData && applicationData.IncomeSource2 === 'PublicAssistance') ? 'selected' : '' %>>Public Assistance</option>
        <option value="Retirement" <%= (applicationData && applicationData.IncomeSource2 === 'Retirement') ? 'selected' : '' %>>Retirement/Pension</option>
        <option value="RoyaltyPayments" <%= (applicationData && applicationData.IncomeSource2 === 'RoyaltyPayments') ? 'selected' : '' %>>Royalty Payments</option>
        <option value="SeparateMaintenance" <%= (applicationData && applicationData.IncomeSource2 === 'SeparateMaintenance') ? 'selected' : '' %>>Separate Maintenance</option>
        <option value="SocialSecurity" <%= (applicationData && applicationData.IncomeSource2 === 'SocialSecurity') ? 'selected' : '' %>>Social Security</option>
        <option value="Trust" <%= (applicationData && applicationData.IncomeSource2 === 'Trust') ? 'selected' : '' %>>Trust</option>
        <option value="UnemploymentBenefits" <%= (applicationData && applicationData.IncomeSource2 === 'UnemploymentBenefits') ? 'selected' : '' %>>Unemployment Benefits</option>
        <option value="VACompensation" <%= (applicationData && applicationData.IncomeSource2 === 'VACompensation') ? 'selected' : '' %>>VA Compensation</option>
        <option value="Other" <%= (applicationData && applicationData.IncomeSource2 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyIncome2" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Income ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyIncome2"
        name="monthlyIncome2"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 500"
        value="<%= applicationData ? applicationData.MonthlyIncome2 : '' %>"
      >
    </div>
  </div>

  <!-- Row #3 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="incomeSource3" class="text-sm font-medium text-gray-700 mb-1">
        Income Source
      </label>
      <select
        id="incomeSource3"
        name="incomeSource3"
        class="border border-gray-300 rounded-md p-2"
      >
        <option value="">-- Select --</option>
        <option value="Alimony" <%= (applicationData && applicationData.IncomeSource3 === 'Alimony') ? 'selected' : '' %>>Alimony</option>
        <option value="AutomobileAllowance" <%= (applicationData && applicationData.IncomeSource3 === 'AutomobileAllowance') ? 'selected' : '' %>>Automobile Allowance</option>
        <option value="BoarderIncome" <%= (applicationData && applicationData.IncomeSource3 === 'BoarderIncome') ? 'selected' : '' %>>Boarder Income</option>
        <option value="CapitalGains" <%= (applicationData && applicationData.IncomeSource3 === 'CapitalGains') ? 'selected' : '' %>>Capital Gains</option>
        <option value="ChildSupport" <%= (applicationData && applicationData.IncomeSource3 === 'ChildSupport') ? 'selected' : '' %>>Child Support</option>
        <option value="Disability" <%= (applicationData && applicationData.IncomeSource3 === 'Disability') ? 'selected' : '' %>>Disability</option>
        <option value="FosterCare" <%= (applicationData && applicationData.IncomeSource3 === 'FosterCare') ? 'selected' : '' %>>Foster Care</option>
        <option value="HousingOrParsonage" <%= (applicationData && applicationData.IncomeSource3 === 'HousingOrParsonage') ? 'selected' : '' %>>Housing or Parsonage</option>
        <option value="InterestDividends" <%= (applicationData && applicationData.IncomeSource3 === 'InterestDividends') ? 'selected' : '' %>>Interest/Dividends</option>
        <option value="MortgageCreditCertificate" <%= (applicationData && applicationData.IncomeSource3 === 'MortgageCreditCertificate') ? 'selected' : '' %>>Mortgage Credit Certificate</option>
        <option value="MortgageDifferentialPayments" <%= (applicationData && applicationData.IncomeSource3 === 'MortgageDifferentialPayments') ? 'selected' : '' %>>Mortgage Differential Payments</option>
        <option value="NotesReceivable" <%= (applicationData && applicationData.IncomeSource3 === 'NotesReceivable') ? 'selected' : '' %>>Notes Receivable</option>
        <option value="PublicAssistance" <%= (applicationData && applicationData.IncomeSource3 === 'PublicAssistance') ? 'selected' : '' %>>Public Assistance</option>
        <option value="Retirement" <%= (applicationData && applicationData.IncomeSource3 === 'Retirement') ? 'selected' : '' %>>Retirement/Pension</option>
        <option value="RoyaltyPayments" <%= (applicationData && applicationData.IncomeSource3 === 'RoyaltyPayments') ? 'selected' : '' %>>Royalty Payments</option>
        <option value="SeparateMaintenance" <%= (applicationData && applicationData.IncomeSource3 === 'SeparateMaintenance') ? 'selected' : '' %>>Separate Maintenance</option>
        <option value="SocialSecurity" <%= (applicationData && applicationData.IncomeSource3 === 'SocialSecurity') ? 'selected' : '' %>>Social Security</option>
        <option value="Trust" <%= (applicationData && applicationData.IncomeSource3 === 'Trust') ? 'selected' : '' %>>Trust</option>
        <option value="UnemploymentBenefits" <%= (applicationData && applicationData.IncomeSource3 === 'UnemploymentBenefits') ? 'selected' : '' %>>Unemployment Benefits</option>
        <option value="VACompensation" <%= (applicationData && applicationData.IncomeSource3 === 'VACompensation') ? 'selected' : '' %>>VA Compensation</option>
        <option value="Other" <%= (applicationData && applicationData.IncomeSource3 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyIncome3" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Income ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyIncome3"
        name="monthlyIncome3"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 200"
        value="<%= applicationData ? applicationData.MonthlyIncome3 : '' %>"
      >
    </div>
  </div>

  <!-- Row #4 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="flex flex-col">
      <label for="incomeSource4" class="text-sm font-medium text-gray-700 mb-1">
        Income Source
      </label>
      <select
        id="incomeSource4"
        name="incomeSource4"
        class="border border-gray-300 rounded-md p-2"
      >
        <option value="">-- Select --</option>
        <option value="Alimony" <%= (applicationData && applicationData.IncomeSource4 === 'Alimony') ? 'selected' : '' %>>Alimony</option>
        <option value="AutomobileAllowance" <%= (applicationData && applicationData.IncomeSource4 === 'AutomobileAllowance') ? 'selected' : '' %>>Automobile Allowance</option>
        <option value="BoarderIncome" <%= (applicationData && applicationData.IncomeSource4 === 'BoarderIncome') ? 'selected' : '' %>>Boarder Income</option>
        <option value="CapitalGains" <%= (applicationData && applicationData.IncomeSource4 === 'CapitalGains') ? 'selected' : '' %>>Capital Gains</option>
        <option value="ChildSupport" <%= (applicationData && applicationData.IncomeSource4 === 'ChildSupport') ? 'selected' : '' %>>Child Support</option>
        <option value="Disability" <%= (applicationData && applicationData.IncomeSource4 === 'Disability') ? 'selected' : '' %>>Disability</option>
        <option value="FosterCare" <%= (applicationData && applicationData.IncomeSource4 === 'FosterCare') ? 'selected' : '' %>>Foster Care</option>
        <option value="HousingOrParsonage" <%= (applicationData && applicationData.IncomeSource4 === 'HousingOrParsonage') ? 'selected' : '' %>>Housing or Parsonage</option>
        <option value="InterestDividends" <%= (applicationData && applicationData.IncomeSource4 === 'InterestDividends') ? 'selected' : '' %>>Interest/Dividends</option>
        <option value="MortgageCreditCertificate" <%= (applicationData && applicationData.IncomeSource4 === 'MortgageCreditCertificate') ? 'selected' : '' %>>Mortgage Credit Certificate</option>
        <option value="MortgageDifferentialPayments" <%= (applicationData && applicationData.IncomeSource4 === 'MortgageDifferentialPayments') ? 'selected' : '' %>>Mortgage Differential Payments</option>
        <option value="NotesReceivable" <%= (applicationData && applicationData.IncomeSource4 === 'NotesReceivable') ? 'selected' : '' %>>Notes Receivable</option>
        <option value="PublicAssistance" <%= (applicationData && applicationData.IncomeSource4 === 'PublicAssistance') ? 'selected' : '' %>>Public Assistance</option>
        <option value="Retirement" <%= (applicationData && applicationData.IncomeSource4 === 'Retirement') ? 'selected' : '' %>>Retirement/Pension</option>
        <option value="RoyaltyPayments" <%= (applicationData && applicationData.IncomeSource4 === 'RoyaltyPayments') ? 'selected' : '' %>>Royalty Payments</option>
        <option value="SeparateMaintenance" <%= (applicationData && applicationData.IncomeSource4 === 'SeparateMaintenance') ? 'selected' : '' %>>Separate Maintenance</option>
        <option value="SocialSecurity" <%= (applicationData && applicationData.IncomeSource4 === 'SocialSecurity') ? 'selected' : '' %>>Social Security</option>
        <option value="Trust" <%= (applicationData && applicationData.IncomeSource4 === 'Trust') ? 'selected' : '' %>>Trust</option>
        <option value="UnemploymentBenefits" <%= (applicationData && applicationData.IncomeSource4 === 'UnemploymentBenefits') ? 'selected' : '' %>>Unemployment Benefits</option>
        <option value="VACompensation" <%= (applicationData && applicationData.IncomeSource4 === 'VACompensation') ? 'selected' : '' %>>VA Compensation</option>
        <option value="Other" <%= (applicationData && applicationData.IncomeSource4 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyIncome4" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Income ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyIncome4"
        name="monthlyIncome4"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 150"
        value="<%= applicationData ? applicationData.MonthlyIncome4 : '' %>"
      >
    </div>
  </div>
</div>



</div>

    <!-- Section 2: Financial Information-- Assets & Liabilities -->
    <div id="urlaSection2" class="urla-section hidden">
      <h6 class="font-semibold text-xl text-gray-800 mb-4">Section 2: Financial Information â€“ Assets &amp; Liabilities</h6>
      
      <!-- 2a. Assets â€“ Bank Accounts, Retirement, and Other Accounts You Have -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  2a. Assets â€“ Bank Accounts, Retirement, and Other Accounts You Have
</h6>
<p class="text-sm text-gray-600 mb-4">
  Include all accounts below. Under Account Type, choose from checking, savings, 
  money market, stocks, retirement (401k, IRA), etc.
</p>

<!-- Row #1 -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-4">
  <div class="flex flex-col">
    <label for="accountType1" class="text-sm font-medium text-gray-700 mb-1">
      Account Type
    </label>
    <select
      id="accountType1"
      name="accountType1"
      class="border border-gray-300 rounded-md p-2"
    >
      <option value="">-- Select --</option>
      <option value="Checking" <%= (applicationData && applicationData.AccountType1 === 'Checking') ? 'selected' : '' %>>Checking</option>
      <option value="Savings" <%= (applicationData && applicationData.AccountType1 === 'Savings') ? 'selected' : '' %>>Savings</option>
      <option value="MoneyMarket" <%= (applicationData && applicationData.AccountType1 === 'MoneyMarket') ? 'selected' : '' %>>Money Market</option>
      <option value="CertificateOfDeposit" <%= (applicationData && applicationData.AccountType1 === 'CertificateOfDeposit') ? 'selected' : '' %>>Certificate of Deposit (CD)</option>
      <option value="MutualFund" <%= (applicationData && applicationData.AccountType1 === 'MutualFund') ? 'selected' : '' %>>Mutual Fund</option>
      <option value="Stocks" <%= (applicationData && applicationData.AccountType1 === 'Stocks') ? 'selected' : '' %>>Stocks</option>
      <option value="StockOptions" <%= (applicationData && applicationData.AccountType1 === 'StockOptions') ? 'selected' : '' %>>Stock Options</option>
      <option value="Bonds" <%= (applicationData && applicationData.AccountType1 === 'Bonds') ? 'selected' : '' %>>Bonds</option>
      <option value="Retirement" <%= (applicationData && applicationData.AccountType1 === 'Retirement') ? 'selected' : '' %>>Retirement (401k/IRA)
      </option>
      <option value="BridgeLoanProceeds" <%= (applicationData && applicationData.AccountType1 === 'BridgeLoanProceeds') ? 'selected' : '' %>>Bridge Loan Proceeds</option>
      <option value="IndividualDevelopmentAccount" <%= (applicationData && applicationData.AccountType1 === 'IndividualDevelopmentAccount') ? 'selected' : '' %>>Individual Development Account</option>
      <option value="TrustAccount" <%= (applicationData && applicationData.AccountType1 === 'TrustAccount') ? 'selected' : '' %>>Trust Account</option>
      <option value="CashValueLifeInsurance" <%= (applicationData && applicationData.AccountType1 === 'CashValueLifeInsurance') ? 'selected' : '' %>>Cash Value Life Insurance</option>
    </select>
  </div>
  <div class="flex flex-col">
    <label for="financialInstitution1" class="text-sm font-medium text-gray-700 mb-1">
      Financial Institution
    </label>
    <input
      type="text"
      id="financialInstitution1"
      name="financialInstitution1"
      class="border border-gray-300 rounded-md p-2"
      placeholder="e.g. Bank of America"
      value="<%= applicationData ? applicationData.FinancialInstitution1 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="accountNumber1" class="text-sm font-medium text-gray-700 mb-1">
      Account Number
    </label>
    <input
      type="text"
      id="accountNumber1"
      name="accountNumber1"
      class="border border-gray-300 rounded-md p-2"
      placeholder="XXXXXXX"
      value="<%= applicationData ? applicationData.AccountNumber1 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="cashValue1" class="text-sm font-medium text-gray-700 mb-1">
      Cash or Market Value ($)
    </label>
    <input
      type="number"
      step="0.01"
      id="cashValue1"
      name="cashValue1"
      class="border border-gray-300 rounded-md p-2"
      placeholder="e.g. 5000"
      value="<%= applicationData ? applicationData.CashValue1 : '' %>"
    >
  </div>
</div>

<!-- Row #2 -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-4">
  <div class="flex flex-col">
    <label for="accountType2" class="text-sm font-medium text-gray-700 mb-1">
      Account Type
    </label>
    <select
      id="accountType2"
      name="accountType2"
      class="border border-gray-300 rounded-md p-2"
    >
      <option value="">-- Select --</option>
      <option value="Checking" <%= (applicationData && applicationData.AccountType2 === 'Checking') ? 'selected' : '' %>>Checking</option>
      <option value="Savings" <%= (applicationData && applicationData.AccountType2 === 'Savings') ? 'selected' : '' %>>Savings</option>
      <option value="MoneyMarket" <%= (applicationData && applicationData.AccountType2 === 'MoneyMarket') ? 'selected' : '' %>>Money Market</option>
      <option value="CertificateOfDeposit" <%= (applicationData && applicationData.AccountType2 === 'CertificateOfDeposit') ? 'selected' : '' %>>Certificate of Deposit (CD)</option>
      <option value="MutualFund" <%= (applicationData && applicationData.AccountType2 === 'MutualFund') ? 'selected' : '' %>>Mutual Fund</option>
      <option value="Stocks" <%= (applicationData && applicationData.AccountType2 === 'Stocks') ? 'selected' : '' %>>Stocks</option>
      <option value="StockOptions" <%= (applicationData && applicationData.AccountType2 === 'StockOptions') ? 'selected' : '' %>>Stock Options</option>
      <option value="Bonds" <%= (applicationData && applicationData.AccountType2 === 'Bonds') ? 'selected' : '' %>>Bonds</option>
      <option value="Retirement" <%= (applicationData && applicationData.AccountType2 === 'Retirement') ? 'selected' : '' %>>Retirement (401k/IRA)</option>
      <option value="BridgeLoanProceeds" <%= (applicationData && applicationData.AccountType2 === 'BridgeLoanProceeds') ? 'selected' : '' %>>Bridge Loan Proceeds</option>
      <option value="IndividualDevelopmentAccount" <%= (applicationData && applicationData.AccountType2 === 'IndividualDevelopmentAccount') ? 'selected' : '' %>>Individual Development Account</option>
      <option value="TrustAccount" <%= (applicationData && applicationData.AccountType2 === 'TrustAccount') ? 'selected' : '' %>>Trust Account</option>
      <option value="CashValueLifeInsurance" <%= (applicationData && applicationData.AccountType2 === 'CashValueLifeInsurance') ? 'selected' : '' %>>Cash Value Life Insurance</option>
    </select>
  </div>
  <div class="flex flex-col">
    <label for="financialInstitution2" class="text-sm font-medium text-gray-700 mb-1">
      Financial Institution
    </label>
    <input
      type="text"
      id="financialInstitution2"
      name="financialInstitution2"
      class="border border-gray-300 rounded-md p-2"
      placeholder="e.g. Wells Fargo"
      value="<%= applicationData ? applicationData.FinancialInstitution2 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="accountNumber2" class="text-sm font-medium text-gray-700 mb-1">
      Account Number
    </label>
    <input
      type="text"
      id="accountNumber2"
      name="accountNumber2"
      class="border border-gray-300 rounded-md p-2"
      placeholder="XXXXXXX"
      value="<%= applicationData ? applicationData.AccountNumber2 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="cashValue2" class="text-sm font-medium text-gray-700 mb-1">
      Cash or Market Value ($)
    </label>
    <input
      type="number"
      step="0.01"
      id="cashValue2"
      name="cashValue2"
      class="border border-gray-300 rounded-md p-2"
      placeholder="e.g. 10000"
      value="<%= applicationData ? applicationData.CashValue2 : '' %>"
    >
  </div>
</div>

<!-- Similarly Rows #3, #4, #5 -->
<!-- Row #3 -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-4">
  <div class="flex flex-col">
    <label for="accountType3" class="text-sm font-medium text-gray-700 mb-1">
      Account Type
    </label>
    <select
      id="accountType3"
      name="accountType3"
      class="border border-gray-300 rounded-md p-2"
    >
      <option value="">-- Select --</option>
      <option value="Checking" <%= (applicationData && applicationData.AccountType3 === 'Checking') ? 'selected' : '' %>>Checking</option>
      <option value="Savings" <%= (applicationData && applicationData.AccountType3 === 'Savings') ? 'selected' : '' %>>Savings</option>
      <option value="MoneyMarket" <%= (applicationData && applicationData.AccountType3 === 'MoneyMarket') ? 'selected' : '' %>>Money Market</option>
      <option value="CertificateOfDeposit" <%= (applicationData && applicationData.AccountType3 === 'CertificateOfDeposit') ? 'selected' : '' %>>Certificate of Deposit (CD)</option>
      <option value="MutualFund" <%= (applicationData && applicationData.AccountType3 === 'MutualFund') ? 'selected' : '' %>>Mutual Fund</option>
      <option value="Stocks" <%= (applicationData && applicationData.AccountType3 === 'Stocks') ? 'selected' : '' %>>Stocks</option>
      <option value="StockOptions" <%= (applicationData && applicationData.AccountType3 === 'StockOptions') ? 'selected' : '' %>>Stock Options</option>
      <option value="Bonds" <%= (applicationData && applicationData.AccountType3 === 'Bonds') ? 'selected' : '' %>>Bonds</option>
      <option value="Retirement" <%= (applicationData && applicationData.AccountType3 === 'Retirement') ? 'selected' : '' %>>Retirement (401k/IRA)</option>
      <option value="BridgeLoanProceeds" <%= (applicationData && applicationData.AccountType3 === 'BridgeLoanProceeds') ? 'selected' : '' %>>Bridge Loan Proceeds</option>
      <option value="IndividualDevelopmentAccount" <%= (applicationData && applicationData.AccountType3 === 'IndividualDevelopmentAccount') ? 'selected' : '' %>>Individual Development Account</option>
      <option value="TrustAccount" <%= (applicationData && applicationData.AccountType3 === 'TrustAccount') ? 'selected' : '' %>>Trust Account</option>
      <option value="CashValueLifeInsurance" <%= (applicationData && applicationData.AccountType3 === 'CashValueLifeInsurance') ? 'selected' : '' %>>Cash Value Life Insurance</option>
    </select>
  </div>
  <div class="flex flex-col">
    <label for="financialInstitution3" class="text-sm font-medium text-gray-700 mb-1">
      Financial Institution
    </label>
    <input
      type="text"
      id="financialInstitution3"
      name="financialInstitution3"
      class="border border-gray-300 rounded-md p-2"
      placeholder="Fidelity"
      value="<%= applicationData ? applicationData.FinancialInstitution3 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="accountNumber3" class="text-sm font-medium text-gray-700 mb-1">
      Account Number
    </label>
    <input
      type="text"
      id="accountNumber3"
      name="accountNumber3"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.AccountNumber3 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="cashValue3" class="text-sm font-medium text-gray-700 mb-1">
      Cash or Market Value ($)
    </label>
    <input
      type="number"
      step="0.01"
      id="cashValue3"
      name="cashValue3"
      class="border border-gray-300 rounded-md p-2"
      placeholder="e.g. 25000"
      value="<%= applicationData ? applicationData.CashValue3 : '' %>"
    >
  </div>
</div>

<!-- Row #4 -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-4">
  <div class="flex flex-col">
    <label for="accountType4" class="text-sm font-medium text-gray-700 mb-1">
      Account Type
    </label>
    <select
      id="accountType4"
      name="accountType4"
      class="border border-gray-300 rounded-md p-2"
    >
      <option value="">-- Select --</option>
      <option value="Checking" <%= (applicationData && applicationData.AccountType4 === 'Checking') ? 'selected' : '' %>>Checking</option>
      <option value="Savings" <%= (applicationData && applicationData.AccountType4 === 'Savings') ? 'selected' : '' %>>Savings</option>
      <option value="MoneyMarket" <%= (applicationData && applicationData.AccountType4 === 'MoneyMarket') ? 'selected' : '' %>>Money Market</option>
      <option value="CertificateOfDeposit" <%= (applicationData && applicationData.AccountType4 === 'CertificateOfDeposit') ? 'selected' : '' %>>Certificate of Deposit (CD)</option>
      <option value="MutualFund" <%= (applicationData && applicationData.AccountType4 === 'MutualFund') ? 'selected' : '' %>>Mutual Fund</option>
      <option value="Stocks" <%= (applicationData && applicationData.AccountType4 === 'Stocks') ? 'selected' : '' %>>Stocks</option>
      <option value="StockOptions" <%= (applicationData && applicationData.AccountType4 === 'StockOptions') ? 'selected' : '' %>>Stock Options</option>
      <option value="Bonds" <%= (applicationData && applicationData.AccountType4 === 'Bonds') ? 'selected' : '' %>>Bonds</option>
      <option value="Retirement" <%= (applicationData && applicationData.AccountType4 === 'Retirement') ? 'selected' : '' %>>Retirement (401k/IRA)</option>
      <option value="BridgeLoanProceeds" <%= (applicationData && applicationData.AccountType4 === 'BridgeLoanProceeds') ? 'selected' : '' %>>Bridge Loan Proceeds</option>
      <option value="IndividualDevelopmentAccount" <%= (applicationData && applicationData.AccountType4 === 'IndividualDevelopmentAccount') ? 'selected' : '' %>>Individual Development Account</option>
      <option value="TrustAccount" <%= (applicationData && applicationData.AccountType4 === 'TrustAccount') ? 'selected' : '' %>>Trust Account</option>
      <option value="CashValueLifeInsurance" <%= (applicationData && applicationData.AccountType4 === 'CashValueLifeInsurance') ? 'selected' : '' %>>Cash Value Life Insurance</option>
    </select>
  </div>
  <div class="flex flex-col">
    <label for="financialInstitution4" class="text-sm font-medium text-gray-700 mb-1">
      Financial Institution
    </label>
    <input
      type="text"
      id="financialInstitution4"
      name="financialInstitution4"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FinancialInstitution4 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="accountNumber4" class="text-sm font-medium text-gray-700 mb-1">
      Account Number
    </label>
    <input
      type="text"
      id="accountNumber4"
      name="accountNumber4"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.AccountNumber4 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="cashValue4" class="text-sm font-medium text-gray-700 mb-1">
      Cash or Market Value ($)
    </label>
    <input
      type="number"
      step="0.01"
      id="cashValue4"
      name="cashValue4"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.CashValue4 : '' %>"
    >
  </div>
</div>

<!-- Row #5 -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-4">
  <div class="flex flex-col">
    <label for="accountType5" class="text-sm font-medium text-gray-700 mb-1">
      Account Type
    </label>
    <select
      id="accountType5"
      name="accountType5"
      class="border border-gray-300 rounded-md p-2"
    >
      <option value="">-- Select --</option>
      <option value="Checking" <%= (applicationData && applicationData.AccountType5 === 'Checking') ? 'selected' : '' %>>Checking</option>
      <option value="Savings" <%= (applicationData && applicationData.AccountType5 === 'Savings') ? 'selected' : '' %>>Savings</option>
      <option value="MoneyMarket" <%= (applicationData && applicationData.AccountType5 === 'MoneyMarket') ? 'selected' : '' %>>Money Market</option>
      <option value="CertificateOfDeposit" <%= (applicationData && applicationData.AccountType5 === 'CertificateOfDeposit') ? 'selected' : '' %>>Certificate of Deposit (CD)</option>
      <option value="MutualFund" <%= (applicationData && applicationData.AccountType5 === 'MutualFund') ? 'selected' : '' %>>Mutual Fund</option>
      <option value="Stocks" <%= (applicationData && applicationData.AccountType5 === 'Stocks') ? 'selected' : '' %>>Stocks</option>
      <option value="StockOptions" <%= (applicationData && applicationData.AccountType5 === 'StockOptions') ? 'selected' : '' %>>Stock Options</option>
      <option value="Bonds" <%= (applicationData && applicationData.AccountType5 === 'Bonds') ? 'selected' : '' %>>Bonds</option>
      <option value="Retirement" <%= (applicationData && applicationData.AccountType5 === 'Retirement') ? 'selected' : '' %>>Retirement (401k/IRA)</option>
      <option value="BridgeLoanProceeds" <%= (applicationData && applicationData.AccountType5 === 'BridgeLoanProceeds') ? 'selected' : '' %>>Bridge Loan Proceeds</option>
      <option value="IndividualDevelopmentAccount" <%= (applicationData && applicationData.AccountType5 === 'IndividualDevelopmentAccount') ? 'selected' : '' %>>Individual Development Account</option>
      <option value="TrustAccount" <%= (applicationData && applicationData.AccountType5 === 'TrustAccount') ? 'selected' : '' %>>Trust Account</option>
      <option value="CashValueLifeInsurance" <%= (applicationData && applicationData.AccountType5 === 'CashValueLifeInsurance') ? 'selected' : '' %>>Cash Value Life Insurance</option>
    </select>
  </div>
  <div class="flex flex-col">
    <label for="financialInstitution5" class="text-sm font-medium text-gray-700 mb-1">
      Financial Institution
    </label>
    <input
      type="text"
      id="financialInstitution5"
      name="financialInstitution5"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.FinancialInstitution5 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="accountNumber5" class="text-sm font-medium text-gray-700 mb-1">
      Account Number
    </label>
    <input
      type="text"
      id="accountNumber5"
      name="accountNumber5"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.AccountNumber5 : '' %>"
    >
  </div>
  <div class="flex flex-col">
    <label for="cashValue5" class="text-sm font-medium text-gray-700 mb-1">
      Cash or Market Value ($)
    </label>
    <input
      type="number"
      step="0.01"
      id="cashValue5"
      name="cashValue5"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.CashValue5 : '' %>"
    >
  </div>
</div>

<!-- 2b. Other Assets and Credits You Have -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  2b. Other Assets and Credits You Have
</h6>
<p class="text-sm text-gray-600 mb-2">
  Include all other assets and credits below. Under Asset or Credit Type, choose from:
  Proceeds from Real Estate, Proceeds from Sale of Non-Real Estate, 
  Earnest Money, Rent Credit, Trade Equity, etc.
</p>

<div class="flex items-center mb-3">
  <!-- 
    Inverted logic: If HasOtherAssets2b === false, we check the box 
    (meaning "Does not apply"). 
  -->
  <input 
    type="checkbox" 
    id="chkAssets2b"
    name="chkAssets2b"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasOtherAssets2b === false) ? 'checked' : '' %>
  >
  <label for="chkAssets2b" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- 
  If HasOtherAssets2b === false => hide this entire block 
  so user doesn't see it if they've indicated "does not apply."
-->
<div 
  id="otherAssets2bFields" 
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasOtherAssets2b === false) 
              ? 'hidden' 
              : '' 
         %>"
>
  <!-- We'll create up to 4 lines of "Asset or Credit Type" + "Cash or Market Value" -->
  <!-- Row 1 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="assetCreditType1" class="text-sm font-medium text-gray-700 mb-1">
        Asset or Credit Type
      </label>
      <input
        type="text"
        id="assetCreditType1"
        name="assetCreditType1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. Earnest Money"
        value="<%= applicationData ? applicationData.AssetCreditType1 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="assetCreditValue1" class="text-sm font-medium text-gray-700 mb-1">
        Cash or Market Value ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="assetCreditValue1"
        name="assetCreditValue1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 2000"
        value="<%= applicationData ? applicationData.AssetCreditValue1 : '' %>"
      >
    </div>
  </div>

  <!-- Row 2 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="assetCreditType2" class="text-sm font-medium text-gray-700 mb-1">
        Asset or Credit Type
      </label>
      <input
        type="text"
        id="assetCreditType2"
        name="assetCreditType2"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. Rent Credit"
        value="<%= applicationData ? applicationData.AssetCreditType2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="assetCreditValue2" class="text-sm font-medium text-gray-700 mb-1">
        Cash or Market Value ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="assetCreditValue2"
        name="assetCreditValue2"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 500"
        value="<%= applicationData ? applicationData.AssetCreditValue2 : '' %>"
      >
    </div>
  </div>

  <!-- Row 3 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="assetCreditType3" class="text-sm font-medium text-gray-700 mb-1">
        Asset or Credit Type
      </label>
      <input
        type="text"
        id="assetCreditType3"
        name="assetCreditType3"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. Unsecured Borrowed Funds"
        value="<%= applicationData ? applicationData.AssetCreditType3 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="assetCreditValue3" class="text-sm font-medium text-gray-700 mb-1">
        Cash or Market Value ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="assetCreditValue3"
        name="assetCreditValue3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.AssetCreditValue3 : '' %>"
      >
    </div>
  </div>

  <!-- Row 4 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="flex flex-col">
      <label for="assetCreditType4" class="text-sm font-medium text-gray-700 mb-1">
        Asset or Credit Type
      </label>
      <input
        type="text"
        id="assetCreditType4"
        name="assetCreditType4"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.AssetCreditType4 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="assetCreditValue4" class="text-sm font-medium text-gray-700 mb-1">
        Cash or Market Value ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="assetCreditValue4"
        name="assetCreditValue4"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.AssetCreditValue4 : '' %>"
      >
    </div>
  </div>
</div>

<!-- 2c. Liabilities â€“ Credit Cards, Other Debts, and Leases that You Owe -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  2c. Liabilities â€“ Credit Cards, Other Debts, and Leases that You Owe
</h6>
<p class="text-sm text-gray-600 mb-2">
  List all liabilities below (except real estate) and include deferred payments 
  (credit cards, car loans, student loans, personal loans, leases, etc.).
</p>

<div class="flex items-center mb-3">
  <!-- If HasLiabilities2c === false, we check this box => â€œDoes not apply.â€ -->
  <input 
    type="checkbox"
    id="chkLiabilities2c"
    name="chkLiabilities2c"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasLiabilities2c === false) ? 'checked' : '' %>
  >
  <label for="chkLiabilities2c" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- If HasLiabilities2c === false => hide these fields by default -->
<div
  id="liabilities2cFields"
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasLiabilities2c === false) 
              ? 'hidden' 
              : '' 
         %>"
>

  <!-- Row #1 -->
  <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
    <!-- Account Type -->
    <div class="flex flex-col">
      <label for="accountType2c1" class="text-sm font-medium text-gray-700 mb-1">
        Account Type
      </label>
      <select id="accountType2c1" name="accountType2c1" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Revolving" <%= (applicationData && applicationData.AccountType2c1 === 'Revolving') ? 'selected' : '' %>>Revolving</option>
        <option value="Installment" <%= (applicationData && applicationData.AccountType2c1 === 'Installment') ? 'selected' : '' %>>Installment</option>
        <option value="Open30Day" <%= (applicationData && applicationData.AccountType2c1 === 'Open30Day') ? 'selected' : '' %>>Open 30-Day</option>
        <option value="Lease" <%= (applicationData && applicationData.AccountType2c1 === 'Lease') ? 'selected' : '' %>>Lease</option>
        <option value="Other" <%= (applicationData && applicationData.AccountType2c1 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <!-- Company Name -->
    <div class="flex flex-col">
      <label for="companyName2c1" class="text-sm font-medium text-gray-700 mb-1">
        Company Name
      </label>
      <input 
        type="text"
        id="companyName2c1"
        name="companyName2c1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. Visa"
        value="<%= applicationData ? applicationData.CompanyName2c1 : '' %>"
      >
    </div>
    <!-- Account Number -->
    <div class="flex flex-col">
      <label for="accountNumber2c1" class="text-sm font-medium text-gray-700 mb-1">
        Account Number
      </label>
      <input 
        type="text"
        id="accountNumber2c1"
        name="accountNumber2c1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="XXXX"
        value="<%= applicationData ? applicationData.AccountNumber2c1 : '' %>"
      >
    </div>
    <!-- Unpaid Balance -->
    <div class="flex flex-col">
      <label for="unpaidBalance2c1" class="text-sm font-medium text-gray-700 mb-1">
        Unpaid Balance ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="unpaidBalance2c1"
        name="unpaidBalance2c1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 2000"
        value="<%= applicationData ? applicationData.UnpaidBalance2c1 : '' %>"
      >
    </div>
    <!-- To be paid off at or before closing -->
    <div class="flex items-center mt-5">
      <input
        type="checkbox"
        id="payOff2c1"
        name="payOff2c1"
        class="mr-2"
        <%= (applicationData && applicationData.PayOff2c1) ? 'checked' : '' %>
      >
      <label for="payOff2c1" class="text-sm text-gray-700">
        To be paid off at or before closing
      </label>
    </div>
    <!-- Monthly Payment -->
    <div class="flex flex-col">
      <label for="monthlyPayment2c1" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2c1"
        name="monthlyPayment2c1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 50"
        value="<%= applicationData ? applicationData.MonthlyPayment2c1 : '' %>"
      >
    </div>
  </div><!-- Row #1 -->

  <!-- Row #2 -->
  <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
    <div class="flex flex-col">
      <label for="accountType2c2" class="text-sm font-medium text-gray-700 mb-1">
        Account Type
      </label>
      <select id="accountType2c2" name="accountType2c2" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Revolving" <%= (applicationData && applicationData.AccountType2c2 === 'Revolving') ? 'selected' : '' %>>Revolving</option>
        <option value="Installment" <%= (applicationData && applicationData.AccountType2c2 === 'Installment') ? 'selected' : '' %>>Installment</option>
        <option value="Open30Day" <%= (applicationData && applicationData.AccountType2c2 === 'Open30Day') ? 'selected' : '' %>>Open 30-Day</option>
        <option value="Lease" <%= (applicationData && applicationData.AccountType2c2 === 'Lease') ? 'selected' : '' %>>Lease</option>
        <option value="Other" <%= (applicationData && applicationData.AccountType2c2 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="companyName2c2" class="text-sm font-medium text-gray-700 mb-1">
        Company Name
      </label>
      <input 
        type="text"
        id="companyName2c2"
        name="companyName2c2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CompanyName2c2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="accountNumber2c2" class="text-sm font-medium text-gray-700 mb-1">
        Account Number
      </label>
      <input 
        type="text"
        id="accountNumber2c2"
        name="accountNumber2c2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.AccountNumber2c2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="unpaidBalance2c2" class="text-sm font-medium text-gray-700 mb-1">
        Unpaid Balance ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="unpaidBalance2c2"
        name="unpaidBalance2c2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.UnpaidBalance2c2 : '' %>"
      >
    </div>
    <div class="flex items-center mt-5">
      <input
        type="checkbox"
        id="payOff2c2"
        name="payOff2c2"
        class="mr-2"
        <%= (applicationData && applicationData.PayOff2c2) ? 'checked' : '' %>
      >
      <label for="payOff2c2" class="text-sm text-gray-700">
        To be paid off at or before closing
      </label>
    </div>
    <div class="flex flex-col">
      <label for="monthlyPayment2c2" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2c2"
        name="monthlyPayment2c2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment2c2 : '' %>"
      >
    </div>
  </div><!-- Row #2 -->

  <!-- Row #3 -->
  <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
    <div class="flex flex-col">
      <label for="accountType2c3" class="text-sm font-medium text-gray-700 mb-1">
        Account Type
      </label>
      <select id="accountType2c3" name="accountType2c3" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Revolving" <%= (applicationData && applicationData.AccountType2c3 === 'Revolving') ? 'selected' : '' %>>Revolving</option>
        <option value="Installment" <%= (applicationData && applicationData.AccountType2c3 === 'Installment') ? 'selected' : '' %>>Installment</option>
        <option value="Open30Day" <%= (applicationData && applicationData.AccountType2c3 === 'Open30Day') ? 'selected' : '' %>>Open 30-Day</option>
        <option value="Lease" <%= (applicationData && applicationData.AccountType2c3 === 'Lease') ? 'selected' : '' %>>Lease</option>
        <option value="Other" <%= (applicationData && applicationData.AccountType2c3 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="companyName2c3" class="text-sm font-medium text-gray-700 mb-1">
        Company Name
      </label>
      <input 
        type="text"
        id="companyName2c3"
        name="companyName2c3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CompanyName2c3 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="accountNumber2c3" class="text-sm font-medium text-gray-700 mb-1">
        Account Number
      </label>
      <input 
        type="text"
        id="accountNumber2c3"
        name="accountNumber2c3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.AccountNumber2c3 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="unpaidBalance2c3" class="text-sm font-medium text-gray-700 mb-1">
        Unpaid Balance ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="unpaidBalance2c3"
        name="unpaidBalance2c3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.UnpaidBalance2c3 : '' %>"
      >
    </div>
    <div class="flex items-center mt-5">
      <input
        type="checkbox"
        id="payOff2c3"
        name="payOff2c3"
        class="mr-2"
        <%= (applicationData && applicationData.PayOff2c3) ? 'checked' : '' %>
      >
      <label for="payOff2c3" class="text-sm text-gray-700">
        To be paid off at or before closing
      </label>
    </div>
    <div class="flex flex-col">
      <label for="monthlyPayment2c3" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2c3"
        name="monthlyPayment2c3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment2c3 : '' %>"
      >
    </div>
  </div><!-- Row #3 -->

  <!-- Row #4 -->
  <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
    <div class="flex flex-col">
      <label for="accountType2c4" class="text-sm font-medium text-gray-700 mb-1">
        Account Type
      </label>
      <select id="accountType2c4" name="accountType2c4" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Revolving" <%= (applicationData && applicationData.AccountType2c4 === 'Revolving') ? 'selected' : '' %>>Revolving</option>
        <option value="Installment" <%= (applicationData && applicationData.AccountType2c4 === 'Installment') ? 'selected' : '' %>>Installment</option>
        <option value="Open30Day" <%= (applicationData && applicationData.AccountType2c4 === 'Open30Day') ? 'selected' : '' %>>Open 30-Day</option>
        <option value="Lease" <%= (applicationData && applicationData.AccountType2c4 === 'Lease') ? 'selected' : '' %>>Lease</option>
        <option value="Other" <%= (applicationData && applicationData.AccountType2c4 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="companyName2c4" class="text-sm font-medium text-gray-700 mb-1">
        Company Name
      </label>
      <input 
        type="text"
        id="companyName2c4"
        name="companyName2c4"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CompanyName2c4 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="accountNumber2c4" class="text-sm font-medium text-gray-700 mb-1">
        Account Number
      </label>
      <input 
        type="text"
        id="accountNumber2c4"
        name="accountNumber2c4"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.AccountNumber2c4 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="unpaidBalance2c4" class="text-sm font-medium text-gray-700 mb-1">
        Unpaid Balance ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="unpaidBalance2c4"
        name="unpaidBalance2c4"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.UnpaidBalance2c4 : '' %>"
      >
    </div>
    <div class="flex items-center mt-5">
      <input
        type="checkbox"
        id="payOff2c4"
        name="payOff2c4"
        class="mr-2"
        <%= (applicationData && applicationData.PayOff2c4) ? 'checked' : '' %>
      >
      <label for="payOff2c4" class="text-sm text-gray-700">
        To be paid off at or before closing
      </label>
    </div>
    <div class="flex flex-col">
      <label for="monthlyPayment2c4" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2c4"
        name="monthlyPayment2c4"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment2c4 : '' %>"
      >
    </div>
  </div><!-- Row #4 -->

  <!-- Row #5 -->
  <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
    <div class="flex flex-col">
      <label for="accountType2c5" class="text-sm font-medium text-gray-700 mb-1">
        Account Type
      </label>
      <select id="accountType2c5" name="accountType2c5" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Revolving" <%= (applicationData && applicationData.AccountType2c5 === 'Revolving') ? 'selected' : '' %>>Revolving</option>
        <option value="Installment" <%= (applicationData && applicationData.AccountType2c5 === 'Installment') ? 'selected' : '' %>>Installment</option>
        <option value="Open30Day" <%= (applicationData && applicationData.AccountType2c5 === 'Open30Day') ? 'selected' : '' %>>Open 30-Day</option>
        <option value="Lease" <%= (applicationData && applicationData.AccountType2c5 === 'Lease') ? 'selected' : '' %>>Lease</option>
        <option value="Other" <%= (applicationData && applicationData.AccountType2c5 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="companyName2c5" class="text-sm font-medium text-gray-700 mb-1">
        Company Name
      </label>
      <input 
        type="text"
        id="companyName2c5"
        name="companyName2c5"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CompanyName2c5 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="accountNumber2c5" class="text-sm font-medium text-gray-700 mb-1">
        Account Number
      </label>
      <input 
        type="text"
        id="accountNumber2c5"
        name="accountNumber2c5"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.AccountNumber2c5 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="unpaidBalance2c5" class="text-sm font-medium text-gray-700 mb-1">
        Unpaid Balance ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="unpaidBalance2c5"
        name="unpaidBalance2c5"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.UnpaidBalance2c5 : '' %>"
      >
    </div>
    <div class="flex items-center mt-5">
      <input
        type="checkbox"
        id="payOff2c5"
        name="payOff2c5"
        class="mr-2"
        <%= (applicationData && applicationData.PayOff2c5) ? 'checked' : '' %>
      >
      <label for="payOff2c5" class="text-sm text-gray-700">
        To be paid off at or before closing
      </label>
    </div>
    <div class="flex flex-col">
      <label for="monthlyPayment2c5" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2c5"
        name="monthlyPayment2c5"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment2c5 : '' %>"
      >
    </div>
  </div><!-- Row #5 -->

<!-- 2d. Other Liabilities and Expenses -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  2d. Other Liabilities and Expenses
</h6>
<p class="text-sm text-gray-600 mb-2">
  Include all other liabilities and expenses below. Choose from alimony, child support, 
  separate maintenance, job-related expenses, or other.
</p>

<div class="flex items-center mb-3">
  <!-- 
    Inverted logic: If HasOtherLiabilities2d === false, the user has no other liabilities => box is checked
  -->
  <input
    type="checkbox"
    id="chkLiabilities2d"
    name="chkLiabilities2d"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasOtherLiabilities2d === false) ? 'checked' : '' %>
  >
  <label for="chkLiabilities2d" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- 
  If HasOtherLiabilities2d === false => hide the fields by default. 
-->
<div
  id="liabilities2dFields"
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasOtherLiabilities2d === false)
              ? 'hidden'
              : ''
         %>"
>
  <!-- We'll create 4 lines for "Expense/Liability Type" & "Monthly Payment" -->

  <!-- Row #1 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="liabilityType2d1" class="text-sm font-medium text-gray-700 mb-1">
        Liability/Expense Type
      </label>
      <select id="liabilityType2d1" name="liabilityType2d1" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Alimony" <%= (applicationData && applicationData.LiabilityType2d1 === 'Alimony') ? 'selected' : '' %>>Alimony</option>
        <option value="ChildSupport" <%= (applicationData && applicationData.LiabilityType2d1 === 'ChildSupport') ? 'selected' : '' %>>Child Support</option>
        <option value="SeparateMaintenance" <%= (applicationData && applicationData.LiabilityType2d1 === 'SeparateMaintenance') ? 'selected' : '' %>>Separate Maintenance</option>
        <option value="JobRelatedExpenses" <%= (applicationData && applicationData.LiabilityType2d1 === 'JobRelatedExpenses') ? 'selected' : '' %>>Job-Related Expenses</option>
        <option value="Other" <%= (applicationData && applicationData.LiabilityType2d1 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyPayment2d1" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2d1"
        name="monthlyPayment2d1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 300"
        value="<%= applicationData ? applicationData.MonthlyPayment2d1 : '' %>"
      >
    </div>
  </div>

  <!-- Row #2 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="liabilityType2d2" class="text-sm font-medium text-gray-700 mb-1">
        Liability/Expense Type
      </label>
      <select id="liabilityType2d2" name="liabilityType2d2" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Alimony" <%= (applicationData && applicationData.LiabilityType2d2 === 'Alimony') ? 'selected' : '' %>>Alimony</option>
        <option value="ChildSupport" <%= (applicationData && applicationData.LiabilityType2d2 === 'ChildSupport') ? 'selected' : '' %>>Child Support</option>
        <option value="SeparateMaintenance" <%= (applicationData && applicationData.LiabilityType2d2 === 'SeparateMaintenance') ? 'selected' : '' %>>Separate Maintenance</option>
        <option value="JobRelatedExpenses" <%= (applicationData && applicationData.LiabilityType2d2 === 'JobRelatedExpenses') ? 'selected' : '' %>>Job-Related Expenses</option>
        <option value="Other" <%= (applicationData && applicationData.LiabilityType2d2 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyPayment2d2" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2d2"
        name="monthlyPayment2d2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment2d2 : '' %>"
      >
    </div>
  </div>

  <!-- Row #3 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="liabilityType2d3" class="text-sm font-medium text-gray-700 mb-1">
        Liability/Expense Type
      </label>
      <select id="liabilityType2d3" name="liabilityType2d3" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Alimony" <%= (applicationData && applicationData.LiabilityType2d3 === 'Alimony') ? 'selected' : '' %>>Alimony</option>
        <option value="ChildSupport" <%= (applicationData && applicationData.LiabilityType2d3 === 'ChildSupport') ? 'selected' : '' %>>Child Support</option>
        <option value="SeparateMaintenance" <%= (applicationData && applicationData.LiabilityType2d3 === 'SeparateMaintenance') ? 'selected' : '' %>>Separate Maintenance</option>
        <option value="JobRelatedExpenses" <%= (applicationData && applicationData.LiabilityType2d3 === 'JobRelatedExpenses') ? 'selected' : '' %>>Job-Related Expenses</option>
        <option value="Other" <%= (applicationData && applicationData.LiabilityType2d3 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyPayment2d3" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2d3"
        name="monthlyPayment2d3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment2d3 : '' %>"
      >
    </div>
  </div>

  <!-- Row #4 -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="flex flex-col">
      <label for="liabilityType2d4" class="text-sm font-medium text-gray-700 mb-1">
        Liability/Expense Type
      </label>
      <select id="liabilityType2d4" name="liabilityType2d4" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Alimony" <%= (applicationData && applicationData.LiabilityType2d4 === 'Alimony') ? 'selected' : '' %>>Alimony</option>
        <option value="ChildSupport" <%= (applicationData && applicationData.LiabilityType2d4 === 'ChildSupport') ? 'selected' : '' %>>Child Support</option>
        <option value="SeparateMaintenance" <%= (applicationData && applicationData.LiabilityType2d4 === 'SeparateMaintenance') ? 'selected' : '' %>>Separate Maintenance</option>
        <option value="JobRelatedExpenses" <%= (applicationData && applicationData.LiabilityType2d4 === 'JobRelatedExpenses') ? 'selected' : '' %>>Job-Related Expenses</option>
        <option value="Other" <%= (applicationData && applicationData.LiabilityType2d4 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyPayment2d4" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment2d4"
        name="monthlyPayment2d4"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment2d4 : '' %>"
      >
    </div>
  </div>
</div>
</div>


</div> <!-- End of Section 2 -->

<!-- SECTION 3: Financial Information - Real Estate -->
<div id="urlaSection3" class="urla-section hidden">
  <h6 class="font-semibold text-xl text-gray-800 mb-4">
    Section 3: Financial Information â€“ Real Estate
  </h6>
  <p class="text-sm text-gray-500 mb-4">
    This section asks you to list any real estate you own and its associated mortgages. 
    If you do not own any real estate, check the box below.
  </p>

  <!-- "I do not own any real estate" checkbox -->
  <div class="flex items-center mb-3">
    <!-- If HasRealEstate3 === false, we check this box => user does NOT own real estate -->
    <input 
      type="checkbox"
      id="chkNoRealEstate"
      name="chkNoRealEstate"
      class="mr-2"
      value="true"
      <%= (applicationData && applicationData.HasRealEstate3 === false) ? 'checked' : '' %>
    >
    <label for="chkNoRealEstate" class="text-sm text-gray-700">
      I do not own any real estate
    </label>
  </div>

  <!-- Hide entire section if HasRealEstate3 === false -->
  <div 
    id="section3RealEstateFields"
    class="border border-gray-300 rounded-md p-4 mb-6
           <%= (applicationData && applicationData.HasRealEstate3 === false) 
                ? 'hidden' 
                : '' 
           %>"
  >
    <!-- 3a. Property You Own (Only 1 property in this example) -->
    <h6 class="font-semibold text-lg text-gray-800 mb-2">
      3a. Property You Own
    </h6>
    <p class="text-sm text-gray-600 mb-2">
      If you are refinancing, list the property you are refinancing first. 
      (Currently, we allow only 1 property in this section.)
    </p>

    <!-- Property #1 -->
    <div class="border border-gray-200 rounded-md p-4 mb-4">
      <!-- Address (Street, City, State, ZIP) -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
        <div class="flex flex-col">
          <label for="propertyStreet1" class="text-sm font-medium text-gray-700 mb-1">
            Street Address
          </label>
          <input 
            type="text"
            id="propertyStreet1"
            name="propertyStreet1"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.PropertyStreet1 : '' %>"
          >
        </div>
        <div class="flex flex-col">
          <label for="propertyCity1" class="text-sm font-medium text-gray-700 mb-1">
            City
          </label>
          <input 
            type="text"
            id="propertyCity1"
            name="propertyCity1"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.PropertyCity1 : '' %>"
          >
        </div>
        <div class="flex flex-col">
          <label for="propertyState1" class="text-sm font-medium text-gray-700 mb-1">
            State
          </label>
          <input 
            type="text"
            id="propertyState1"
            name="propertyState1"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.PropertyState1 : '' %>"
          >
        </div>
        <div class="flex flex-col">
          <label for="propertyZip1" class="text-sm font-medium text-gray-700 mb-1">
            ZIP
          </label>
          <input 
            type="text"
            id="propertyZip1"
            name="propertyZip1"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.PropertyZip1 : '' %>"
          >
        </div>
      </div><!-- /Address row -->

      <!-- Additional Fields: Value, Status, Occupancy, Insurance, Rental Income -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
        <div class="flex flex-col">
          <label for="propertyValue1" class="text-sm font-medium text-gray-700 mb-1">
            Property Value ($)
          </label>
          <input
            type="number"
            step="0.01"
            id="propertyValue1"
            name="propertyValue1"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.PropertyValue1 : '' %>"
          >
        </div>
        <div class="flex flex-col">
          <label for="propertyStatus1" class="text-sm font-medium text-gray-700 mb-1">
            Status (Sold, Pending, etc.)
          </label>
          <select id="propertyStatus1" name="propertyStatus1" class="border border-gray-300 rounded-md p-2">
            <option value="">-- Select --</option>
            <option value="Sold" <%= (applicationData && applicationData.PropertyStatus1 === 'Sold') ? 'selected' : '' %>>Sold</option>
            <option value="PendingSale" <%= (applicationData && (applicationData.PropertyStatus1 === 'PendingSale' || applicationData.PropertyStatus1 === 'Pending')) ? 'selected' : '' %>>Pending Sale</option>
            <option value="Retained" <%= (applicationData && applicationData.PropertyStatus1 === 'Retained') ? 'selected' : '' %>>Retained</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label for="intendedOccupancy1" class="text-sm font-medium text-gray-700 mb-1">
            Intended Occupancy
          </label>
          <select 
            id="intendedOccupancy1"
            name="intendedOccupancy1"
            class="border border-gray-300 rounded-md p-2"
          >
            <option value="">-- Select --</option>
            <option value="PrimaryResidence" <%= (applicationData && (applicationData.IntendedOccupancy1 === 'PrimaryResidence' || applicationData.IntendedOccupancy1 === 'Primary')) ? 'selected' : '' %>>Primary Residence</option>
            <option value="SecondHome" <%= (applicationData && (applicationData.IntendedOccupancy1 === 'SecondHome' || applicationData.IntendedOccupancy1 === 'Second Home')) ? 'selected' : '' %>>Second Home</option>
            <option value="Investment" <%= (applicationData && applicationData.IntendedOccupancy1 === 'Investment') ? 'selected' : '' %>>Investment</option>
            <option value="Other" <%= (applicationData && applicationData.IntendedOccupancy1 === 'Other') ? 'selected' : '' %>>Other</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label for="monthlyInsurance1" class="text-sm font-medium text-gray-700 mb-1">
            Monthly Insurance/Taxes ($)
          </label>
          <input
            type="number"
            step="0.01"
            id="monthlyInsurance1"
            name="monthlyInsurance1"
            class="border border-gray-300 rounded-md p-2"
            placeholder="If not in mortgage payment"
            value="<%= applicationData ? applicationData.MonthlyInsurance1 : '' %>"
          >
        </div>
        <div class="flex flex-col">
          <label for="monthlyRentalIncome1" class="text-sm font-medium text-gray-700 mb-1">
            Monthly Rental Income ($)
          </label>
          <input
            type="number"
            step="0.01"
            id="monthlyRentalIncome1"
            name="monthlyRentalIncome1"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.MonthlyRentalIncome1 : '' %>"
          >
        </div>
      </div><!-- /Additional Fields -->

      <!-- Mortgage Loans on This Property -->
      <div class="mt-4">
        <label class="font-medium text-gray-800 mb-2 block">
          Mortgage Loans on This Property
        </label>
        <div class="flex items-center mb-3">
          <!-- If checked => HasMortgageLoans1 = false => hide mortgage fields -->
          <input
            type="checkbox"
            id="chkNoMortgage1"
            name="chkNoMortgage1"
            class="mr-2"
            value="true"
            <%= (applicationData && applicationData.HasMortgageLoans1 === false) ? 'checked' : '' %>
          >
          <label for="chkNoMortgage1" class="text-sm text-gray-700">
            Does not apply
          </label>
        </div>

        <!-- Hide if HasMortgageLoans1 === false -->
        <div
          id="mortgageFields1"
          class="<%= (applicationData && applicationData.HasMortgageLoans1 === false) ? 'hidden' : '' %>"
        >
          <!-- One mortgage row -->
          <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
            <!-- Creditor Name -->
            <div class="flex flex-col">
              <label for="creditorName1" class="text-sm font-medium text-gray-700 mb-1">
                Creditor Name
              </label>
              <input
                type="text"
                id="creditorName1"
                name="creditorName1"
                class="border border-gray-300 rounded-md p-2"
                value="<%= applicationData ? applicationData.CreditorName1 : '' %>"
              >
            </div>
            <!-- Account Number -->
            <div class="flex flex-col">
              <label for="creditorAccount1" class="text-sm font-medium text-gray-700 mb-1">
                Account Number
              </label>
              <input
                type="text"
                id="creditorAccount1"
                name="creditorAccount1"
                class="border border-gray-300 rounded-md p-2"
                value="<%= applicationData ? applicationData.CreditorAccount1 : '' %>"
              >
            </div>
            <!-- Monthly Mortgage Payment -->
            <div class="flex flex-col">
              <label for="mortgagePayment1" class="text-sm font-medium text-gray-700 mb-1">
                Monthly Mortgage Payment ($)
              </label>
              <input
                type="number"
                step="0.01"
                id="mortgagePayment1"
                name="mortgagePayment1"
                class="border border-gray-300 rounded-md p-2"
                value="<%= applicationData ? applicationData.MortgagePayment1 : '' %>"
              >
            </div>
            <!-- Unpaid Balance -->
            <div class="flex flex-col">
              <label for="unpaidBalance1" class="text-sm font-medium text-gray-700 mb-1">
                Unpaid Balance ($)
              </label>
              <input
                type="number"
                step="0.01"
                id="unpaidBalance1"
                name="unpaidBalance1"
                class="border border-gray-300 rounded-md p-2"
                value="<%= applicationData ? applicationData.UnpaidBalance1 : '' %>"
              >
            </div>
            <!-- Pay off? -->
            <div class="flex items-center mt-5">
              <input
                type="checkbox"
                id="payOffMortgage1"
                name="payOffMortgage1"
                class="mr-2"
                <%= (applicationData && applicationData.PayOffMortgage1) ? 'checked' : '' %>
              >
              <label for="payOffMortgage1" class="text-sm text-gray-700">
                To be paid off at or before closing
              </label>
            </div>
            <!-- Mortgage Type (FHA, VA, etc.) -->
            <div class="flex flex-col">
              <label for="mortgageType1" class="text-sm font-medium text-gray-700 mb-1">
                Type
              </label>
              <select
                id="mortgageType1"
                name="mortgageType1"
                class="border border-gray-300 rounded-md p-2"
              >
                <option value="">-- Select --</option>
                <option value="FHA" <%= (applicationData && applicationData.MortgageType1 === 'FHA') ? 'selected' : '' %>>FHA</option>
                <option value="VA" <%= (applicationData && applicationData.MortgageType1 === 'VA') ? 'selected' : '' %>>VA</option>
                <option value="Conventional" <%= (applicationData && applicationData.MortgageType1 === 'Conventional') ? 'selected' : '' %>>Conventional</option>
                <option value="USDA-RD" <%= (applicationData && applicationData.MortgageType1 === 'USDA-RD') ? 'selected' : '' %>>USDA-RD</option>
                <option value="Other" <%= (applicationData && applicationData.MortgageType1 === 'Other') ? 'selected' : '' %>>Other</option>
              </select>
            </div>
          </div><!-- /One mortgage row -->
        </div><!-- /mortgageFields1 -->
      </div><!-- /Mortgage Loans on This Property -->
    </div><!-- /Property #1 -->
    
    <!-- 3b. IF APPLICABLE, Complete Information for Additional Property -->
<h6 class="font-semibold text-lg text-gray-800 mb-2 mt-6">
  3b. Additional Property (If Applicable)
</h6>

<div class="flex items-center mb-3">
  <!-- If user checks => HasProperty2 = false => hide the entire property #2 section -->
  <input
    type="checkbox"
    id="chkNoProperty2"
    name="chkNoProperty2"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasProperty2 === false) ? 'checked' : '' %>
  >
  <label for="chkNoProperty2" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- If HasProperty2 === false => hide these fields by default -->
<div 
  id="property2Fields"
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasProperty2 === false) ? 'hidden' : '' %>"
>
  <!-- Address (Street, City, State, ZIP, etc.) -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="propertyStreet2" class="text-sm font-medium text-gray-700 mb-1">
        Street Address
      </label>
      <input 
        type="text"
        id="propertyStreet2"
        name="propertyStreet2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyStreet2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="propertyCity2" class="text-sm font-medium text-gray-700 mb-1">
        City
      </label>
      <input 
        type="text"
        id="propertyCity2"
        name="propertyCity2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyCity2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="propertyState2" class="text-sm font-medium text-gray-700 mb-1">
        State
      </label>
      <input 
        type="text"
        id="propertyState2"
        name="propertyState2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyState2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="propertyZip2" class="text-sm font-medium text-gray-700 mb-1">
        ZIP
      </label>
      <input 
        type="text"
        id="propertyZip2"
        name="propertyZip2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyZip2 : '' %>"
      >
    </div>
  </div><!-- /Address row -->

  <!-- Additional Fields: Value, Status, Occupancy, Insurance, Rental Income -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="propertyValue2" class="text-sm font-medium text-gray-700 mb-1">
        Property Value ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="propertyValue2"
        name="propertyValue2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyValue2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="propertyStatus2" class="text-sm font-medium text-gray-700 mb-1">
        Status (Sold, Pending, etc.)
      </label>
      <select id="propertyStatus2" name="propertyStatus2" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Sold" <%= (applicationData && applicationData.PropertyStatus2 === 'Sold') ? 'selected' : '' %>>Sold</option>
        <option value="PendingSale" <%= (applicationData && (applicationData.PropertyStatus2 === 'PendingSale' || applicationData.PropertyStatus2 === 'Pending')) ? 'selected' : '' %>>Pending Sale</option>
        <option value="Retained" <%= (applicationData && applicationData.PropertyStatus2 === 'Retained') ? 'selected' : '' %>>Retained</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="intendedOccupancy2" class="text-sm font-medium text-gray-700 mb-1">
        Intended Occupancy
      </label>
      <select 
        id="intendedOccupancy2"
        name="intendedOccupancy2"
        class="border border-gray-300 rounded-md p-2"
      >
        <option value="">-- Select --</option>
        <option value="PrimaryResidence" <%= (applicationData && (applicationData.IntendedOccupancy2 === 'PrimaryResidence' || applicationData.IntendedOccupancy2 === 'Primary')) ? 'selected' : '' %>>Primary Residence</option>
        <option value="SecondHome" <%= (applicationData && (applicationData.IntendedOccupancy2 === 'SecondHome' || applicationData.IntendedOccupancy2 === 'Second Home')) ? 'selected' : '' %>>Second Home</option>
        <option value="Investment" <%= (applicationData && applicationData.IntendedOccupancy2 === 'Investment') ? 'selected' : '' %>>Investment</option>
        <option value="Other" <%= (applicationData && applicationData.IntendedOccupancy2 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyInsurance2" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Insurance/Taxes ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyInsurance2"
        name="monthlyInsurance2"
        class="border border-gray-300 rounded-md p-2"
        placeholder="If not in mortgage payment"
        value="<%= applicationData ? applicationData.MonthlyInsurance2 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="monthlyRentalIncome2" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Rental Income ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyRentalIncome2"
        name="monthlyRentalIncome2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyRentalIncome2 : '' %>"
      >
    </div>
  </div><!-- /Additional Fields -->

  <!-- Mortgage Loans on This Property -->
  <div class="mt-4">
    <label class="font-medium text-gray-800 mb-2 block">
      Mortgage Loans on This Property
    </label>
    <div class="flex items-center mb-3">
      <!-- If user checks => HasMortgageLoans2 = false => hide mortgage fields -->
      <input
        type="checkbox"
        id="chkNoMortgage2"
        name="chkNoMortgage2"
        class="mr-2"
        value="true"
        <%= (applicationData && applicationData.HasMortgageLoans2 === false) ? 'checked' : '' %>
      >
      <label for="chkNoMortgage2" class="text-sm text-gray-700">
        Does not apply
      </label>
    </div>

    <!-- Hide if HasMortgageLoans2 === false -->
    <div
      id="mortgageFields2"
      class="<%= (applicationData && applicationData.HasMortgageLoans2 === false) ? 'hidden' : '' %>"
    >
      <!-- One mortgage row for property #2 (you can replicate if you want more) -->
      <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
        <!-- Creditor Name -->
        <div class="flex flex-col">
          <label for="creditorName2" class="text-sm font-medium text-gray-700 mb-1">
            Creditor Name
          </label>
          <input
            type="text"
            id="creditorName2"
            name="creditorName2"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.CreditorName2 : '' %>"
          >
        </div>
        <!-- Account Number -->
        <div class="flex flex-col">
          <label for="creditorAccount2" class="text-sm font-medium text-gray-700 mb-1">
            Account Number
          </label>
          <input
            type="text"
            id="creditorAccount2"
            name="creditorAccount2"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.CreditorAccount2 : '' %>"
          >
        </div>
        <!-- Monthly Mortgage Payment -->
        <div class="flex flex-col">
          <label for="mortgagePayment2" class="text-sm font-medium text-gray-700 mb-1">
            Monthly Mortgage Payment ($)
          </label>
          <input
            type="number"
            step="0.01"
            id="mortgagePayment2"
            name="mortgagePayment2"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.MortgagePayment2 : '' %>"
          >
        </div>
        <!-- Unpaid Balance -->
        <div class="flex flex-col">
          <label for="unpaidBalance2" class="text-sm font-medium text-gray-700 mb-1">
            Unpaid Balance ($)
          </label>
          <input
            type="number"
            step="0.01"
            id="unpaidBalance2"
            name="unpaidBalance2"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.UnpaidBalance2 : '' %>"
          >
        </div>
        <!-- Pay off? -->
        <div class="flex items-center mt-5">
          <input
            type="checkbox"
            id="payOffMortgage2"
            name="payOffMortgage2"
            class="mr-2"
            <%= (applicationData && applicationData.PayOffMortgage2) ? 'checked' : '' %>
          >
          <label for="payOffMortgage2" class="text-sm text-gray-700">
            To be paid off at or before closing
          </label>
        </div>
        <!-- Mortgage Type (FHA, VA, etc.) -->
        <div class="flex flex-col">
          <label for="mortgageType2" class="text-sm font-medium text-gray-700 mb-1">
            Type
          </label>
          <select
            id="mortgageType2"
            name="mortgageType2"
            class="border border-gray-300 rounded-md p-2"
          >
            <option value="">-- Select --</option>
            <option value="FHA" <%= (applicationData && applicationData.MortgageType2 === 'FHA') ? 'selected' : '' %>>FHA</option>
            <option value="VA" <%= (applicationData && applicationData.MortgageType2 === 'VA') ? 'selected' : '' %>>VA</option>
            <option value="Conventional" <%= (applicationData && applicationData.MortgageType2 === 'Conventional') ? 'selected' : '' %>>Conventional</option>
            <option value="USDA-RD" <%= (applicationData && applicationData.MortgageType2 === 'USDA-RD') ? 'selected' : '' %>>USDA-RD</option>
            <option value="Other" <%= (applicationData && applicationData.MortgageType2 === 'Other') ? 'selected' : '' %>>Other</option>
          </select>
        </div>
      </div><!-- /One mortgage row for property #2 -->
    </div><!-- /mortgageFields2 -->
  </div><!-- /Mortgage Loans on This Property -->
</div><!-- /property2Fields -->

<!-- 3c. IF APPLICABLE, Complete Information for Additional Property (#3) -->
<h6 class="font-semibold text-lg text-gray-800 mb-2 mt-6">
  3c. Additional Property (If Applicable)
</h6>

<div class="flex items-center mb-3">
  <!-- If user checks => HasProperty3 = false => hide entire property #3 section -->
  <input
    type="checkbox"
    id="chkNoProperty3"
    name="chkNoProperty3"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasProperty3 === false) ? 'checked' : '' %>
  >
  <label for="chkNoProperty3" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- If HasProperty3 === false => hide these fields by default -->
<div 
  id="property3Fields"
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasProperty3 === false) ? 'hidden' : '' %>"
>
  <!-- Address (Street, City, State, ZIP, etc.) -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="propertyStreet3" class="text-sm font-medium text-gray-700 mb-1">
        Street Address
      </label>
      <input 
        type="text"
        id="propertyStreet3"
        name="propertyStreet3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyStreet3 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="propertyCity3" class="text-sm font-medium text-gray-700 mb-1">
        City
      </label>
      <input 
        type="text"
        id="propertyCity3"
        name="propertyCity3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyCity3 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="propertyState3" class="text-sm font-medium text-gray-700 mb-1">
        State
      </label>
      <input 
        type="text"
        id="propertyState3"
        name="propertyState3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyState3 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="propertyZip3" class="text-sm font-medium text-gray-700 mb-1">
        ZIP
      </label>
      <input 
        type="text"
        id="propertyZip3"
        name="propertyZip3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyZip3 : '' %>"
      >
    </div>
  </div><!-- /Address row -->

  <!-- Additional Fields: Value, Status, Occupancy, Insurance, Rental Income -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
    <div class="flex flex-col">
      <label for="propertyValue3" class="text-sm font-medium text-gray-700 mb-1">
        Property Value ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="propertyValue3"
        name="propertyValue3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.PropertyValue3 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="propertyStatus3" class="text-sm font-medium text-gray-700 mb-1">
        Status (Sold, Pending, etc.)
      </label>
      <select id="propertyStatus3" name="propertyStatus3" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Sold" <%= (applicationData && applicationData.PropertyStatus3 === 'Sold') ? 'selected' : '' %>>Sold</option>
        <option value="PendingSale" <%= (applicationData && (applicationData.PropertyStatus3 === 'PendingSale' || applicationData.PropertyStatus3 === 'Pending')) ? 'selected' : '' %>>Pending Sale</option>
        <option value="Retained" <%= (applicationData && applicationData.PropertyStatus3 === 'Retained') ? 'selected' : '' %>>Retained</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="intendedOccupancy3" class="text-sm font-medium text-gray-700 mb-1">
        Intended Occupancy
      </label>
      <select 
        id="intendedOccupancy3"
        name="intendedOccupancy3"
        class="border border-gray-300 rounded-md p-2"
      >
        <option value="">-- Select --</option>
        <option value="PrimaryResidence" <%= (applicationData && (applicationData.IntendedOccupancy3 === 'PrimaryResidence' || applicationData.IntendedOccupancy3 === 'Primary')) ? 'selected' : '' %>>Primary Residence</option>
        <option value="SecondHome" <%= (applicationData && (applicationData.IntendedOccupancy3 === 'SecondHome' || applicationData.IntendedOccupancy3 === 'Second Home')) ? 'selected' : '' %>>Second Home</option>
        <option value="Investment" <%= (applicationData && applicationData.IntendedOccupancy3 === 'Investment') ? 'selected' : '' %>>Investment</option>
        <option value="Other" <%= (applicationData && applicationData.IntendedOccupancy3 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>
    <div class="flex flex-col">
      <label for="monthlyInsurance3" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Insurance/Taxes ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyInsurance3"
        name="monthlyInsurance3"
        class="border border-gray-300 rounded-md p-2"
        placeholder="If not in mortgage payment"
        value="<%= applicationData ? applicationData.MonthlyInsurance3 : '' %>"
      >
    </div>
    <div class="flex flex-col">
      <label for="monthlyRentalIncome3" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Rental Income ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyRentalIncome3"
        name="monthlyRentalIncome3"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyRentalIncome3 : '' %>"
      >
    </div>
  </div><!-- /Additional Fields -->

  <!-- Mortgage Loans on This Property (#3) -->
  <div class="mt-4">
    <label class="font-medium text-gray-800 mb-2 block">
      Mortgage Loans on This Property
    </label>
    <div class="flex items-center mb-3">
      <!-- If user checks => HasMortgageLoans3 = false => hide mortgage fields -->
      <input
        type="checkbox"
        id="chkNoMortgage3"
        name="chkNoMortgage3"
        class="mr-2"
        value="true"
        <%= (applicationData && applicationData.HasMortgageLoans3 === false) ? 'checked' : '' %>
      >
      <label for="chkNoMortgage3" class="text-sm text-gray-700">
        Does not apply
      </label>
    </div>

    <!-- Hide if HasMortgageLoans3 === false -->
    <div
      id="mortgageFields3"
      class="<%= (applicationData && applicationData.HasMortgageLoans3 === false) ? 'hidden' : '' %>"
    >
      <!-- One mortgage row for property #3 -->
      <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
        <!-- Creditor Name -->
        <div class="flex flex-col">
          <label for="creditorName3" class="text-sm font-medium text-gray-700 mb-1">
            Creditor Name
          </label>
          <input
            type="text"
            id="creditorName3"
            name="creditorName3"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.CreditorName3 : '' %>"
          >
        </div>
        <!-- Account Number -->
        <div class="flex flex-col">
          <label for="creditorAccount3" class="text-sm font-medium text-gray-700 mb-1">
            Account Number
          </label>
          <input
            type="text"
            id="creditorAccount3"
            name="creditorAccount3"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.CreditorAccount3 : '' %>"
          >
        </div>
        <!-- Monthly Mortgage Payment -->
        <div class="flex flex-col">
          <label for="mortgagePayment3" class="text-sm font-medium text-gray-700 mb-1">
            Monthly Mortgage Payment ($)
          </label>
          <input
            type="number"
            step="0.01"
            id="mortgagePayment3"
            name="mortgagePayment3"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.MortgagePayment3 : '' %>"
          >
        </div>
        <!-- Unpaid Balance -->
        <div class="flex flex-col">
          <label for="unpaidBalance3" class="text-sm font-medium text-gray-700 mb-1">
            Unpaid Balance ($)
          </label>
          <input
            type="number"
            step="0.01"
            id="unpaidBalance3"
            name="unpaidBalance3"
            class="border border-gray-300 rounded-md p-2"
            value="<%= applicationData ? applicationData.UnpaidBalance3 : '' %>"
          >
        </div>
        <!-- Pay off? -->
        <div class="flex items-center mt-5">
          <input
            type="checkbox"
            id="payOffMortgage3"
            name="payOffMortgage3"
            class="mr-2"
            <%= (applicationData && applicationData.PayOffMortgage3) ? 'checked' : '' %>
          >
          <label for="payOffMortgage3" class="text-sm text-gray-700">
            To be paid off?
          </label>
        </div>
        <!-- Mortgage Type (FHA, VA, etc.) -->
        <div class="flex flex-col">
          <label for="mortgageType3" class="text-sm font-medium text-gray-700 mb-1">
            Type
          </label>
          <select
            id="mortgageType3"
            name="mortgageType3"
            class="border border-gray-300 rounded-md p-2"
          >
            <option value="">-- Select --</option>
            <option value="FHA" <%= (applicationData && applicationData.MortgageType3 === 'FHA') ? 'selected' : '' %>>FHA</option>
            <option value="VA" <%= (applicationData && applicationData.MortgageType3 === 'VA') ? 'selected' : '' %>>VA</option>
            <option value="Conventional" <%= (applicationData && applicationData.MortgageType3 === 'Conventional') ? 'selected' : '' %>>Conventional</option>
            <option value="USDA-RD" <%= (applicationData && applicationData.MortgageType3 === 'USDA-RD') ? 'selected' : '' %>>USDA-RD</option>
            <option value="Other" <%= (applicationData && applicationData.MortgageType3 === 'Other') ? 'selected' : '' %>>Other</option>
          </select>
        </div>
      </div><!-- /One mortgage row -->
    </div><!-- /mortgageFields3 -->
  </div><!-- /Mortgage Loans on This Property (#3) -->
</div><!-- /property3Fields -->
</div><!-- /section3RealEstateFields -->
</div><!-- /urlaSection3 -->


    <!-- SECTION 4: Loan and Property Information -->
<div id="urlaSection4" class="urla-section hidden">
  <h6 class="font-semibold text-xl text-gray-800 mb-4">
    Section 4: Loan and Property Information
  </h6>
  <p class="text-sm text-gray-500 mb-4">
    This section asks about the loan's purpose and the property you want to purchase or refinance.
  </p>

  <!-- 4a. Loan and Property Information -->
  <h6 class="font-semibold text-lg text-gray-800 mb-2">
    4a. Loan and Property Information
  </h6>

  <div class="border border-gray-300 rounded-md p-4 mb-4">
    <!-- Loan Amount -->
    <div class="flex flex-col mb-4 w-full md:w-1/2">
      <label for="loanAmount4" class="text-sm font-medium text-gray-700 mb-1">
        Loan Amount ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="loanAmount4"
        name="loanAmount4"
        required
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 200000"
        value="<%= applicationData ? applicationData.LoanAmount4 : '' %>"
      >
    </div>

    <!-- Loan Purpose -->
    <div class="mb-4">
      <span class="text-sm font-medium text-gray-700 mb-1 block">
        Loan Purpose
      </span>
      <select id="loanPurpose4" name="loanPurpose4" required class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="Purchase" <%= (applicationData && applicationData.LoanPurpose4 === 'Purchase') ? 'selected' : '' %>>Purchase</option>
        <option value="Refinance" <%= (applicationData && applicationData.LoanPurpose4 === 'Refinance') ? 'selected' : '' %>>Refinance</option>
        <option value="Other" <%= (applicationData && applicationData.LoanPurpose4 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
      <!-- If "Other," show an input for more detail -->
      <div class="mt-2 ml-6">
        <input
          type="text"
          id="loanPurposeOtherDesc4"
          name="loanPurposeOtherDesc4"
          class="border border-gray-300 rounded-md p-2 w-full md:w-1/2"
          placeholder="Describe other purpose"
          value="<%= applicationData ? applicationData.LoanPurposeOtherDesc4 : '' %>"
        >
      </div>
    </div>

    <!-- Property Address -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
      <div class="flex flex-col">
        <label for="propertyStreet4" class="text-sm font-medium text-gray-700 mb-1">
          Property Street
        </label>
        <input
          type="text"
          id="propertyStreet4"
          name="propertyStreet4"
          required
          class="border border-gray-300 rounded-md p-2"
          value="<%= applicationData ? applicationData.PropertyStreet4 : '' %>"
        >
      </div>
      <div class="flex flex-col">
        <label for="propertyCity4" class="text-sm font-medium text-gray-700 mb-1">
          City
        </label>
        <input
          type="text"
          id="propertyCity4"
          name="propertyCity4"
          required
          class="border border-gray-300 rounded-md p-2"
          value="<%= applicationData ? applicationData.PropertyCity4 : '' %>"
        >
      </div>
      <div class="flex flex-col">
        <label for="propertyState4" class="text-sm font-medium text-gray-700 mb-1">
          State
        </label>
        <input
          type="text"
          id="propertyState4"
          name="propertyState4"
          required
          class="border border-gray-300 rounded-md p-2"
          value="<%= applicationData ? applicationData.PropertyState4 : '' %>"
        >
      </div>
      <div class="flex flex-col">
        <label for="propertyZip4" class="text-sm font-medium text-gray-700 mb-1">
          ZIP
        </label>
        <input
          type="text"
          id="propertyZip4"
          name="propertyZip4"
          required
          class="border border-gray-300 rounded-md p-2"
          value="<%= applicationData ? applicationData.PropertyZip4 : '' %>"
        >
      </div>
      <div class="flex flex-col">
        <label for="propertyCounty4" class="text-sm font-medium text-gray-700 mb-1">
          County
        </label>
        <input
          type="text"
          id="propertyCounty4"
          name="propertyCounty4"
          class="border border-gray-300 rounded-md p-2"
          value="<%= applicationData ? applicationData.PropertyCounty4 : '' %>"
        >
      </div>
      <div class="flex flex-col">
        <label for="propertyUnit4" class="text-sm font-medium text-gray-700 mb-1">
          Unit #
        </label>
        <input
          type="text"
          id="propertyUnit4"
          name="propertyUnit4"
          class="border border-gray-300 rounded-md p-2"
          value="<%= applicationData ? applicationData.PropertyUnit4 : '' %>"
        >
      </div>
    </div>

    <!-- Number of Units, Property Value, Occupancy, FHA Secondary Residence? -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
      <div class="flex flex-col">
        <label for="numberOfUnits4" class="text-sm font-medium text-gray-700 mb-1">
          Number of Units
        </label>
        <input
          type="number"
          id="numberOfUnits4"
          name="numberOfUnits4"
          class="border border-gray-300 rounded-md p-2"
          placeholder="e.g. 1, 2, 3..."
          value="<%= applicationData ? applicationData.NumberOfUnits4 : '' %>"
        >
      </div>
      <div class="flex flex-col">
        <label for="propertyValue4" class="text-sm font-medium text-gray-700 mb-1">
          Property Value ($)
        </label>
        <input
          type="number"
          step="0.01"
          id="propertyValue4"
          name="propertyValue4"
          class="border border-gray-300 rounded-md p-2"
          value="<%= applicationData ? applicationData.PropertyValue4 : '' %>"
        >
      </div>
    </div>

    <!-- Occupancy (Primary Residence, Second Home, Investment), FHA Secondary? -->
    <div class="mb-4">
      <span class="text-sm font-medium text-gray-700 mb-1 block">
        Occupancy
      </span>
      <select id="occupancy4" name="occupancy4" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="PrimaryResidence" <%= (applicationData && (applicationData.Occupancy4 === 'PrimaryResidence' || applicationData.Occupancy4 === 'Primary')) ? 'selected' : '' %>>Primary Residence</option>
        <option value="SecondHome" <%= (applicationData && applicationData.Occupancy4 === 'SecondHome') ? 'selected' : '' %>>Second Home</option>
        <option value="Investment" <%= (applicationData && applicationData.Occupancy4 === 'Investment') ? 'selected' : '' %>>Investment Property</option>
      </select>
      <div class="mt-2 flex items-center">
        <input
          type="checkbox"
          id="fhaSecondaryResidence4"
          name="fhaSecondaryResidence4"
          class="mr-2"
          <%= (applicationData && applicationData.FHASecondaryResidence4) ? 'checked' : '' %>
        >
        <label for="fhaSecondaryResidence4" class="text-sm text-gray-700">
          FHA Secondary Residence
        </label>
      </div>
    </div>

    <!-- 1) Mixed-Use Property -->
    <div class="mb-4">
      <p class="text-sm font-medium text-gray-700 mb-1">
        1. Mixed-Use Property
      </p>
      <p class="text-xs text-gray-500 mb-2">
        If you will occupy the property, will you set aside space within the property to operate your own business?
      </p>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="mixedUse4" 
            value="No" 
            class="mr-1"
            <%= (applicationData && applicationData.MixedUse4 === false) ? 'checked' : '' %>
          >
          NO
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="mixedUse4" 
            value="Yes" 
            class="mr-1"
            <%= (applicationData && applicationData.MixedUse4 === true) ? 'checked' : '' %>
          >
          YES
        </label>
      </div>
    </div>

    <!-- 2) Manufactured Home -->
    <div class="mb-4">
      <p class="text-sm font-medium text-gray-700 mb-1">
        2. Manufactured Home
      </p>
      <p class="text-xs text-gray-500 mb-2">
        Is the property a manufactured home? (e.g., a factory built dwelling on a permanent chassis)
      </p>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="manufacturedHome4" 
            value="No" 
            class="mr-1"
            <%= (applicationData && applicationData.ManufacturedHome4 === false) ? 'checked' : '' %>
          >
          NO
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="manufacturedHome4" 
            value="Yes" 
            class="mr-1"
            <%= (applicationData && applicationData.ManufacturedHome4 === true) ? 'checked' : '' %>
          >
          YES
        </label>
      </div>
    </div>

  </div><!-- /border box for 4a -->

<!-- 4b. Other New Mortgage Loans on the Property You Are Buying or Refinancing -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  4b. Other New Mortgage Loans on the Property You Are Buying or Refinancing
</h6>

<div class="flex items-center mb-3">
  <!-- If user checks => HasNewMortgages4b = false => hide the entire block below -->
  <input
    type="checkbox"
    id="chkNoMortgage4b"
    name="chkNoMortgage4b"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasNewMortgages4b === false) ? 'checked' : '' %>
  >
  <label for="chkNoMortgage4b" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- If HasNewMortgages4b === false => hide these fields by default -->
<div
  id="mortgage4bFields"
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasNewMortgages4b === false) ? 'hidden' : '' %>"
>

  <!-- Row #1 -->
  <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-4">
    <!-- Creditor Name -->
    <div class="flex flex-col">
      <label for="creditorName4b1" class="text-sm font-medium text-gray-700 mb-1">
        Creditor Name
      </label>
      <input
        type="text"
        id="creditorName4b1"
        name="creditorName4b1"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CreditorName4b1 : '' %>"
      >
    </div>
    <!-- Lien Type (radio) -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">
        Lien Type
      </label>
      <select id="lienType4b1" name="lienType4b1" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="FirstLien" <%= (applicationData && (applicationData.LienType4b1 === 'FirstLien' || applicationData.LienType4b1 === 'First Lien')) ? 'selected' : '' %>>First Lien</option>
        <option value="SubordinateLien" <%= (applicationData && (applicationData.LienType4b1 === 'SubordinateLien' || applicationData.LienType4b1 === 'Subordinate Lien')) ? 'selected' : '' %>>Subordinate Lien</option>
      </select>
    </div>
    <!-- Monthly Payment -->
    <div class="flex flex-col">
      <label for="monthlyPayment4b1" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment4b1"
        name="monthlyPayment4b1"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment4b1 : '' %>"
      >
    </div>
    <!-- Loan Amount/Drawn Amount -->
    <div class="flex flex-col">
      <label for="loanAmount4b1" class="text-sm font-medium text-gray-700 mb-1">
        Loan Amount / Amount to be Drawn ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="loanAmount4b1"
        name="loanAmount4b1"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.LoanAmount4b1 : '' %>"
      >
    </div>
    <!-- Credit Limit -->
    <div class="flex flex-col">
      <label for="creditLimit4b1" class="text-sm font-medium text-gray-700 mb-1">
        Credit Limit (if applicable)
      </label>
      <input
        type="number"
        step="0.01"
        id="creditLimit4b1"
        name="creditLimit4b1"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CreditLimit4b1 : '' %>"
      >
    </div>
  </div><!-- /Row #1 -->

  <!-- Row #2 -->
  <div class="grid grid-cols-1 md:grid-cols-5 gap-6">
    <!-- Creditor Name -->
    <div class="flex flex-col">
      <label for="creditorName4b2" class="text-sm font-medium text-gray-700 mb-1">
        Creditor Name
      </label>
      <input
        type="text"
        id="creditorName4b2"
        name="creditorName4b2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CreditorName4b2 : '' %>"
      >
    </div>
    <!-- Lien Type (radio) -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">
        Lien Type
      </label>
      <select id="lienType4b2" name="lienType4b2" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="FirstLien" <%= (applicationData && (applicationData.LienType4b2 === 'FirstLien' || applicationData.LienType4b2 === 'First Lien')) ? 'selected' : '' %>>First Lien</option>
        <option value="SubordinateLien" <%= (applicationData && (applicationData.LienType4b2 === 'SubordinateLien' || applicationData.LienType4b2 === 'Subordinate Lien')) ? 'selected' : '' %>>Subordinate Lien</option>
      </select>
    </div>
    <!-- Monthly Payment -->
    <div class="flex flex-col">
      <label for="monthlyPayment4b2" class="text-sm font-medium text-gray-700 mb-1">
        Monthly Payment ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="monthlyPayment4b2"
        name="monthlyPayment4b2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.MonthlyPayment4b2 : '' %>"
      >
    </div>
    <!-- Loan Amount/Drawn Amount -->
    <div class="flex flex-col">
      <label for="loanAmount4b2" class="text-sm font-medium text-gray-700 mb-1">
        Loan Amount / Amount to be Drawn ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="loanAmount4b2"
        name="loanAmount4b2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.LoanAmount4b2 : '' %>"
      >
    </div>
    <!-- Credit Limit -->
    <div class="flex flex-col">
      <label for="creditLimit4b2" class="text-sm font-medium text-gray-700 mb-1">
        Credit Limit (if applicable)
      </label>
      <input
        type="number"
        step="0.01"
        id="creditLimit4b2"
        name="creditLimit4b2"
        class="border border-gray-300 rounded-md p-2"
        value="<%= applicationData ? applicationData.CreditLimit4b2 : '' %>"
      >
    </div>
  </div><!-- /Row #2 -->
</div><!-- /mortgage4bFields -->

<!-- 4c. Rental Income on the Property You Want to Purchase -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  4c. Rental Income on the Property You Want to Purchase
  <span class="text-sm text-gray-600 ml-2">For Purchase Only</span>
</h6>

<p class="text-sm text-gray-600 mb-2">
  Complete if the property is a 2â€“4 Unit Primary Residence or an Investment Property.
</p>

<!-- "Does not apply" checkbox -->
<div class="flex items-center mb-3">
  <!-- If user checks => HasRentalIncome4c = false => hide entire block below -->
  <input 
    type="checkbox" 
    id="chkNoRental4c" 
    name="chkNoRental4c"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasRentalIncome4c === false) ? 'checked' : '' %>
  >
  <label for="chkNoRental4c" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- If HasRentalIncome4c === false => hide these fields -->
<div 
  id="rentalIncome4cFields"
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasRentalIncome4c === false) ? 'hidden' : '' %>"
>
  <!-- Row for "Expected Monthly Rental Income" -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
    <label for="expectedRentalIncome4c" class="text-sm font-medium text-gray-700 mb-1">
      Expected Monthly Rental Income
    </label>
    <input
      type="number"
      step="0.01"
      id="expectedRentalIncome4c"
      name="expectedRentalIncome4c"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.ExpectedRentalIncome4c : '' %>"
    >
  </div>

  <!-- Row for "Expected Net Monthly Rental Income" (for LENDER to calculate) -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <label for="netRentalIncome4c" class="text-sm font-medium text-gray-700 mb-1">
      For LENDER to calculate: Expected Net Monthly Rental Income
    </label>
    <input
      type="number"
      step="0.01"
      id="netRentalIncome4c"
      name="netRentalIncome4c"
      class="border border-gray-300 rounded-md p-2"
      value="<%= applicationData ? applicationData.NetRentalIncome4c : '' %>"
    >
  </div>
</div><!-- /rentalIncome4cFields -->

<!-- 4d. Gifts or Grants You Have Been Given or Will Receive for this Loan -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  4d. Gifts or Grants You Have Been Given or Will Receive for this Loan
</h6>
<p class="text-sm text-gray-600 mb-2">
  Include all gifts and grants below. Under "Source," choose from the sources listed (Community Nonprofit, Relative, State Agency, Employer, etc.).
</p>

<!-- "Does not apply" checkbox -->
<div class="flex items-center mb-3">
  <!-- If user checks => HasGiftsGrants4d = false => hide entire block below -->
  <input 
    type="checkbox" 
    id="chkNoGifts4d"
    name="chkNoGifts4d"
    class="mr-2"
    value="true"
    <%= (applicationData && applicationData.HasGiftsGrants4d === false) ? 'checked' : '' %>
  >
  <label for="chkNoGifts4d" class="text-sm text-gray-700">
    Does not apply
  </label>
</div>

<!-- If HasGiftsGrants4d === false => hide these fields -->
<div 
  id="gifts4dFields"
  class="border border-gray-300 rounded-md p-4 mb-6
         <%= (applicationData && applicationData.HasGiftsGrants4d === false) ? 'hidden' : '' %>"
>
  <!-- Row #1 -->
  <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-4">
    <!-- Asset Type (Cash Gift, Gift of Equity, Grant, etc.) -->
    <div class="flex flex-col">
      <label for="giftAssetType4d1" class="text-sm font-medium text-gray-700 mb-1">
        Asset Type
        <span class="text-xs text-gray-500 block">(e.g. Cash Gift, Gift of Equity, Grant)</span>
      </label>
      <select id="giftAssetType4d1" name="giftAssetType4d1" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="CashGift" <%= (applicationData && applicationData.GiftAssetType4d1 === 'CashGift') ? 'selected' : '' %>>Cash Gift</option>
        <option value="GiftOfEquity" <%= (applicationData && applicationData.GiftAssetType4d1 === 'GiftOfEquity') ? 'selected' : '' %>>Gift of Equity</option>
        <option value="Grant" <%= (applicationData && applicationData.GiftAssetType4d1 === 'Grant') ? 'selected' : '' %>>Grant</option>
      </select>
    </div>

    <!-- Deposited / Not Deposited (radio) -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">
        Deposited / Not Deposited
      </label>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="deposited4d1" 
            value="Deposited" 
            class="mr-1"
            <%= (applicationData && applicationData.Deposited4d1 === 'Deposited') ? 'checked' : '' %>
          >
          Deposited
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="deposited4d1" 
            value="Not Deposited" 
            class="mr-1"
            <%= (applicationData && applicationData.Deposited4d1 === 'Not Deposited') ? 'checked' : '' %>
          >
          Not Deposited
        </label>
      </div>
    </div>

    <!-- Source -->
    <div class="flex flex-col">
      <label for="giftSource4d1" class="text-sm font-medium text-gray-700 mb-1">
        Source
        <span class="text-xs text-gray-500 block">(use list above)</span>
      </label>
      <select id="giftSource4d1" name="giftSource4d1" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="CommunityNonprofit" <%= (applicationData && applicationData.GiftSource4d1 === 'CommunityNonprofit') ? 'selected' : '' %>>Community Nonprofit</option>
        <option value="Employer" <%= (applicationData && applicationData.GiftSource4d1 === 'Employer') ? 'selected' : '' %>>Employer</option>
        <option value="FederalAgency" <%= (applicationData && applicationData.GiftSource4d1 === 'FederalAgency') ? 'selected' : '' %>>Federal Agency</option>
        <option value="LocalAgency" <%= (applicationData && applicationData.GiftSource4d1 === 'LocalAgency') ? 'selected' : '' %>>Local Agency</option>
        <option value="Relative" <%= (applicationData && applicationData.GiftSource4d1 === 'Relative') ? 'selected' : '' %>>Relative</option>
        <option value="ReligiousNonprofit" <%= (applicationData && applicationData.GiftSource4d1 === 'ReligiousNonprofit') ? 'selected' : '' %>>Religious Nonprofit</option>
        <option value="StateAgency" <%= (applicationData && applicationData.GiftSource4d1 === 'StateAgency') ? 'selected' : '' %>>State Agency</option>
        <option value="UnmarriedPartner" <%= (applicationData && applicationData.GiftSource4d1 === 'UnmarriedPartner') ? 'selected' : '' %>>Unmarried Partner</option>
        <option value="Lender" <%= (applicationData && applicationData.GiftSource4d1 === 'Lender') ? 'selected' : '' %>>Lender</option>
        <option value="Other" <%= (applicationData && applicationData.GiftSource4d1 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>

    <!-- Cash or Market Value -->
    <div class="flex flex-col">
      <label for="giftValue4d1" class="text-sm font-medium text-gray-700 mb-1">
        Cash or Market Value ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="giftValue4d1"
        name="giftValue4d1"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 5000"
        value="<%= applicationData ? applicationData.GiftValue4d1 : '' %>"
      >
    </div>
  </div><!-- /Row #1 -->

  <!-- Row #2 -->
  <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
    <!-- Asset Type -->
    <div class="flex flex-col">
      <label for="giftAssetType4d2" class="text-sm font-medium text-gray-700 mb-1">
        Asset Type
        <span class="text-xs text-gray-500 block">(e.g. Cash Gift, Gift of Equity, Grant)</span>
      </label>
      <select id="giftAssetType4d2" name="giftAssetType4d2" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="CashGift" <%= (applicationData && applicationData.GiftAssetType4d2 === 'CashGift') ? 'selected' : '' %>>Cash Gift</option>
        <option value="GiftOfEquity" <%= (applicationData && applicationData.GiftAssetType4d2 === 'GiftOfEquity') ? 'selected' : '' %>>Gift of Equity</option>
        <option value="Grant" <%= (applicationData && applicationData.GiftAssetType4d2 === 'Grant') ? 'selected' : '' %>>Grant</option>
      </select>
    </div>

    <!-- Deposited / Not Deposited (radio) -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">
        Deposited / Not Deposited
      </label>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="deposited4d2" 
            value="Deposited" 
            class="mr-1"
            <%= (applicationData && applicationData.Deposited4d2 === 'Deposited') ? 'checked' : '' %>
          >
          Deposited
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="deposited4d2" 
            value="Not Deposited" 
            class="mr-1"
            <%= (applicationData && applicationData.Deposited4d2 === 'Not Deposited') ? 'checked' : '' %>
          >
          Not Deposited
        </label>
      </div>
    </div>

    <!-- Source -->
    <div class="flex flex-col">
      <label for="giftSource4d2" class="text-sm font-medium text-gray-700 mb-1">
        Source
        <span class="text-xs text-gray-500 block">(use list above)</span>
      </label>
      <select id="giftSource4d2" name="giftSource4d2" class="border border-gray-300 rounded-md p-2">
        <option value="">-- Select --</option>
        <option value="CommunityNonprofit" <%= (applicationData && applicationData.GiftSource4d2 === 'CommunityNonprofit') ? 'selected' : '' %>>Community Nonprofit</option>
        <option value="Employer" <%= (applicationData && applicationData.GiftSource4d2 === 'Employer') ? 'selected' : '' %>>Employer</option>
        <option value="FederalAgency" <%= (applicationData && applicationData.GiftSource4d2 === 'FederalAgency') ? 'selected' : '' %>>Federal Agency</option>
        <option value="LocalAgency" <%= (applicationData && applicationData.GiftSource4d2 === 'LocalAgency') ? 'selected' : '' %>>Local Agency</option>
        <option value="Relative" <%= (applicationData && applicationData.GiftSource4d2 === 'Relative') ? 'selected' : '' %>>Relative</option>
        <option value="ReligiousNonprofit" <%= (applicationData && applicationData.GiftSource4d2 === 'ReligiousNonprofit') ? 'selected' : '' %>>Religious Nonprofit</option>
        <option value="StateAgency" <%= (applicationData && applicationData.GiftSource4d2 === 'StateAgency') ? 'selected' : '' %>>State Agency</option>
        <option value="UnmarriedPartner" <%= (applicationData && applicationData.GiftSource4d2 === 'UnmarriedPartner') ? 'selected' : '' %>>Unmarried Partner</option>
        <option value="Lender" <%= (applicationData && applicationData.GiftSource4d2 === 'Lender') ? 'selected' : '' %>>Lender</option>
        <option value="Other" <%= (applicationData && applicationData.GiftSource4d2 === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>

    <!-- Cash or Market Value -->
    <div class="flex flex-col">
      <label for="giftValue4d2" class="text-sm font-medium text-gray-700 mb-1">
        Cash or Market Value ($)
      </label>
      <input
        type="number"
        step="0.01"
        id="giftValue4d2"
        name="giftValue4d2"
        class="border border-gray-300 rounded-md p-2"
        placeholder="e.g. 3000"
        value="<%= applicationData ? applicationData.GiftValue4d2 : '' %>"
      >
    </div>
  </div><!-- /Row #2 -->
</div><!-- /gifts4dFields -->
</div><!-- /urlaSection4 -->


    <!-- SECTION 5: Declarations -->
<div id="urlaSection5" class="urla-section hidden">
  <h6 class="font-semibold text-xl text-gray-800 mb-4">
    Section 5: Declarations
  </h6>
  <p class="text-sm text-gray-500 mb-4">
    This section asks you specific questions about the property, your funding, 
    and your past financial history.
  </p>

  <!-- 5a. About This Property and Your Money for This Loan -->
  <h6 class="font-semibold text-lg text-gray-800 mb-2">
    5a. About This Property and Your Money for This Loan
  </h6>
  <div class="border border-gray-300 rounded-md p-4 mb-6">

    <!-- A. Primary Residence? -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        A. Will you occupy the property as your primary residence?
      </label>
      <div class="flex items-center space-x-4">
        <!-- NO => false -->
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="primaryResidence5a" 
            value="false"
            <%= (applicationData && applicationData.PrimaryResidence5a === false) ? 'checked' : '' %>
          >
          <span class="ml-1">NO</span>
        </label>
        <!-- YES => true -->
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="primaryResidence5a" 
            value="true"
            <%= (applicationData && applicationData.PrimaryResidence5a === true) ? 'checked' : '' %>
          >
          <span class="ml-1">YES</span>
        </label>
      </div>

      <!-- If user picks YES => show ownership interest question -->
      <!-- We'll hide this by default, then show if PrimaryResidence5a===true via JS -->
      <div id="ownershipInterestContainer" class="hidden mt-3 ml-6">
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Have you had an ownership interest in another property in the last three years?
        </label>
        <div class="flex items-center space-x-4">
          <label class="flex items-center text-sm text-gray-700">
            <input 
              type="radio" 
              name="ownershipInterest5a" 
              value="false"
              <%= (applicationData && applicationData.OwnershipInterest5a === false) ? 'checked' : '' %>
            >
            <span class="ml-1">NO</span>
          </label>
          <label class="flex items-center text-sm text-gray-700">
            <input 
              type="radio" 
              name="ownershipInterest5a" 
              value="true"
              <%= (applicationData && applicationData.OwnershipInterest5a === true) ? 'checked' : '' %>
            >
            <span class="ml-1">YES</span>
          </label>
        </div>

        <!-- Follow-up fields if user picks YES -->
        <div id="ownershipDetailsContainer" class="hidden mt-3 ml-6">
          <p class="text-sm font-medium text-gray-700 mb-1">
            (1) What type of property did you own? 
            <span class="block text-xs text-gray-500">
              e.g. PR (primary), SR (FHA secondary), SH (second home), IP (investment)
            </span>
          </p>
          <input 
            type="text" 
            id="propertyType5a" 
            name="propertyType5a" 
            class="border border-gray-300 rounded-md p-2 w-full md:w-1/2"
            placeholder="e.g. PR / SR / SH / IP"
            value="<%= applicationData ? applicationData.PropertyType5a : '' %>"
          >

          <p class="text-sm font-medium text-gray-700 mt-3 mb-1">
            (2) How did you hold title to the property? 
            <span class="block text-xs text-gray-500">
              e.g. by yourself (S), with spouse (SP), or with another person (O)
            </span>
          </p>
          <input 
            type="text"
            id="titleHeld5a"
            name="titleHeld5a"
            class="border border-gray-300 rounded-md p-2 w-full md:w-1/2"
            placeholder="e.g. S / SP / O"
            value="<%= applicationData ? applicationData.TitleHeld5a : '' %>"
          >
        </div>
      </div>
    </div><!-- /A -->

    <!-- B. Family Relationship? -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        B. If this is a Purchase Transaction: Do you have a family relationship or 
        business affiliation with the seller of the property?
      </label>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="familyRelationship5a" 
            value="false"
            <%= (applicationData && applicationData.FamilyRelationship5a === false) ? 'checked' : '' %>
          >
          <span class="ml-1">NO</span>
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="familyRelationship5a" 
            value="true"
            <%= (applicationData && applicationData.FamilyRelationship5a === true) ? 'checked' : '' %>
          >
          <span class="ml-1">YES</span>
        </label>
      </div>
    </div><!-- /B -->

    <!-- C. Borrowing Money? -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        C. Are you borrowing any money for this real estate transaction that you have not disclosed?
      </label>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="borrowingMoney5a" 
            value="false"
            <%= (applicationData && applicationData.BorrowingMoney5a === false) ? 'checked' : '' %>
          >
          <span class="ml-1">NO</span>
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="borrowingMoney5a" 
            value="true"
            <%= (applicationData && applicationData.BorrowingMoney5a === true) ? 'checked' : '' %>
          >
          <span class="ml-1">YES</span>
        </label>
      </div>

      <!-- Show if yes -->
      <div id="borrowedAmountContainer" class="hidden mt-3 ml-6">
        <label for="borrowedAmount5a" class="block text-sm font-medium text-gray-700 mb-1">
          If YES, what is the amount of this money?
        </label>
        <input
          type="number"
          step="0.01"
          id="borrowedAmount5a"
          name="borrowedAmount5a"
          class="border border-gray-300 rounded-md p-2 w-full md:w-1/2"
          placeholder="e.g. 5000"
          value="<%= applicationData ? applicationData.BorrowedAmount5a : '' %>"
        >
      </div>
    </div><!-- /C -->

    <!-- D. Another Mortgage / New Credit? -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        D.1) Have you or will you be applying for a mortgage loan on another property 
        on or before closing this transaction that is not disclosed on this application?
      </label>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="anotherMortgage5a" 
            value="false"
            <%= (applicationData && applicationData.AnotherMortgage5a === false) ? 'checked' : '' %>
          >
          <span class="ml-1">NO</span>
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="anotherMortgage5a" 
            value="true"
            <%= (applicationData && applicationData.AnotherMortgage5a === true) ? 'checked' : '' %>
          >
          <span class="ml-1">YES</span>
        </label>
      </div>

      <label class="block text-sm font-medium text-gray-700 mt-3 mb-1">
        D.2) Have you or will you be applying for any new credit 
        (installment loan, credit card, etc.) on or before closing this loan 
        that is not disclosed on this application?
      </label>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="newCredit5a" 
            value="false"
            <%= (applicationData && applicationData.NewCredit5a === false) ? 'checked' : '' %>
          >
          <span class="ml-1">NO</span>
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="newCredit5a" 
            value="true"
            <%= (applicationData && applicationData.NewCredit5a === true) ? 'checked' : '' %>
          >
          <span class="ml-1">YES</span>
        </label>
      </div>
    </div><!-- /D -->

    <!-- E. Priority Lien? -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        E. Will this property be subject to a lien that could take priority over 
        the first mortgage lien (e.g. a clean energy lien paid through property taxes)?
      </label>
      <div class="flex items-center space-x-4">
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="priorityLien5a" 
            value="false"
            <%= (applicationData && applicationData.PriorityLien5a === false) ? 'checked' : '' %>
          >
          <span class="ml-1">NO</span>
        </label>
        <label class="flex items-center text-sm text-gray-700">
          <input 
            type="radio" 
            name="priorityLien5a" 
            value="true"
            <%= (applicationData && applicationData.PriorityLien5a === true) ? 'checked' : '' %>
          >
          <span class="ml-1">YES</span>
        </label>
      </div>
    </div><!-- /E -->

  </div><!-- /border container for 5a -->
  <!-- 5b. About Your Finances -->
<h6 class="font-semibold text-lg text-gray-800 mt-6 mb-2">
  5b. About Your Finances
</h6>

<!-- F. Are you a co-signer or guarantor on any debt not disclosed? -->
<div class="border border-gray-300 rounded-md p-4 mb-6">
<div class="mb-4">
  <label class="text-sm text-gray-700 block mb-1">
    F. Are you a co-signer or guarantor on any debt or loan not disclosed on this application?
  </label>
  <div class="flex space-x-4">
    <label class="flex items-center">
      <input type="radio" name="coSignerGuarantor5b" value="true" class="mr-1"
        <%= (applicationData && applicationData.CoSignerGuarantor5b === true) ? 'checked' : '' %> />
      Yes
    </label>
    <label class="flex items-center">
      <input type="radio" name="coSignerGuarantor5b" value="false" class="mr-1"
        <%= (applicationData && applicationData.CoSignerGuarantor5b === false) ? 'checked' : '' %> />
      No
    </label>
  </div>
</div>

<!-- G. Any outstanding judgments? -->
<div class="mb-4">
  <label class="text-sm text-gray-700 block mb-1">
    G. Are there any outstanding judgments against you?
  </label>
  <div class="flex space-x-4">
    <label class="flex items-center">
      <input type="radio" name="judgments5b" value="true" class="mr-1"
        <%= (applicationData && applicationData.Judgments5b === true) ? 'checked' : '' %> />
      Yes
    </label>
    <label class="flex items-center">
      <input type="radio" name="judgments5b" value="false" class="mr-1"
        <%= (applicationData && applicationData.Judgments5b === false) ? 'checked' : '' %> />
      No
    </label>
  </div>
</div>

<!-- H. Delinquent on Federal debt? -->
<div class="mb-4">
  <label class="text-sm text-gray-700 block mb-1">
    H. Are you currently delinquent or in default on a Federal debt?
  </label>
  <div class="flex space-x-4">
    <label class="flex items-center">
      <input type="radio" name="delinquentFederalDebt5b" value="true" class="mr-1"
        <%= (applicationData && applicationData.DelinquentFederalDebt5b === true) ? 'checked' : '' %> />
      Yes
    </label>
    <label class="flex items-center">
      <input type="radio" name="delinquentFederalDebt5b" value="false" class="mr-1"
        <%= (applicationData && applicationData.DelinquentFederalDebt5b === false) ? 'checked' : '' %> />
      No
    </label>
  </div>
</div>

<!-- I. Party to a lawsuit? -->
<div class="mb-4">
  <label class="text-sm text-gray-700 block mb-1">
    I. Are you a party to a lawsuit which may cause personal financial liability?
  </label>
  <div class="flex space-x-4">
    <label class="flex items-center">
      <input type="radio" name="lawsuitLiability5b" value="true" class="mr-1"
        <%= (applicationData && applicationData.LawsuitLiability5b === true) ? 'checked' : '' %> />
      Yes
    </label>
    <label class="flex items-center">
      <input type="radio" name="lawsuitLiability5b" value="false" class="mr-1"
        <%= (applicationData && applicationData.LawsuitLiability5b === false) ? 'checked' : '' %> />
      No
    </label>
  </div>
</div>

<!-- J. Conveyed title in lieu of foreclosure? -->
<div class="mb-4">
  <label class="text-sm text-gray-700 block mb-1">
    J. Have you conveyed title to any property in lieu of foreclosure in the past 7 years?
  </label>
  <div class="flex space-x-4">
    <label class="flex items-center">
      <input type="radio" name="conveyTitleInLieu5b" value="true" class="mr-1"
        <%= (applicationData && applicationData.ConveyTitleInLieu5b === true) ? 'checked' : '' %> />
      Yes
    </label>
    <label class="flex items-center">
      <input type="radio" name="conveyTitleInLieu5b" value="false" class="mr-1"
        <%= (applicationData && applicationData.ConveyTitleInLieu5b === false) ? 'checked' : '' %> />
      No
    </label>
  </div>
</div>

<!-- K. Pre-foreclosure or short sale? -->
<div class="mb-4">
  <label class="text-sm text-gray-700 block mb-1">
    K. Within the past 7 years, have you completed a pre-foreclosure sale or short sale?
  </label>
  <div class="flex space-x-4">
    <label class="flex items-center">
      <input type="radio" name="preforeclosureSale5b" value="true" class="mr-1"
        <%= (applicationData && applicationData.PreforeclosureSale5b === true) ? 'checked' : '' %> />
      Yes
    </label>
    <label class="flex items-center">
      <input type="radio" name="preforeclosureSale5b" value="false" class="mr-1"
        <%= (applicationData && applicationData.PreforeclosureSale5b === false) ? 'checked' : '' %> />
      No
    </label>
  </div>
</div>

<!-- L. Property foreclosed? -->
<div class="mb-4">
  <label class="text-sm text-gray-700 block mb-1">
    L. Have you had property foreclosed upon in the last 7 years?
  </label>
  <div class="flex space-x-4">
    <label class="flex items-center">
      <input type="radio" name="foreclosedProperty5b" value="true" class="mr-1"
        <%= (applicationData && applicationData.ForeclosedProperty5b === true) ? 'checked' : '' %> />
      Yes
    </label>
    <label class="flex items-center">
      <input type="radio" name="foreclosedProperty5b" value="false" class="mr-1"
        <%= (applicationData && applicationData.ForeclosedProperty5b === false) ? 'checked' : '' %> />
      No
    </label>
  </div>
</div>

<!-- M. Declared bankruptcy? If yes, show checkboxes for Chapter 7, 11, 12, 13 -->
<div class="mb-4">
  <label class="text-sm text-gray-700 block mb-1">
    M. Have you declared bankruptcy within the past 7 years?
  </label>
  <div class="flex space-x-4">
    <label class="flex items-center">
      <input 
        type="radio" 
        name="declaredBankruptcy5b" 
        value="true" 
        class="mr-1"
        <%= (applicationData && applicationData.DeclaredBankruptcy5b === true) ? 'checked' : '' %> 
      />
      Yes
    </label>
    <label class="flex items-center">
      <input 
        type="radio" 
        name="declaredBankruptcy5b" 
        value="false" 
        class="mr-1"
        <%= (applicationData && applicationData.DeclaredBankruptcy5b === false) ? 'checked' : '' %> 
      />
      No
    </label>
  </div>
</div>

<!-- Show bankruptcy type checkboxes only if 'declaredBankruptcy5b' is true -->
<div 
  id="bankruptcyTypesContainer" 
  class="<%= (applicationData && applicationData.DeclaredBankruptcy5b === true) ? '' : 'hidden' %> border p-3 mb-4"
>
  <p class="text-sm text-gray-700 font-semibold mb-2">If YES, identify the type(s):</p>
  <div class="flex items-center mb-2">
    <input 
      type="checkbox" 
      id="bankruptChapter7" 
      name="bankruptChapter7" 
      value="true" 
      class="mr-2"
      <%= (applicationData && applicationData.BankruptChapter7) ? 'checked' : '' %> 
    />
    <label for="bankruptChapter7" class="text-sm text-gray-700">Chapter 7</label>
  </div>
  <div class="flex items-center mb-2">
    <input 
      type="checkbox" 
      id="bankruptChapter11" 
      name="bankruptChapter11" 
      value="true" 
      class="mr-2"
      <%= (applicationData && applicationData.BankruptChapter11) ? 'checked' : '' %> 
    />
    <label for="bankruptChapter11" class="text-sm text-gray-700">Chapter 11</label>
  </div>
  <div class="flex items-center mb-2">
    <input 
      type="checkbox" 
      id="bankruptChapter12" 
      name="bankruptChapter12" 
      value="true" 
      class="mr-2"
      <%= (applicationData && applicationData.BankruptChapter12) ? 'checked' : '' %> 
    />
    <label for="bankruptChapter12" class="text-sm text-gray-700">Chapter 12</label>
  </div>
  <div class="flex items-center">
    <input 
      type="checkbox" 
      id="bankruptChapter13" 
      name="bankruptChapter13" 
      value="true" 
      class="mr-2"
      <%= (applicationData && applicationData.BankruptChapter13) ? 'checked' : '' %> 
    />
    <label for="bankruptChapter13" class="text-sm text-gray-700">Chapter 13</label>
  </div>
</div>
</div>

</div> <!-- End Section 5-->

<!-- SECTION 6: Acknowledgments and Agreements -->
<div id="urlaSection6" class="urla-section hidden">
  <h6 class="font-semibold text-xl text-gray-800 mb-4">
    Section 6: Acknowledgments and Agreements
  </h6>
  <p class="text-sm text-gray-500 mb-4">
    Please read and acknowledge the following statements regarding your loan application.
  </p>

  <div class="border border-gray-300 rounded-md p-4 mb-6">
    <div class="mb-4">
      <div class="flex items-start">
        <input 
          type="checkbox" 
          id="certifyInfoTrue" 
          name="certifyInfoTrue" 
          class="mt-1 mr-3"
          <%= (applicationData && applicationData.CertifyInfoTrue) ? 'checked' : '' %>
        />
        <label for="certifyInfoTrue" class="text-sm text-gray-700">
          I certify that all information provided in this application is true, complete, and correct to the best of my knowledge. I understand that making false or fraudulent statements may result in criminal penalties and civil liability.
        </label>
      </div>
    </div>

    <div class="mb-4">
      <div class="flex items-start">
        <input 
          type="checkbox" 
          id="authorizeVerification" 
          name="authorizeVerification" 
          class="mt-1 mr-3"
          <%= (applicationData && applicationData.AuthorizeVerification) ? 'checked' : '' %>
        />
        <label for="authorizeVerification" class="text-sm text-gray-700">
          I authorize the lender to verify the information provided in this application, including employment, income, assets, and credit history.
        </label>
      </div>
    </div>

    <div class="mb-4">
      <div class="flex items-start">
        <input 
          type="checkbox" 
          id="consentCreditCheck" 
          name="consentCreditCheck" 
          class="mt-1 mr-3"
          <%= (applicationData && applicationData.ConsentCreditCheck) ? 'checked' : '' %>
        />
        <label for="consentCreditCheck" class="text-sm text-gray-700">
          I consent to the lender obtaining a credit report and using my credit information in connection with this application and any updates, renewals, or extensions of credit.
        </label>
      </div>
    </div>

    <div class="mb-4">
      <div class="flex items-start">
        <input 
          type="checkbox" 
          id="acknowledgeOccupancy" 
          name="acknowledgeOccupancy" 
          class="mt-1 mr-3"
          <%= (applicationData && applicationData.AcknowledgeOccupancy) ? 'checked' : '' %>
        />
        <label for="acknowledgeOccupancy" class="text-sm text-gray-700">
          I acknowledge that if I indicated that I will occupy the property as my primary residence, I will do so within 60 days of closing and will continue to occupy it for at least one year.
        </label>
      </div>
    </div>
  </div>
</div> <!-- End Section 6 -->

<!-- SECTION 7: Military Service -->
<div id="urlaSection7" class="urla-section hidden">
  <h6 class="font-semibold text-xl text-gray-800 mb-4">
    Section 7: Military Service
  </h6>
  <p class="text-sm text-gray-500 mb-4">
    This section asks about your (or your deceased spouse's) military service.
  </p>

  <div class="border border-gray-300 rounded-md p-4 mb-6">
    <label class="text-sm text-gray-700 block mb-2 font-medium">
      Military Service â€“ Did you (or your deceased spouse) ever serve, or are you currently serving, 
      in the United States Armed Forces?
    </label>
    <!-- YES / NO radio -->
    <div class="flex items-center space-x-6 mb-4">
      <label class="flex items-center">
        <input 
          type="radio"
          name="hasMilitaryService7"
          value="false"
          class="mr-1"
          <%= (applicationData && applicationData.HasMilitaryService7 === false) ? "checked" : "" %>
        >
        No
      </label>
      <label class="flex items-center">
        <input 
          type="radio"
          name="hasMilitaryService7"
          value="true"
          class="mr-1"
          <%= (applicationData && applicationData.HasMilitaryService7 === true) ? "checked" : "" %>
        >
        Yes
      </label>
    </div>

    <!-- 
      If 'Yes' => show the sub-options. We'll store each sub-option as a boolean 
      or date for the "Projected Expiration Date" 
    -->
    <div 
      id="militaryDetails7" 
      class="<%= (applicationData && applicationData.HasMilitaryService7 === true) ? "" : "hidden" %> p-3 border rounded"
    >
      <p class="text-sm text-gray-700 mb-2">
        If YES, check all that apply:
      </p>

      <!-- 1) Currently serving on active duty with projected expiration date -->
      <div class="mb-2 flex items-center">
        <input 
          type="checkbox" 
          id="isCurrentlyActiveDuty7" 
          name="isCurrentlyActiveDuty7"
          value="true"
          class="mr-2"
          <%= (applicationData && applicationData.IsCurrentlyActiveDuty7) ? "checked" : "" %>
        >
        <label for="isCurrentlyActiveDuty7" class="text-sm text-gray-700">
          Currently serving on active duty
        </label>
      </div>

      <!-- Projected Expiration Date of service/tour -->
      <div class="ml-6 flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-2 mb-3">
        <label for="projectedExpirationDate7" class="text-sm text-gray-700">
          Projected Expiration Date of Service/Tour
        </label>
        <input 
          type="date"
          id="projectedExpirationDate7"
          name="projectedExpirationDate7"
          class="border border-gray-300 rounded p-2 text-sm"
          value="<%= applicationData && applicationData.ProjectedExpirationDate7 
                    ? applicationData.ProjectedExpirationDate7.toISOString().split('T')[0] 
                    : "" %>"
        >
      </div>

      <!-- 2) Retired/Discharged/Separated -->
      <div class="mb-2 flex items-center">
        <input 
          type="checkbox" 
          id="isRetiredDischarged7" 
          name="isRetiredDischarged7"
          value="true"
          class="mr-2"
          <%= (applicationData && applicationData.IsRetiredDischarged7) ? "checked" : "" %>
        >
        <label for="isRetiredDischarged7" class="text-sm text-gray-700">
          Currently retired, discharged, or separated from service
        </label>
      </div>

      <!-- 3) Reserve or Nat'l Guard (non-activated) -->
      <div class="mb-2 flex items-center">
        <input 
          type="checkbox" 
          id="isReserveOrGuard7" 
          name="isReserveOrGuard7"
          value="true"
          class="mr-2"
          <%= (applicationData && applicationData.IsReserveOrGuard7) ? "checked" : "" %>
        >
        <label for="isReserveOrGuard7" class="text-sm text-gray-700">
          Only period of service was as a non-activated member of the Reserve or National Guard
        </label>
      </div>

      <!-- 4) Surviving Spouse -->
      <div class="mb-2 flex items-center">
        <input 
          type="checkbox" 
          id="isSurvivingSpouse7" 
          name="isSurvivingSpouse7"
          value="true"
          class="mr-2"
          <%= (applicationData && applicationData.IsSurvivingSpouse7) ? "checked" : "" %>
        >
        <label for="isSurvivingSpouse7" class="text-sm text-gray-700">
          Surviving spouse
        </label>
      </div>
    </div>
  </div>
</div>

<!-- SECTION 8: Demographic Information -->
<div id="urlaSection8" class="urla-section hidden">
  <h6 class="font-semibold text-xl text-gray-800 mb-4">
    Section 8: Demographic Information
  </h6>

  <p class="text-sm text-gray-600 mb-4">
    The purpose of collecting this information is to help ensure that all applicants are treated fairly...
    <!-- The relevant disclosure text, truncated here for brevity -->
  </p>

  <!-- Ethnicity Section -->
  <div class="mb-4 border p-4">
    <label class="font-semibold text-gray-800 block mb-2">
      Ethnicity (Check one or more):
    </label>
    
    <div class="flex items-center mb-2">
      <input 
        type="checkbox" 
        id="ethHispanicLatino8" 
        name="ethHispanicLatino8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.EthHispanicLatino8) ? 'checked' : '' %> 
      >
      <label for="ethHispanicLatino8" class="text-sm text-gray-700">
        Hispanic or Latino
      </label>
    </div>

    <!-- Sub-options if user picks Hispanic/Latino -->
    <div class="ml-6">
      <div class="flex items-center mb-2">
        <input 
          type="checkbox" 
          id="ethMexican8" 
          name="ethMexican8" 
          value="true"
          class="mr-2"
          <%= (applicationData && applicationData.EthMexican8) ? 'checked' : '' %>
        >
        <label for="ethMexican8" class="text-sm text-gray-700">Mexican</label>
      </div>
      <div class="flex items-center mb-2">
        <input 
          type="checkbox" 
          id="ethPuertoRican8" 
          name="ethPuertoRican8" 
          value="true"
          class="mr-2"
          <%= (applicationData && applicationData.EthPuertoRican8) ? 'checked' : '' %>
        >
        <label for="ethPuertoRican8" class="text-sm text-gray-700">Puerto Rican</label>
      </div>
      <div class="flex items-center mb-2">
        <input 
          type="checkbox" 
          id="ethCuban8" 
          name="ethCuban8" 
          value="true"
          class="mr-2"
          <%= (applicationData && applicationData.EthCuban8) ? 'checked' : '' %>
        >
        <label for="ethCuban8" class="text-sm text-gray-700">Cuban</label>
      </div>
      <div class="flex items-center mb-2">
        <input 
          type="checkbox" 
          id="ethOtherHispanic8" 
          name="ethOtherHispanic8" 
          value="true"
          class="mr-2"
          <%= (applicationData && applicationData.EthOtherHispanic8) ? 'checked' : '' %>
        >
        <label for="ethOtherHispanic8" class="text-sm text-gray-700">
          Other Hispanic or Latino - Print origin:
        </label>
      </div>
      <input
        type="text"
        id="ethOtherHispanicOrigin8"
        name="ethOtherHispanicOrigin8"
        class="border rounded p-1 text-sm w-1/2 ml-6"
        placeholder="e.g. Argentinian, Colombian, etc."
        value="<%= applicationData ? applicationData.EthOtherHispanicOrigin8 : '' %>"
      >
    </div>
    
    <div class="flex items-center mb-2 mt-3">
      <input 
        type="checkbox" 
        id="ethNotHispanic8" 
        name="ethNotHispanic8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.EthNotHispanic8) ? 'checked' : '' %> 
      >
      <label for="ethNotHispanic8" class="text-sm text-gray-700">
        Not Hispanic or Latino
      </label>
    </div>
    <div class="flex items-center mb-2">
      <input 
        type="checkbox" 
        id="ethNoInfo8" 
        name="ethNoInfo8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.EthNoInfo8) ? 'checked' : '' %> 
      >
      <label for="ethNoInfo8" class="text-sm text-gray-700">
        I do not wish to provide this information
      </label>
    </div>
  </div> <!-- /Ethnicity -->

  <!-- Sex Section -->
  <div class="mb-4 border p-4">
    <label class="font-semibold text-gray-800 block mb-2">
      Sex:
    </label>
    <div class="flex items-center mb-2">
      <input 
        type="radio" 
        name="sex8" 
        id="sexFemale8" 
        value="Female" 
        class="mr-2"
        <%= (applicationData && applicationData.Sex8 === 'Female') ? 'checked' : '' %> 
      >
      <label for="sexFemale8" class="text-sm text-gray-700">Female</label>
    </div>
    <div class="flex items-center mb-2">
      <input 
        type="radio" 
        name="sex8" 
        id="sexMale8" 
        value="Male" 
        class="mr-2"
        <%= (applicationData && applicationData.Sex8 === 'Male') ? 'checked' : '' %> 
      >
      <label for="sexMale8" class="text-sm text-gray-700">Male</label>
    </div>
    <div class="flex items-center mb-2">
      <input 
        type="radio" 
        name="sex8" 
        id="sexNoInfo8" 
        value="PreferNotToProvide" 
        class="mr-2"
        <%= (applicationData && (applicationData.Sex8 === 'NoInfo' || applicationData.Sex8 === 'PreferNotToProvide')) ? 'checked' : '' %>
      >
      <label for="sexNoInfo8" class="text-sm text-gray-700">
        I do not wish to provide this information
      </label>
    </div>
  </div>

  <!-- Race Section -->
  <div class="mb-4 border p-4">
    <label class="font-semibold text-gray-800 block mb-2">
      Race (Check one or more):
    </label>
    
    <!-- Example for a few races -->
    <div class="flex items-center mb-2">
      <input 
        type="checkbox" 
        id="raceAmericanIndian8" 
        name="raceAmericanIndian8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.RaceAmericanIndian8) ? 'checked' : '' %> 
      >
      <label for="raceAmericanIndian8" class="text-sm text-gray-700">
        American Indian or Alaska Native
      </label>
      <!-- optional print tribe -->
      <input
        type="text"
        id="americanIndianTribe8"
        name="americanIndianTribe8"
        class="border rounded p-1 text-sm ml-2"
        placeholder="Tribe name"
        value="<%= applicationData ? applicationData.AmericanIndianTribe8 : '' %>"
      >
    </div>
    <div class="flex items-center mb-2">
      <input 
        type="checkbox" 
        id="raceAsian8" 
        name="raceAsian8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.RaceAsian8) ? 'checked' : '' %> 
      >
      <label for="raceAsian8" class="text-sm text-gray-700">
        Asian
      </label>
      <!-- optional text for "Print race" if "Other Asian" -->
      <input
        type="text"
        id="otherAsianPrint8"
        name="otherAsianPrint8"
        class="border rounded p-1 text-sm ml-2"
        placeholder="e.g. Hmong, Pakistani..."
        value="<%= applicationData ? applicationData.OtherAsianPrint8 : '' %>"
      >
    </div>
    <div class="flex items-center mb-2">
      <input 
        type="checkbox" 
        id="raceBlack8" 
        name="raceBlack8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.RaceBlack8) ? 'checked' : '' %> 
      >
      <label for="raceBlack8" class="text-sm text-gray-700">
        Black or African American
      </label>
    </div>
    <div class="flex items-center mb-2">
      <input 
        type="checkbox" 
        id="raceHawaiian8" 
        name="raceHawaiian8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.RaceHawaiian8) ? 'checked' : '' %> 
      >
      <label for="raceHawaiian8" class="text-sm text-gray-700">
        Native Hawaiian or Other Pacific Islander
      </label>
      <input
        type="text"
        id="otherPacIslanderPrint8"
        name="otherPacIslanderPrint8"
        class="border rounded p-1 text-sm ml-2"
        placeholder="e.g. Fijian, Tongan..."
        value="<%= applicationData ? applicationData.OtherPacIslanderPrint8 : '' %>"
      >
    </div>
    <div class="flex items-center mb-2">
      <input 
        type="checkbox" 
        id="raceWhite8" 
        name="raceWhite8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.RaceWhite8) ? 'checked' : '' %> 
      >
      <label for="raceWhite8" class="text-sm text-gray-700">
        White
      </label>
    </div>
    <div class="flex items-center mb-2">
      <input 
        type="checkbox" 
        id="raceNoInfo8" 
        name="raceNoInfo8" 
        value="true" 
        class="mr-2"
        <%= (applicationData && applicationData.RaceNoInfo8) ? 'checked' : '' %> 
      >
      <label for="raceNoInfo8" class="text-sm text-gray-700">
        I do not wish to provide this information
      </label>
    </div>

  </div><!-- /Race -->

</div><!-- /Section 8 -->




    <!-- Document Upload Section -->
    <div class="mb-8 bg-white rounded-lg p-4 border border-gray-200">
      <h6 class="font-semibold text-xl text-gray-800 mb-4">Upload Supporting Documents</h6>
      <p class="text-sm text-gray-500 mb-4">Upload optional documents (ID, pay stubs, W-2s) here. You can add these now or later. <span class="text-gray-400">(PDF, JPG, PNG)</span></p>
      <div>
        <label class="block mb-2 text-sm font-medium text-gray-700" for="loanDocs">Upload Documents <span class="text-gray-400 font-normal">(PDF, JPG, PNG)</span></label>
        <input 
          class="block w-full text-sm text-gray-800 border border-gray-300 rounded-md p-2 cursor-pointer 
                focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
          id="loanDocs"
          name="loanDocs"
          type="file"
          multiple>
      </div>
    </div>

    <!-- Form Buttons -->
    <div class="flex space-x-4">
      <button 
        type="button" 
        class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-loan-details">
        Save
      </button>
      <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
    </div>
  </div><!-- .loan-application-form -->
</li>

    
              <!-- Consolidated Authorizations & Consent Task -->
              <li class="task-item border rounded-lg transition" data-task-id="authorizations" data-task-status="<%= authorizationsData && authorizationsData.ApplicationStatus ? authorizationsData.ApplicationStatus : 'Not Started' %>">
                <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
                  <div>
                    <h4 class="font-bold text-gray-800 mb-1">Consolidated Authorizations & Consent</h4>
                    <p class="text-sm text-gray-600">Review and e-sign authorizations for credit checks, tax transcripts, etc.</p>
                  </div>
                  <div class="flex items-center space-x-2">
                    <!-- Arrow Icon -->
                    <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
                         fill="currentColor" viewBox="0 0 20 20">
                      <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
                    </svg>
              
                    <!-- Status Label -->
                    <% const authStatus = getStatusInfo(authorizationsData ? authorizationsData.ApplicationStatus : null); %>
                    <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= authStatus.class %>">
                      <%= authStatus.display %>
                    </span>
                  </div>
                </div>
                            
                <div class="authorization-form hidden p-4 border-t">
                  <h5 class="text-lg font-bold text-blue-800 mb-4">Review & E-Sign Authorizations</h5>
                  <p class="text-sm text-gray-700 mb-4">
                    Please review the authorization documents below and e-sign to give consent for credit checks, verifications, and tax transcripts.
                  </p>
              
                  <!-- Document Viewer Placeholder -->
                  <div class="mb-8 bg-white rounded-lg p-4 border border-gray-200 h-64 overflow-auto">
                    <h6 class="font-semibold text-xl text-gray-800 mb-4">Authorization Packet</h6>
                    <p class="text-sm text-gray-600 mb-4">Scroll through the authorization forms here. For demonstration, this is just placeholder text. In production, integrate a document viewer (PDF, etc.).</p>
                    <div class="text-sm text-gray-500">
                      <!-- Placeholder long text -->
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eu iaculis lacus. Curabitur sollicitudin felis in orci malesuada, at gravida erat cursus. ... (etc.)</p>
                    </div>
                  </div>
              
                  <!-- E-Signature & Acknowledgment -->
                  <div class="mb-8 bg-white rounded-lg p-4 border border-gray-200">
                    <h6 class="font-semibold text-xl text-gray-800 mb-4">E-Signature & Consent</h6>
                    <div class="flex flex-col mb-4">
                      <label for="eSignature" class="block text-sm font-medium text-gray-700 mb-1">
                        E-Signature <span class="text-red-500">*</span>
                      </label>
                      <input 
                        type="text" 
                        id="eSignature" 
                        name="eSignature"
                        placeholder="Type your full name as e-signature"
                        class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
                               focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
                        value="<%= authorizationsData && authorizationsData.ESignature ? authorizationsData.ESignature : '' %>">
                    </div>
              
                    <div class="flex items-start mb-4">
                      <input 
                        type="checkbox" 
                        id="authorizationsAgree" 
                        name="authorizationsAgree"
                        class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                        <%= authorizationsData && authorizationsData.HasAgreed ? 'checked' : '' %>>
                      <label for="authorizationsAgree" class="ml-2 text-sm text-gray-700">
                        I have read and agree to the terms above, including the use of my credit score and potential impacts if creditworthiness changes.
                      </label>
                    </div>
                  </div>
              
                  <div class="flex space-x-4">
                    <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-authorizations-consent">
                      Save & Continue
                    </button>
                    <button type="button" class="bg-gray-300 text-gray-800 px-6 py-2 rounded-md font-semibold hover:bg-gray-400 transition close-form">
                      Go Back
                    </button>
                    <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
                  </div>
                </div>
              </li>
    
              <!-- Identification Documents Task -->
              <li class="task-item border rounded-lg transition" data-task-id="identification" data-task-status="<%= identificationData && identificationData.ApplicationStatus ? identificationData.ApplicationStatus : 'Not Started' %>">
                <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
                  <div>
                    <h4 class="font-bold text-gray-800 mb-1">Identification Documents</h4>
                    <p class="text-sm text-gray-600">Upload a government-issued ID (driverâ€™s license, passport).</p>
                  </div>
                  <div class="flex items-center space-x-2">
                    <!-- Arrow Icon -->
                    <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
                         fill="currentColor" viewBox="0 0 20 20">
                      <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
                    </svg>
              
                    <!-- Status Label -->
                    <% const idStatus = getStatusInfo(identificationData ? identificationData.ApplicationStatus : null); %>
                    <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= idStatus.class %>">
                      <%= idStatus.display %>
                    </span>
                  </div>
                </div>
              
                <div class="identification-form hidden p-4 border-t">
                  <h5 class="text-lg font-bold text-blue-800 mb-4">Upload Your Identification</h5>
                  <p class="text-sm text-gray-700 mb-4">
                    Please provide a clear PDF or image of your government-issued ID. You can save now and come back later.
                  </p>
              
                  <!-- File Upload Section -->
                  <div class="mb-8 bg-white rounded-lg p-4 border border-gray-200">
                    <h6 class="font-semibold text-xl text-gray-800 mb-4">Upload Your ID</h6>
                    <p class="text-sm text-gray-500 mb-4">Accepted formats: PDF, JPG, PNG. If using a mobile device, you may use your camera.</p>
                    
                    <div class="flex flex-col items-center justify-center w-full p-4 border-2 border-dashed border-gray-300 rounded-md hover:border-blue-300 transition">
                      <label for="idDocs" class="text-blue-600 underline cursor-pointer">Select File</label>
                      <input 
                        id="idDocs" 
                        name="idDocs" 
                        type="file"
                        accept=".pdf,.jpg,.jpeg,.png"
                        class="hidden"
                      >
              
                      <% if (identificationData && identificationData.IDFilePath) { %>
                        <p class="text-sm text-gray-800 mt-2">
                          Current File: 
                          <a href="<%= identificationData.IDUrl %>" target="_blank" class="text-blue-600 underline">
                            View Identification Document
                          </a>
                        </p>
                      <% } else { %>
                        <p class="text-sm text-gray-500 mt-2">No file uploaded yet.</p>
                      <% } %>
              
                      <!-- Add a preview container for local preview -->
                      <div id="idDocsPreview" class="mt-2 text-sm text-gray-500">
                        No file chosen.
                      </div>
                    </div>
                  </div>
              
                  <!-- Buttons -->
                  <div class="flex space-x-4">
                    <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-identification-docs">
                      Save
                    </button>
                    <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
                  </div>
                </div>
              </li>
    
              <!-- Income Verification Documents Task -->
              <% 
let employmentType = 'W-2';
if (applicationData && !applicationData.EmployerName) {
  employmentType = 'Self-Employed';
}
%>

<li class="task-item border rounded-lg transition"
    data-task-id="incomeVerification"
    data-task-status="<%= (incomeData && incomeData.ApplicationStatus) ? incomeData.ApplicationStatus : 'Not Started' %>"
    data-employment-type="<%= employmentType %>">
  <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
    <div>
      <h4 class="font-bold text-gray-800 mb-1">Income Verification Documents</h4>
      <p class="text-sm text-gray-600">Upload required pay stubs, W-2s, tax returns, 1099s, or P&L statements.</p>
    </div>
    <div class="flex items-center space-x-2">
      <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
           fill="currentColor" viewBox="0 0 20 20">
        <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
      </svg>
      <% const incomeStatus = getStatusInfo(incomeData ? incomeData.ApplicationStatus : null); %>
      <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= incomeStatus.class %>">
        <%= incomeStatus.display %>
      </span>
    </div>
  </div>

  <div class="income-verification-form hidden p-4 border-t">
    <h5 class="text-lg font-bold text-blue-800 mb-4">Upload Your Income Verification Documents</h5>
    <p class="text-sm text-gray-700 mb-4">
      Please upload all applicable documents. <span class="text-gray-500">(Employment Type: <%= employmentType %>)</span>
      <br><span class="text-gray-400">Accepted formats: PDF, JPG, PNG (max 10MB each)</span>
    </p>

    <!-- Pay Stubs -->
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Recent Pay Stubs <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Last 30 days of pay stubs">[?]</span>
      </label>
      <input type="file" multiple name="payStubs" id="payStubs" class="border p-2 rounded w-full">
      <div id="payStubsPreview" class="mt-2 text-sm text-gray-500">
        <% if (incomeData && incomeData.PayStubs && incomeData.PayStubs.length > 0) { %>
          <% incomeData.PayStubs.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="paystub" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_INCOME %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <!-- W-2s -->
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        W-2s (Past 2 Years) <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Last two years of W-2 forms">[?]</span>
      </label>
      <input type="file" multiple name="w2s" id="w2s" class="border p-2 rounded w-full">
      <div id="w2sPreview" class="mt-2 text-sm text-gray-500">
        <% if (incomeData && incomeData.W2s && incomeData.W2s.length > 0) { %>
          <% incomeData.W2s.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="w2" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_INCOME %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <!-- Tax Returns -->
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Personal/Business Tax Returns (2 Years) <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Last two years of tax returns">[?]</span>
      </label>
      <input type="file" multiple name="taxReturns" id="taxReturns" class="border p-2 rounded w-full">
      <div id="taxReturnsPreview" class="mt-2 text-sm text-gray-500">
        <% if (incomeData && incomeData.TaxReturns && incomeData.TaxReturns.length > 0) { %>
          <% incomeData.TaxReturns.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="taxreturn" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_INCOME %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <!-- 1099s -->
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        1099 Forms <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="If applicable, last two years of 1099 forms">[?]</span>
      </label>
      <input type="file" multiple name="form1099s" id="form1099s" class="border p-2 rounded w-full">
      <div id="form1099sPreview" class="mt-2 text-sm text-gray-500">
        <% if (incomeData && incomeData.Form1099s && incomeData.Form1099s.length > 0) { %>
          <% incomeData.Form1099s.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="form1099" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_INCOME %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <!-- P&L -->
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Year-to-Date P&L Statements <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Current year Profit & Loss statement">[?]</span>
      </label>
      <input type="file" multiple name="pnlDocs" id="pnlDocs" class="border p-2 rounded w-full">
      <div id="pnlDocsPreview" class="mt-2 text-sm text-gray-500">
        <% if (incomeData && incomeData.PnL && incomeData.PnL.length > 0) { %>
          <% incomeData.PnL.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="pnl" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_INCOME %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <div class="flex space-x-4">
      <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-income-docs">
        Save
      </button>
      <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
    </div>
  </div>
</li>
    
              <!-- Asset Verification Documents Task -->
              <%
  // Suppose we've already fetched assetData similar to incomeData and identificationData
  // and converted BankStatementsFiles, InvestmentStatementsFiles, RetirementStatementsFiles into arrays
  // named assetData.Bank, assetData.Investment, assetData.Retirement respectively.
%>

<li class="task-item border rounded-lg transition" data-task-id="assetVerification" data-task-status="<%= (assetData && assetData.ApplicationStatus) ? assetData.ApplicationStatus : 'Not Started' %>">
  <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
    <div>
      <h4 class="font-bold text-gray-800 mb-1">Asset Verification Documents</h4>
      <p class="text-sm text-gray-600">Upload recent bank, investment, and retirement account statements or link accounts.</p>
    </div>
    <div class="flex items-center space-x-2">
      <!-- Arrow Icon -->
      <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
           fill="currentColor" viewBox="0 0 20 20">
        <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
      </svg>

      <!-- Status Label -->
      <% const assetStatus = getStatusInfo(assetData ? assetData.ApplicationStatus : null); %>
      <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= assetStatus.class %>">
        <%= assetStatus.display %>
      </span>
    </div>
  </div>

  <div class="asset-verification-form hidden p-4 border-t">
    <h5 class="text-lg font-bold text-blue-800 mb-4">Upload or Link Your Asset Accounts</h5>
    <p class="text-sm text-gray-700 mb-4">
      Please upload 2â€“3 months of PDF bank statements and corresponding investment/retirement account statements. Or you can link your accounts securely.
      <br><span class="text-gray-400">Accepted formats: PDF, JPG, PNG (max 10MB each)</span>
    </p>

    <!-- Bank Statements -->
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Bank Statements (2-3 months) <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Recent checking/savings account statements in PDF format">[?]</span>
      </label>
      <input type="file" multiple name="bankStatements" id="bankStatements" class="border p-2 rounded w-full">
      <div id="bankStatementsPreview" class="mt-2 text-sm text-gray-500">
        <% if (assetData && assetData.Bank && assetData.Bank.length > 0) { %>
          <% assetData.Bank.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="bankstatement" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_ASSET %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <!-- Investment Statements -->
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Investment Account Statements <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Mutual funds, stocks, bonds statements">[?]</span>
      </label>
      <input type="file" multiple name="investmentStatements" id="investmentStatements" class="border p-2 rounded w-full">
      <div id="investmentStatementsPreview" class="mt-2 text-sm text-gray-500">
        <% if (assetData && assetData.Investment && assetData.Investment.length > 0) { %>
          <% assetData.Investment.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="investmentstatement" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_ASSET %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <!-- Retirement Statements -->
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Retirement Account Statements <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="401(k), IRA, or other retirement accounts">[?]</span>
      </label>
      <input type="file" multiple name="retirementStatements" id="retirementStatements" class="border p-2 rounded w-full">
      <div id="retirementStatementsPreview" class="mt-2 text-sm text-gray-500">
        <% if (assetData && assetData.Retirement && assetData.Retirement.length > 0) { %>
          <% assetData.Retirement.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="retirementstatement" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_ASSET %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <div class="mb-4">
      <p class="text-sm text-gray-700 mb-2">Or link your accounts securely:</p>
      <button type="button" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition link-account-button">
        Link Accounts
      </button>
      <span class="tooltip text-blue-600 ml-1" title="Linking accounts may require a secure external widget (e.g., Plaid).">[?]</span>
    </div>

    <div class="flex space-x-4">
      <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-asset-docs">
        Save
      </button>
      <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
    </div>
  </div>
</li>
    
              <!-- Liability Verification Documents Task -->
              <li class="task-item border rounded-lg transition"
    data-task-id="liabilityVerification"
    data-task-status="<%= (liabilityData && liabilityData.ApplicationStatus) ? liabilityData.ApplicationStatus : 'Not Started' %>">
  <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
    <div>
      <h4 class="font-bold text-gray-800 mb-1">Liability Verification Documents</h4>
      <p class="text-sm text-gray-600">Upload statements for credit cards, auto loans, student loans, and mortgage (if applicable).</p>
    </div>
    <div class="flex items-center space-x-2">
      <!-- Arrow Icon -->
      <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
           fill="currentColor" viewBox="0 0 20 20">
        <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
      </svg>
      <% const liabilityStatus = getStatusInfo(liabilityData ? liabilityData.ApplicationStatus : null); %>
      <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= liabilityStatus.class %>">
        <%= liabilityStatus.display %>
      </span>
    </div>
  </div>

  <div class="liability-verification-form hidden p-4 border-t">
    <h5 class="text-lg font-bold text-blue-800 mb-4">Upload Your Liability Verification Documents</h5>
    <p class="text-sm text-gray-700 mb-4">Please provide recent statements for all outstanding debts (Credit Cards, Auto Loans, Student Loans, Mortgage if applicable). <span class="text-gray-400">(PDF, JPG, PNG)</span></p>

    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Credit Card Statements <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Most recent credit card statements">[?]</span>
      </label>
      <input type="file" multiple name="creditCardStatements" id="creditCardStatements" class="border p-2 rounded w-full">
      <div id="creditCardStatementsPreview" class="mt-2 text-sm text-gray-500">
        <% if (liabilityData && liabilityData.CreditCardStatements && liabilityData.CreditCardStatements.length > 0) { %>
          <% liabilityData.CreditCardStatements.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="creditcard" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_LIABILITY %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Auto Loan Statements <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Most recent auto loan statements">[?]</span>
      </label>
      <input type="file" multiple name="autoLoanStatements" id="autoLoanStatements" class="border p-2 rounded w-full">
      <div id="autoLoanStatementsPreview" class="mt-2 text-sm text-gray-500">
        <% if (liabilityData && liabilityData.AutoLoanStatements && liabilityData.AutoLoanStatements.length > 0) { %>
          <% liabilityData.AutoLoanStatements.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="autoloan" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_LIABILITY %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Student Loan Statements <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Most recent student loan statements">[?]</span>
      </label>
      <input type="file" multiple name="studentLoanStatements" id="studentLoanStatements" class="border p-2 rounded w-full">
      <div id="studentLoanStatementsPreview" class="mt-2 text-sm text-gray-500">
        <% if (liabilityData && liabilityData.StudentLoanStatements && liabilityData.StudentLoanStatements.length > 0) { %>
          <% liabilityData.StudentLoanStatements.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="studentloan" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_LIABILITY %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-2">
        Mortgage Statement <span class="text-red-500">*</span>
        <span class="tooltip text-blue-600 ml-1" title="Most recent mortgage statement">[?]</span>
      </label>
      <input type="file" multiple name="mortgageStatement" id="mortgageStatement" class="border p-2 rounded w-full">
      <div id="mortgageStatementPreview" class="mt-2 text-sm text-gray-500">
        <% if (liabilityData && liabilityData.MortgageStatement && liabilityData.MortgageStatement.length > 0) { %>
          <% liabilityData.MortgageStatement.forEach(file => { %>
            <div class="flex items-center justify-between mb-1 bg-gray-50 px-2 py-1 rounded">
              <a href="<%= file.url %>" target="_blank" class="text-blue-600 underline truncate flex-1"><%= file.name %></a>
              <button type="button" class="delete-doc-btn ml-2 text-red-500 hover:text-red-700 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50" 
                      data-doc-type="mortgage" 
                      data-blob-name="<%= file.name %>"
                      data-container="<%= process.env.AZURE_STORAGE_CONTAINER_NAME_LIABILITY %>">
                ðŸ—‘ï¸ Delete
              </button>
            </div>
          <% }) %>
        <% } else { %>
          No file chosen.
        <% } %>
      </div>
    </div>

    <div class="flex space-x-4">
      <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-liability-docs">
        Save
      </button>
      <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
    </div>
  </div>
</li>
    
              <!-- Disclosures & Loan Estimate Review Task -->
              <%
  // Use existing maxLoanAmount from pre-approval or hardcode
  let interestRate = '3.75%'; // example
  let monthlyPayment = '$1,850'; // example
  let closingCosts = '$6,500'; // example
%>

<li class="task-item border rounded-lg transition" data-task-id="disclosures" data-task-status="<%= (disclosuresData && disclosuresData.ApplicationStatus) ? disclosuresData.ApplicationStatus : 'Not Started' %>">
  <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
    <div>
      <h4 class="font-bold text-gray-800 mb-1">Disclosures & Loan Estimate Review</h4>
      <p class="text-sm text-gray-600">Review and acknowledge disclosures, view preliminary Loan Estimate.</p>
    </div>
    <div class="flex items-center space-x-2">
      <!-- Arrow Icon -->
      <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
           fill="currentColor" viewBox="0 0 20 20">
        <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
      </svg>

      <!-- Status Label -->
      <% const disclosuresStatus = getStatusInfo(disclosuresData ? disclosuresData.ApplicationStatus : null); %>
      <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= disclosuresStatus.class %>">
        <%= disclosuresStatus.display %>
      </span>
    </div>
  </div>


  <div class="disclosures-form hidden p-4 border-t">
    <h5 class="text-lg font-bold text-blue-800 mb-4">Review Your Preliminary Loan Estimate & Disclosures</h5>
    <p class="text-sm text-gray-700 mb-4">
      These disclosures provide important information about your loan. The Loan Estimate is preliminary and may change after full underwriting and appraisal.
    </p>

    <!-- Loan Estimate Info -->
    <div class="mb-4 bg-white p-4 border rounded-md">
      <h6 class="font-semibold text-xl text-gray-800 mb-4">Preliminary Loan Estimate</h6>
      <p class="text-sm text-gray-700 mb-2">Interest Rate: <span class="tooltip text-blue-600 ml-1" title="Your current estimated interest rate. May change if not locked or after underwriting.">[?]</span> <%= interestRate %></p>
      <p class="text-sm text-gray-700 mb-2">Monthly Payment: <%= monthlyPayment %></p>
      <p class="text-sm text-gray-700 mb-2">Estimated Closing Costs: <%= closingCosts %></p>
      <p class="text-xs text-gray-500 mb-2">These terms are preliminary and subject to change based on final underwriting and property appraisal.</p>
      <a href="#" class="text-blue-600 underline text-sm download-le-button">Download LE</a>
    </div>

    <!-- Disclosures Acknowledgments -->
    <div class="mb-4 bg-white p-4 border rounded-md">
      <h6 class="font-semibold text-xl text-gray-800 mb-4">Disclosures</h6>
      <p class="text-sm text-gray-700 mb-2">
        Please acknowledge the following:
      </p>
      <div class="flex items-center mb-2">
        <input type="checkbox" id="ecoaCheck" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
        <label for="ecoaCheck" class="ml-2 text-sm text-gray-700">ECOA Disclosure</label>
      </div>
      <div class="flex items-center mb-2">
        <input type="checkbox" id="fcraCheck" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
        <label for="fcraCheck" class="ml-2 text-sm text-gray-700">FCRA Disclosure</label>
      </div>
      <div class="flex items-center mb-4">
        <input type="checkbox" id="homeLoanToolkitCheck" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
        <label for="homeLoanToolkitCheck" class="ml-2 text-sm text-gray-700">Home Loan Toolkit</label>
      </div>

      <div class="flex flex-col mb-4">
        <label for="eSignatureDisclosures" class="block text-sm font-medium text-gray-700 mb-1">
          E-Signature (Type Your Name) <span class="text-red-500">*</span>
        </label>
        <input 
          type="text" 
          id="eSignatureDisclosures" 
          name="eSignatureDisclosures"
          placeholder="Your Full Name"
          class="border p-2 rounded-md"
        >
      </div>

      <div class="flex items-center mb-4">
        <input type="checkbox" id="intentToProceedCheck" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
        <label for="intentToProceedCheck" class="ml-2 text-sm text-gray-700 tooltip" title="By indicating Intent to Proceed, you confirm you wish to continue with the loan application process.">Intent to Proceed [ ? ]</label>
      </div>
    </div>

    <div class="flex space-x-4">
      <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-disclosures">
        Acknowledge & Proceed
      </button>
      <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
    </div>
  </div>
</li>
    
            </ul>
          </div>
    
          <!-- Optional Tasks -->
          <div class="mt-8">
            <h3 class="font-semibold text-xl text-gray-800 border-b pb-2 mb-4">Optional / Conditional Tasks</h3>
            <ul class="space-y-4">
    
              <!-- Co-Borrower Information & Documents (Optional) -->
              <li class="task-item border rounded-lg transition" data-task-id="coBorrower" data-optional="true" data-task-status="<%= (coBorrowerData && coBorrowerData.ApplicationStatus) ? coBorrowerData.ApplicationStatus : 'Not Started' %>">
                <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
                  <div>
                    <h4 class="font-bold text-gray-800 mb-1">Co-Borrower Information & Documents (Optional)</h4>
                    <p class="text-sm text-gray-600">Provide co-borrower details if applicable. Not required for submission.</p>
                  </div>
                  <div class="flex items-center space-x-2">
                    <!-- Arrow Icon -->
                    <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
                         fill="currentColor" viewBox="0 0 20 20">
                      <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
                    </svg>
              
                    <!-- Dynamic Status Label -->
                    <% const coBorrowerStatus = getStatusInfo(coBorrowerData ? coBorrowerData.ApplicationStatus : null); %>
                    <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= coBorrowerStatus.class %>">
                      <%= coBorrowerStatus.display %>
                    </span>
                  </div>
                </div>
              
              
                <div class="co-borrower-form hidden p-4 border-t">
                  <h5 class="text-lg font-bold text-blue-800 mb-4">Co-Borrower Details</h5>
                  <p class="text-sm text-gray-700 mb-4">
                    Optional: Provide co-borrower's personal info and documents.
                  </p>
              
                  <div class="mb-8 bg-white rounded-lg p-4 border border-gray-200">
                    <h6 class="font-semibold text-xl text-gray-800 mb-4">Personal Information (Optional)</h6>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div class="flex flex-col">
                        <label for="coBorrowerFirstName" class="block text-sm font-medium text-gray-700 mb-1">
                          First Name
                        </label>
                        <input 
                          type="text" 
                          id="coBorrowerFirstName"
                          placeholder="Enter co-borrower's first name"
                          class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
                                 focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition">
                      </div>
                      <div class="flex flex-col">
                        <label for="coBorrowerLastName" class="block text-sm font-medium text-gray-700 mb-1">
                          Last Name
                        </label>
                        <input 
                          type="text" 
                          id="coBorrowerLastName"
                          placeholder="Enter co-borrower's last name"
                          class="mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800 placeholder-gray-400
                                 focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition">
                      </div>
                    </div>
                  </div>
              
                  <div class="mb-8 bg-white rounded-lg p-4 border border-gray-200">
                    <h6 class="font-semibold text-xl text-gray-800 mb-4">Upload Documents (Optional)</h6>
                    <p class="text-sm text-gray-500 mb-4">Upload co-borrower's ID, pay stubs, W-2s if desired. <span class="text-gray-400">(PDF, JPG, PNG)</span></p>
                    <div>
                      <label class="block mb-2 text-sm font-medium text-gray-700" for="coBorrowerDocs">Upload Documents <span class="text-gray-400 font-normal">(PDF, JPG, PNG)</span></label>
                      <input 
                        class="block w-full text-sm text-gray-800 border border-gray-300 rounded-md p-2 cursor-pointer
                              focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
                        id="coBorrowerDocs"
                        name="coBorrowerDocs"
                        type="file"
                        multiple>
                    </div>
                  </div>
              
                  <div class="flex space-x-4">
                    <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-co-borrower">
                      Save
                    </button>
                    <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
                  </div>
                </div>
              </li>
    
              <!-- Purchase Agreement (Optional) -->
              <li class="task-item border rounded-lg transition"
    data-task-id="purchaseAgreement"
    data-optional="true"
    data-task-status="<%= (purchaseAgreementData && purchaseAgreementData.ApplicationStatus) ? purchaseAgreementData.ApplicationStatus : 'Not Started' %>">
  <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
    <div>
      <h4 class="font-bold text-gray-800 mb-1">Upload Purchase Agreement (Optional)</h4>
      <p class="text-sm text-gray-600">Upload the executed purchase agreement for the property being purchased.</p>
    </div>
    <div class="flex items-center space-x-2">
      <!-- Arrow Icon -->
      <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
           fill="currentColor" viewBox="0 0 20 20">
        <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
      </svg>

      <!-- Dynamic Status Label -->
      <% const purchaseAgreementStatus = getStatusInfo(purchaseAgreementData ? purchaseAgreementData.ApplicationStatus : null); %>
      <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= purchaseAgreementStatus.class %>">
        <%= purchaseAgreementStatus.display %>
      </span>
    </div>
  </div>

  <div class="purchase-agreement-form hidden p-4 border-t">
    <h5 class="text-lg font-bold text-blue-800 mb-4">Purchase Agreement</h5>
    <p class="text-sm text-gray-700 mb-4">
      Please upload the signed purchase agreement in PDF format. This is optional and does not affect submission readiness.
    </p>

    <div class="mb-8 bg-white rounded-lg p-4 border border-gray-200">
      <h6 class="font-semibold text-xl text-gray-800 mb-4">Upload Document (Optional)</h6>
      <p class="text-sm text-gray-400 mb-4">Accepted format: PDF only</p>
      <div>
        <label class="block mb-2 text-sm font-medium text-gray-700" for="purchaseAgreement">Upload Agreement <span class="text-gray-400 font-normal">(PDF)</span></label>
        <input
          class="block w-full text-sm text-gray-800 border border-gray-300 rounded-md p-2 cursor-pointer 
                focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
          id="purchaseAgreement"
          name="purchaseAgreement"
          type="file"
          accept="application/pdf"
        >
        <div id="purchaseAgreementPreview" class="mt-2 text-sm text-gray-500">
          <% if (purchaseAgreementData && purchaseAgreementData.AgreementUrl) { %>
            <a href="<%= purchaseAgreementData.AgreementUrl %>" target="_blank" class="text-blue-600 underline">
              View Uploaded Purchase Agreement
            </a>
          <% } else { %>
            No file chosen.
          <% } %>
        </div>
      </div>
    </div>

    <div class="flex space-x-4">
      <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-purchase-agreement">
        Save
      </button>
      <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
    </div>
  </div>
</li>
    
              <!-- Gift Letter (Optional) -->
              <li class="task-item border rounded-lg transition" data-task-id="giftLetter" data-optional="true" data-task-status="<%= (giftLetterData && giftLetterData.ApplicationStatus) ? giftLetterData.ApplicationStatus : 'Not Started' %>">
                <div class="task-header cursor-pointer hover:bg-gray-50 transition flex items-center justify-between p-4 rounded-t-lg">
                  <div>
                    <h4 class="font-bold text-gray-800 mb-1">Upload Gift Letter (Optional)</h4>
                    <p class="text-sm text-gray-600">Provide the signed gift letter to document that gift funds are not a loan.</p>
                  </div>
                  <div class="flex items-center space-x-2">
                    <!-- Arrow Icon -->
                    <svg class="task-arrow w-6 h-6 transform transition-transform duration-200 text-gray-800"
                         fill="currentColor" viewBox="0 0 20 20">
                      <path d="M5.23 7.21a.75.75 0 011.06-.02L10 10.8l3.71-3.61a.75.75 0 011.04 1.08l-4.24 4.12a.75.75 0 01-1.04 0L5.21 8.27a.75.75 0 01.02-1.06z"/>
                    </svg>
              
                    <!-- Dynamic Status Label -->
                    <% const giftLetterStatus = getStatusInfo(giftLetterData ? giftLetterData.ApplicationStatus : null); %>
                    <span class="task-status-label text-sm font-semibold px-3 py-1 rounded-full <%= giftLetterStatus.class %>">
                      <%= giftLetterStatus.display %>
                    </span>
                  </div>
                </div>
              
                <div class="gift-letter-form hidden p-4 border-t">
                  <h5 class="text-lg font-bold text-blue-800 mb-4">Gift Letter</h5>
                  <p class="text-sm text-gray-700 mb-4">
                    Please download the gift letter template, have the donor complete and sign it, then upload the signed PDF here.
                    This step is optional and does not affect your submission readiness.
                  </p>
              
                  <!-- Download Template Link -->
                  <div class="mb-4">
                    <a href="/templates/gift-letter-template.pdf" class="text-blue-600 underline text-sm" target="_blank">Download Gift Letter Template</a>
                  </div>
              
                  <div class="mb-8 bg-white rounded-lg p-4 border border-gray-200">
                    <h6 class="font-semibold text-xl text-gray-800 mb-4">Upload Document (Optional)</h6>
                    <p class="text-sm text-gray-400 mb-4">Accepted format: PDF only</p>
                    <div>
                      <label class="block mb-2 text-sm font-medium text-gray-700" for="giftLetter">Upload Signed Gift Letter <span class="text-gray-400 font-normal">(PDF)</span></label>
                      <input
                        class="block w-full text-sm text-gray-800 border border-gray-300 rounded-md p-2 cursor-pointer 
                              focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"
                        id="giftLetter"
                        name="giftLetter"
                        type="file"
                        accept="application/pdf"
                      >
                    </div>
              
                    <!-- Local Preview -->
                    <div id="giftLetterPreview" class="mt-2 text-sm text-gray-500">
                      <% if (giftLetterData && giftLetterData.GiftLetterUrl) { %>
                        <a href="<%= giftLetterData.GiftLetterUrl %>" target="_blank" class="text-blue-600 underline">
                          View Uploaded Gift Letter
                        </a>
                      <% } else { %>
                        No file chosen.
                      <% } %>
                    </div>
                  </div>
              
                  <div class="flex space-x-4">
                    <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition save-gift-letter">
                      Save
                    </button>
                    <a href="#" class="text-blue-600 underline text-sm self-center">Contact Support</a>
                  </div>
                </div>
              </li>
    
            </ul>
          </div>
        </div>
    
        <!-- Submit Application Package Button -->
        <div class="mt-8">
          <button id="submitApplication" class="bg-gray-400 text-white px-6 py-2 rounded-md text-lg font-semibold transition cursor-not-allowed" disabled>
            Submit Application Package
          </button>
        </div>
      </div>
<% } %>
    </section>
    